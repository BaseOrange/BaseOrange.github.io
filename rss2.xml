<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>大橙子</title>
    <link>https://log.660066.xyz/</link>
    
    <atom:link href="https://log.660066.xyz/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description>新的斗争开始了&lt;br/&gt;A new struggle has begun</description>
    <pubDate>Tue, 15 Jul 2025 01:29:22 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>【软考zst2001专辑笔记】001计算机系统</title>
      <link>https://log.660066.xyz/2025/07/15/zst-computer-system-notes/</link>
      <guid>https://log.660066.xyz/2025/07/15/zst-computer-system-notes/</guid>
      <pubDate>Tue, 15 Jul 2025 01:15:01 GMT</pubDate>
      
      <description>【软考zst2001专辑笔记】001计算机系统</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="一、CPU"><a href="#一、CPU" class="headerlink" title="一、CPU"></a>一、CPU</h1><ul><li>计算机基本硬件系统：运算器、控制器、存储器、输入设备、输出设备</li><li>运算器、控制器等部件集成后成为中央处理器，是硬件系统的核心。</li><li>CPU的功能：<ul><li>控制器：程序控制、操作控制、时间控制</li><li>运算器：数据处理</li></ul></li></ul><h1 id="二、运算器"><a href="#二、运算器" class="headerlink" title="二、运算器"></a>二、运算器</h1><ul><li>运算器：由算数逻辑单元（ALU）、累加寄存器、数据缓冲寄存器、状态条件寄存器组成。</li><li>运算器的主要功能：<ul><li>算数运算：加、减、乘、除、附加运算。</li><li>逻辑运算、逻辑测试：与、或、非、零值测试、两个值的比较。</li></ul></li><li><strong>算数逻辑单元（ALU）</strong>：重要组成部件，负责处理数据（算数运算、逻辑运算）。</li><li><strong>累加寄存器（AC）</strong>：通用寄存器，为ALU提供一个工作区。运算结果存储在累加器中。</li><li>数据缓冲寄存器（DR）：CPU和内存、外部设备之间数据传送的中转站。</li><li>状态条件寄存器（PSW）:标志，进位、溢出、0标志、负标志、中断、方向。</li></ul><h1 id="三、控制器"><a href="#三、控制器" class="headerlink" title="三、控制器"></a>三、控制器</h1><p>要保证程序的正确执行，还要能处理异常事件。</p><ul><li>指令寄存器（IR）：执行指令先从内存取到缓冲寄存器，再送入IR暂存。</li><li>程序计数器（PC）：具有寄存信息、计数两种功能。存储CPU要执行的下一条指令的地址。大多数情况都是顺序执行，所以修改过程只是简单的加1。</li><li>地址寄存器（AR）：保持当前CPU所访问的内存地址。</li><li>指令译码器（ID）：指令包含操作码和地址码。对指令中的操作码进行分析解释。</li></ul><h1 id="四、计算机基本单位"><a href="#四、计算机基本单位" class="headerlink" title="四、计算机基本单位"></a>四、计算机基本单位</h1><table><thead><tr><th>名称</th><th>英文</th><th>简写</th><th>换算</th></tr></thead><tbody><tr><td>位（比特）</td><td>bit</td><td>b</td><td></td></tr><tr><td>字节</td><td>byte</td><td>B</td><td>1B &#x3D; 8b</td></tr><tr><td>千字节</td><td></td><td>KB</td><td>1KB &#x3D; 1024B</td></tr><tr><td>兆字节</td><td></td><td>MB</td><td>1MB &#x3D; 1024KB</td></tr><tr><td>吉字节</td><td></td><td>GB</td><td>1GB &#x3D; 1024MB</td></tr><tr><td>钛字节</td><td></td><td>TB</td><td>1TB &#x3D; 1024GB</td></tr></tbody></table><p>最小的数据单位：b</p><p>最小的存储单位：byte</p><h1 id="五、十进制、二进制"><a href="#五、十进制、二进制" class="headerlink" title="五、十进制、二进制"></a>五、十进制、二进制</h1><ul><li>十进制：0—9</li><li>二进制：0—1</li><li>八进制：0—7</li><li>十六进制：0—9 + A—F</li></ul><p>按位展开求和：<strong>n</strong>进制—&gt;<strong>十</strong>进制</p><ul><li>将二进制 <code>1011</code> 转换为十进制  为🌰</li><li><img src="/2025/07/15/zst-computer-system-notes/1751592658972-4bfdf271-99f6-4785-94cd-6201c1a7b962.png"></li><li></li></ul><p>除n取余法：<strong>十</strong>进制—&gt;<strong>n</strong>进制</p><ul><li>将十进制 <code>23</code> 转换为二进制  为🌰</li><li><img src="/2025/07/15/zst-computer-system-notes/1751592618535-bc2db6b9-13de-4a0a-a4f8-8d3738128333.png"></li><li><img src="/2025/07/15/zst-computer-system-notes/1751593020878-865c5972-9f9c-4b3b-8934-333148cdd128.png"></li></ul><h1 id="六、八进制、十六进制"><a href="#六、八进制、十六进制" class="headerlink" title="六、八进制、十六进制"></a>六、八进制、十六进制</h1><p>1位十六进制数 &#x3D; 4位二进制数</p><p>1位八进制数 &#x3D; 3位二进制数</p><h1 id="七、进制加减法"><a href="#七、进制加减法" class="headerlink" title="七、进制加减法"></a>七、进制加减法</h1><p>n进制加法：逢n进1</p><p>n进制减法：借1当n</p><h1 id="八、原码、反码、补码、移码"><a href="#八、原码、反码、补码、移码" class="headerlink" title="八、原码、反码、补码、移码"></a>八、原码、反码、补码、移码</h1><p>原码：最高位是符号位，0表示正号，1表示负号，其余的n-1位表示数值的绝对值。</p><ul><li>0有两种表示形式：[+0] &#x3D; 0 0000000，[-0] &#x3D; 1 0000000</li></ul><p>反码：最高位是符号位，0表示正号，1表示负号。正数的反码与原码相同，负数的反码是负原码绝对值求反。</p><ul><li>0有两种表示形式：[+0] &#x3D; 0 0000000，[-0] &#x3D; 1 1111111</li></ul><p>补码：最高位是符号位，0表示正号，1表示负号。正数的补码与反码、原码相同，负数的补码是负反码末位加1。</p><ul><li>0有唯一值：[+0] &#x3D; 0 0000000</li></ul><p>移码：补码的符号位取反。</p><p>特性：[[X]<sub>补</sub>]<sub>补</sub> &#x3D; [X]<sub>原</sub></p><table><thead><tr><th>码制</th><th>定点整数</th><th>定点小数</th></tr></thead><tbody><tr><td>原码</td><td>-(2<sup>n-1</sup>-1)~+(2<sup>n-1</sup>-1)</td><td>-(1-2<sup>-(n-1)</sup>)~+(1-2<sup>-(n-1)</sup>)</td></tr><tr><td>反码</td><td>-(2<sup>n-1</sup>-1)~+(2<sup>n-1</sup>-1)</td><td>-(1-2<sup>-(n-1)</sup>)~+(1-2<sup>-(n-1)</sup>)</td></tr><tr><td>补码</td><td>-2<sup>n-1</sup>~+(2<sup>n-1</sup>-1)</td><td>-1~+(1-2<sup>-(n-1)</sup>)</td></tr><tr><td>移码</td><td>-2<sup>n-1</sup>~+(2<sup>n-1</sup>-1)</td><td>-1~+(1-2<sup>-(n-1)</sup>)</td></tr></tbody></table><h1 id="九、浮点数"><a href="#九、浮点数" class="headerlink" title="九、浮点数"></a>九、浮点数</h1><p>当机器字长为n时，定点数的补码和移码可表示2<sup>n</sup>个数，而原码和反码只能表示2<sup>n</sup>-1个数（0的表示占用了两个编码）。</p><p>一个二进制数N的<strong>浮点表示法</strong>为N &#x3D; 2<sup>E</sup> ✕ F，E为阶码，F为尾数。用阶码和尾数表示的数成为浮点数。</p><p>对阶：小阶向大阶对其，浮点数向右移。</p><p><img src="/2025/07/15/zst-computer-system-notes/1751595391793-04419973-0fde-4b9a-9a50-9e12248f6a07.png"></p><p>浮点数中，数值范围由阶码决定，数值精确度由尾数决定。格式化就是将尾数限定在区间[0.5,1]</p><p>浮点数的阶码（包括1位阶符）用R位的移码表示，尾数（包括1位数符）用M位的补码表示，则这种浮点数能表示的数值范围：最大正数<img src="/2025/07/15/zst-computer-system-notes/1751595659539-8a88c2bf-343a-401a-9bee-97abed75c7c4.png">  最小负数<img src="/2025/07/15/zst-computer-system-notes/1751595678251-edfedd62-85db-4571-8d1c-4c8fbc87c340.png"></p><h1 id="十、寻址"><a href="#十、寻址" class="headerlink" title="十、寻址"></a>十、寻址</h1><p>立即寻址：操作数包含在指令中。</p><p>直接寻址：操作数存在内存单元中，指令直接给出操作数所在存储单元的地址。</p><p>寄存器寻址：操作数放在寄存器中，指令给出存放操作数寄存器名。</p><p>寄存器间接寻址：操作数存放在内存单元中，操作数所在的存储单元的地址在某个寄存器中。</p><p>间接寻址：指令中直接给出操作数地址的地址。</p><p>速度(由快到慢)：立即寻址&gt;寄存器寻址&gt;直接寻址&gt;寄存器间接寻址&gt;间接寻址</p><p>以下两个无需掌握</p><p><font style="color:#8A8F8D;">相对寻址：指令地址码给出一个偏移量，操作数地址等于本条指令的地址加上偏移量。</font></p><p><font style="color:#8A8F8D;">变址寻址：操作数地址等于变址寄存器的内容加偏移量。</font></p><h1 id="十一、奇偶校验码"><a href="#十一、奇偶校验码" class="headerlink" title="十一、奇偶校验码"></a>十一、奇偶校验码</h1><p>在编码中增加一位校验位，使编码中1的个数位奇数（奇校验）或偶数（偶校验），从而使码距变为2。</p><p>对于奇校验，可以检测出奇数个出错的编码。偶校验是偶数个出错的编码。<strong>无法纠错。</strong></p><p>常用奇偶校验码：水平奇偶校验码、垂直奇偶校验码、水平垂直校验码。</p><h1 id="十二、海明码"><a href="#十二、海明码" class="headerlink" title="十二、海明码"></a>十二、海明码</h1><p>码距等于2具有检索能力，码距大于等于3具有纠错能力。</p><p>利用奇偶性来检测和纠错的校验方法。</p><p>在数据位之间的特定位置插入k个校验位，扩大码距来实现检错、纠错。</p><p>公式：2<sup>k</sup>-1 ≥ n+k （数据位是n位，校验位是k位）</p><h1 id="十三、CRC循环冗余校验码"><a href="#十三、CRC循环冗余校验码" class="headerlink" title="十三、CRC循环冗余校验码"></a>十三、CRC循环冗余校验码</h1><p>可以检错，但不能纠错。</p><p>利用生成多项式，为k个数据位产生r个校验位来进行编码，编码长度为k+r</p><img src="/2025/07/15/zst-computer-system-notes/1751597009509-6a056d78-34a7-4457-af3f-bd0d4e3aefd6.png" style="zoom:50%;"><p>求CRC编码时，采用的是模2运算。</p><h1 id="十四、RISC和CISC"><a href="#十四、RISC和CISC" class="headerlink" title="十四、RISC和CISC"></a>十四、RISC和CISC</h1><table><thead><tr><th></th><th>RISC（简单指令集计算机）</th><th>CISC（复杂指令集计算机）</th></tr></thead><tbody><tr><td>指令种类</td><td>少、精简</td><td>多、丰富</td></tr><tr><td>指令复杂度</td><td>低（简单）</td><td>高（复杂）</td></tr><tr><td>指令长度</td><td>固定</td><td>变化</td></tr><tr><td>寻址方式</td><td>少</td><td>复杂多样</td></tr><tr><td>实现（译码）方式</td><td>硬布线控制逻辑<br>（组合逻辑控制器）</td><td>微程序控制技术</td></tr><tr><td>通用寄存器数量</td><td>多、大量</td><td>一般</td></tr><tr><td>流水线技术</td><td>支持</td><td>不支持<br></td></tr></tbody></table><h1 id="十五、流水线"><a href="#十五、流水线" class="headerlink" title="十五、流水线"></a>十五、流水线</h1><p>总用时：第一条指令的执行时间 + (n-1) ✕ 最长段的时间</p><p>加速比：不用流水线的时间&#x2F;采用流水线的时间</p><p>操作周期：最长时间段</p><p>吞吐率：最长时间段的倒数</p><h1 id="十六、存储器"><a href="#十六、存储器" class="headerlink" title="十六、存储器"></a>十六、存储器</h1><p>按位置分类：</p><ul><li>内存（主存）：<strong>SRAM（静态随机存储器）</strong></li><li>外存（辅存）：磁盘、磁带、光盘等。<strong>DRAM（动态随机存储器）需周期性刷新。</strong></li><li><img src="/2025/07/15/zst-computer-system-notes/1752506193037-ee4e9a05-5778-4d08-b791-1623fe41b624.png" style="zoom: 50%;"></li></ul><p>工作方式分类：</p><ul><li>读写存储器（RAM）：既能读取又能写入。</li><li>只读存储器：ROM(固定只读存储器)、PROM(可编程的只读存储器)、EPROM(可擦除可编程的只读存储器)、EEPROM(电擦除可编程的只读存储器)、闪速存储器(介于EPROM、EEPROM之间，以块为单位存储，取代ROM，不能代替主存)</li></ul><p>访问方式分类：</p><ul><li>按地址访问存储器</li><li><strong>按内容访问存储器</strong></li></ul><p>按寻址方式分类：</p><ul><li>随机存储器(RAM)</li><li>顺序存储器(SAM)</li><li>直接存储器(DAM)</li></ul><p><strong>级联存储器</strong>是一种<strong>按内容访问</strong>的存储器</p><p><strong>虚拟存储器</strong>由<strong>主存、辅存</strong>构成。</p><h1 id="十七、Cache"><a href="#十七、Cache" class="headerlink" title="十七、Cache"></a>十七、Cache</h1><p>高速缓存主要是存放最活跃的程序和数据。</p><p>位于CPU和主存之间。</p><p><strong>对于程序员来说是透明的。</strong></p><p>部分用来存放<strong>主存的部分拷贝（副本）信息。</strong></p><img src="/2025/07/15/zst-computer-system-notes/1752506416223-6d2636ff-ec31-4bce-8070-5fb5be8c1caf.png" style="zoom: 50%;"><p><strong>Cache与主存的映射是由硬件自动完成的。</strong></p><p>替换算法：（目标是使Cache尽可能提高命中率，Cache越大，命中率越高）</p><ul><li>随机替换算法：</li><li>先进先出算法：</li><li>近期最少使用算法：</li><li>优化替换算法：</li></ul><p>地址映像方法：</p><ul><li>直接映像：主存的块和Cache的块对应关系是固定的。</li><li>全相联映像：允许主存中的任意块放入Cache的任意块中。</li><li>组相联映像：主存和Cache都分组，组是一一对应的，但是组内的数据是任意存放的。</li><li>冲突：直接映像 &gt; 组相联映像 &gt; 全相联映像</li></ul><h1 id="十八、中断"><a href="#十八、中断" class="headerlink" title="十八、中断"></a>十八、中断</h1><img src="/2025/07/15/zst-computer-system-notes/1752507009624-15023c61-b6e1-4f5c-b18e-9a43cd985c25.png" style="zoom:33%;"><p>中断向量：提供中断服务程序的入口地址。</p><p>中断响应时间：从中断发出开始 到 进入中断服务程序 的时间</p><p>保存现场：用于中断处理完，返回执行源程序。</p><h1 id="十九、输入输出（IO）控制方式"><a href="#十九、输入输出（IO）控制方式" class="headerlink" title="十九、输入输出（IO）控制方式"></a>十九、输入输出（IO）控制方式</h1><ol><li>程序查询方式<ol><li><strong>CPU和IO只能串行工作</strong>。CPU需要一直轮询。CPU利用率低</li><li>一次只能读写一个字</li><li>由CPU将数据放入内存</li><li>图例：<img src="/2025/07/15/zst-computer-system-notes/1752507339839-47a0ac4b-556b-4fe5-bdc7-4842ab6286d0.png" style="zoom: 33%;"></li></ol></li><li>中断驱动方式：<ol><li>IO由中断信号猪肚报告IO操作已完成。</li><li><strong>CPU和IO可并行工作。CPU利用率高。</strong></li><li>由CPU将数据放入内存。</li><li>图例：<img src="/2025/07/15/zst-computer-system-notes/1752507462379-57cb7499-6eb7-4e37-9fda-409f59b6e4ea.png" style="zoom:33%;"></li></ol></li><li>直接存储器方式（DMA）：<ol><li><strong>CPU和IO可并行工作。</strong></li><li><strong>仅在传送数据块的开始结束时，才需要CPU干预。</strong></li><li><strong>由外设直接将数据放入内存。</strong></li><li>一次读写的单位为“块”。</li><li>图例：<img src="/2025/07/15/zst-computer-system-notes/1752507609623-4ca63fc8-7dda-4791-ac60-5a2683b6e5e9.png" style="zoom:33%;"></li></ol></li></ol><h1 id="二十、总线"><a href="#二十、总线" class="headerlink" title="二十、总线"></a>二十、总线</h1><p>总线分类：数据总线、地址总线、控制总线（口令：数地控）</p><p>常见总线：</p><ul><li>ISA总线：</li><li>EISA总线：</li><li>PCI总线：内总线，并行传输</li><li>PCI-E总线：点对点串行链接</li><li>前端总线：</li><li>RS-232C:</li><li>SCSI总线：并行外总线</li><li>SATA：</li><li>USB：</li><li>IEEE-1394：高速串行外总线</li><li>IEEE-488:</li></ul><h1 id="二十一、加密技术与认证技术"><a href="#二十一、加密技术与认证技术" class="headerlink" title="二十一、加密技术与认证技术"></a>二十一、加密技术与认证技术</h1><p>窃听——加密</p><p>篡改——摘要</p><p>假冒、否认——数字签名、数字证书</p><ol><li><p>对称加密：加解密只有一把密钥（<strong>私钥用于加密</strong>）</p><ol><li>特点：密钥分发<strong>存在缺陷</strong>。加密解密<strong>速度快</strong>。适合加密大量明文。</li></ol></li><li><p>非对称加密：加密、解密分别有自己的密钥（<strong>公钥用于加密</strong>）</p><ol><li>公钥加密只能私钥解密，私钥加密只能公钥解密。</li><li>使用接收方公钥加密明文，可实现防窃听效果。</li><li>密钥分发<strong>无缺陷</strong>。加解密<strong>速度慢</strong>。</li></ol></li><li><p>混合加密：</p></li><li><p>摘要：把明文进行hash算法，得到的摘要同密文一块发送。接收方解密后的明文，进行Hash得要摘要对比。</p></li><li><p>数字签名：</p><ol><li>发送方用私钥对摘要进行签名（加密）。得到的数字签名放入密文，一同发送。</li><li>接收方用发送方的公钥对数字签名验证（解密）。</li></ol></li></ol><p>数字证书：</p><ul><li>用户向CA（权威）机构申请数字证书。</li><li>将个人信息和公钥发送给CA机构。</li><li>CA机构颁发数字证书给用户。</li><li>数字证书用CA的私钥进行签名（加密）。</li><li>用CA的公钥验证（解密）数字证书，得要用户的公钥。</li></ul><h1 id="二十二、加密算法"><a href="#二十二、加密算法" class="headerlink" title="二十二、加密算法"></a>二十二、加密算法</h1><p>对称加密（私钥、私有密钥加密）（共享密钥加密算法）：</p><ul><li>DES</li><li>3DES</li><li>RC-5</li><li>IDEA</li><li>AES</li><li>RC4</li></ul><p>非对称加密：</p><ul><li>RSA</li><li>ECC</li><li>DSA</li></ul><p>摘要算法：</p><ul><li>Hash算法</li><li>MD5</li><li>SHA-1安全散列算法</li></ul><h1 id="二十三、可靠性公式"><a href="#二十三、可靠性公式" class="headerlink" title="二十三、可靠性公式"></a>二十三、可靠性公式</h1><p>串联：</p><ul><li><img src="/2025/07/15/zst-computer-system-notes/1752508894111-b79c6215-73c0-4e74-8d28-6e1f4071905e.png" style="zoom:33%;"></li><li>R &#x3D; R<sub>1 </sub>R<sub>2 </sub>… R<sub>N</sub></li></ul><p>并联：</p><ul><li><img src="/2025/07/15/zst-computer-system-notes/1752508984651-21f8e865-ba33-4f3c-899c-461cd436b35f.png" style="zoom:33%;"></li><li>R &#x3D; 1 - (1-R<sub>1</sub>) (1-R<sub>2 </sub>) … (1-R<sub>N</sub>)</li></ul><h1 id="二十四、补充"><a href="#二十四、补充" class="headerlink" title="二十四、补充"></a>二十四、补充</h1><p>汇编语言中 程序员 可以访问 <strong>程序计数器</strong></p><p>寄存器的<strong>位数</strong>取决于<strong>指令字长</strong>。</p><p>计算机<strong>分级存储</strong>的主要<strong>目的</strong>是为了解决 <strong>存储容量、成本和速度之间的矛盾</strong> 的问题。</p><p>计算机中CPU对其访问速度最快的是 <strong>通用寄存器。</strong></p><p>**VLIW **是 超长指令字</p><p><strong>算术左移</strong>指令<strong>相当于</strong>对操作数<strong>乘以2</strong></p><p>CPU根据** 指令周期的不同阶段** 来<strong>区分</strong>内存中以二进制编码形式存放的<strong>指令和数据。</strong></p><p>平均CPI &#x3D; （比例 × CPI ）相加</p><p>运算速度MIPS &#x3D; CPU主频 &#x2F; 平均CPI</p>]]></content:encoded>
      
      
      
      <category domain="https://log.660066.xyz/tags/%E8%BD%AF%E8%80%83/">软考</category>
      
      
      <comments>https://log.660066.xyz/2025/07/15/zst-computer-system-notes/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>【软考】中级-软件设计师-zst专辑笔记</title>
      <link>https://log.660066.xyz/2025/07/15/soft-exam-software-designer-zst-album-notes/</link>
      <guid>https://log.660066.xyz/2025/07/15/soft-exam-software-designer-zst-album-notes/</guid>
      <pubDate>Tue, 15 Jul 2025 01:14:12 GMT</pubDate>
      
      <description>【软考】中级-软件设计师-zst专辑笔记</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h1><p>在B站看到的zst2001博主的软考中级的讲解很不错。所以打算整理一下笔记。本文为后续文章的索引。</p><h1 id="二、索引"><a href="#二、索引" class="headerlink" title="二、索引"></a>二、索引</h1><ol><li><a href="../../../../2025/07/15/zst-computer-system-notes/">计算机系统</a></li></ol>]]></content:encoded>
      
      
      
      <category domain="https://log.660066.xyz/tags/%E8%BD%AF%E8%80%83/">软考</category>
      
      
      <comments>https://log.660066.xyz/2025/07/15/soft-exam-software-designer-zst-album-notes/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>速率限制的交互式指南</title>
      <link>https://log.660066.xyz/2025/06/13/interactive-guide-to-rate-limiting/</link>
      <guid>https://log.660066.xyz/2025/06/13/interactive-guide-to-rate-limiting/</guid>
      <pubDate>Fri, 13 Jun 2025 03:11:37 GMT</pubDate>
      
      <description>速率限制的交互式指南</description>
      
      
      
      <content:encoded><![CDATA[<blockquote><p>[!NOTE]</p><p>本文非原创，原文由<a href="https://hashnode.com/@Sagyam">Sagyam Thapa</a>创作</p><p>原文链接：<a href="https://blog.sagyamthapa.com.np/interactive-guide-to-rate-limiting">https://blog.sagyamthapa.com.np/interactive-guide-to-rate-limiting</a></p><p>This article is not original. The original text was created by <a href="https://hashnode.com/@Sagyam">Sagyam Thapa</a></p><p>The original link: <a href="https://blog.sagyamthapa.com.np/interactive-guide-to-rate-limiting">https://blog.sagyamthapa.com.np/interactive-guide-to-rate-limiting</a></p></blockquote><h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>限流是每个后端应用程序中的必备策略。它可以防止一个用户过度使用资源并降低其他用户的服务质量。以下是速率限制的一些好处：</p><ol><li>它呈现资源匮乏</li><li>降低服务器托管成本</li><li>提供针对 <a href="https://en.wikipedia.org/wiki/Denial-of-service_attack">DDoS</a> 的基本保护</li></ol><p>我制作了四个交互式应用程序，让您尝试常见的速率限制算法。</p><h1 id="令牌桶"><a href="#令牌桶" class="headerlink" title="令牌桶"></a>令牌桶</h1><h2 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h2><p>桶中保存固定数量的令牌</p><p>令牌以固定速率添加到存储桶中</p><p>当收到请求时：</p><ul><li>如果令牌可用，则会将其从存储桶中删除并允许请求。</li><li>如果没有可用的令牌，则请求将被拒绝或延迟。</li></ul><p>如果令牌可用，则允许偶尔进行短暂的并发</p><p>我创建了一个<a href="https://tools.sagyamthapa.com.np/token-bucket">应用程序 </a>，让您玩转漏桶算法。</p><iframe src="https://tools.sagyamthapa.com.np/token-bucket" width="800" height="610"></iframe><h1 id="漏水桶"><a href="#漏水桶" class="headerlink" title="漏水桶"></a>漏水桶</h1><h2 id="工作原理-1"><a href="#工作原理-1" class="headerlink" title="工作原理"></a>工作原理</h2><p>将其视为以固定速率泄漏的桶</p><p>传入请求将添加到存储桶中</p><p>请求以<strong>恒定速率</strong>处理（或“泄漏”）</p><p>如果新请求到达时存储桶已满，则会丢弃该请求</p><p>平滑连拍；以稳定的速率输出请求</p><p>我制作了一个<a href="https://tools.sagyamthapa.com.np/leaky-bucket">应用程序 </a>，让您玩转漏桶算法。</p><iframe src="https://tools.sagyamthapa.com.np/leaky-bucket" width="800" height="1000"></iframe><h1 id="固定窗口"><a href="#固定窗口" class="headerlink" title="固定窗口"></a>固定窗口</h1><h2 id="工作原理-2"><a href="#工作原理-2" class="headerlink" title="工作原理"></a>工作原理</h2><p>时间被划分为固定大小的窗口（例如，1 分钟）</p><p>计数器跟踪当前窗口中每个客户端&#x2F;IP 的请求数</p><p>如果计数超过限制，则进一步的请求将被拒绝，直到下一个窗口</p><p>简单高效，但允许在结束&#x2F;开始时出现突发流量峰值</p><p>我创建了一个<a href="https://tools.sagyamthapa.com.np/fixed-window">应用程序 </a>，让您使用固定窗口算法。</p><iframe src="https://tools.sagyamthapa.com.np/fixed-window" width="800" height="1000"></iframe><h1 id="滑动窗口"><a href="#滑动窗口" class="headerlink" title="滑动窗口"></a>滑动窗口</h1><h2 id="工作原理-3"><a href="#工作原理-3" class="headerlink" title="工作原理"></a>工作原理</h2><p>保留每个请求的时间戳日志</p><p>当收到请求时，将检查日志以计算在过去 <code>X</code> 秒内发出的请求数</p><p>如果低于限制，则允许并记录请求;否则，它将被拒绝</p><p>我创建了一个<a href="https://tools.sagyamthapa.com.np/sliding-window">应用程序 </a>，让您玩滑桶算法。</p><iframe src="https://tools.sagyamthapa.com.np/sliding-window" width="800" height="1000"></iframe><h1 id="中文演示"><a href="#中文演示" class="headerlink" title="中文演示"></a>中文演示</h1><p>文章原有的演示页面为英文，我用“豆书记”简单的写了一下中文的演示页面，共大家参考：</p><ul><li>令牌桶：<a href="http://log.660066.xyz/2025/06/13/interactive-guide-to-rate-limiting/token-bucket.html">http://log.660066.xyz/2025/06/13/interactive-guide-to-rate-limiting/token-bucket.html</a></li><li>漏水桶：<a href="http://log.660066.xyz/2025/06/13/interactive-guide-to-rate-limiting/leaky-bucket.html">http://log.660066.xyz/2025/06/13/interactive-guide-to-rate-limiting/leaky-bucket.html</a></li><li>固定窗口：<a href="http://log.660066.xyz/2025/06/13/interactive-guide-to-rate-limiting/fixed-window.html">http://log.660066.xyz/2025/06/13/interactive-guide-to-rate-limiting/fixed-window.html</a></li><li>滑动窗口：<a href="http://log.660066.xyz/2025/06/13/interactive-guide-to-rate-limiting/sliding-window.html">http://log.660066.xyz/2025/06/13/interactive-guide-to-rate-limiting/sliding-window.html</a></li></ul>]]></content:encoded>
      
      
      
      <category domain="https://log.660066.xyz/tags/%E5%BC%80%E5%8F%91%E7%BA%AA%E5%AE%9E/">开发纪实</category>
      
      
      <comments>https://log.660066.xyz/2025/06/13/interactive-guide-to-rate-limiting/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Macos动态切换JDK版本</title>
      <link>https://log.660066.xyz/2025/05/21/macos-jdk-version-switch/</link>
      <guid>https://log.660066.xyz/2025/05/21/macos-jdk-version-switch/</guid>
      <pubDate>Wed, 21 May 2025 06:36:25 GMT</pubDate>
      
      <description>Macos动态切换JDK版本【以ZuluJdk为例】</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h1><p>最近需要在MacOS上想装一个HMLC的启动器，因为开发的时候，使用的ZuluJDK8（最新版本），但是最新版本没带javaFX模块。HMLC又需要JavaFX模块启动，在网上搜索了一下，JDK8的JavaFX的好像没有支持的，都是自带的。</p><p>所以打算再装个JDK17，这样的话，我就需要可以动态切换JDK版本。开发的时候用8，玩MC的时候，就需要使用JDK17。</p><h1 id="二、安装ZuluJDK"><a href="#二、安装ZuluJDK" class="headerlink" title="二、安装ZuluJDK"></a>二、安装ZuluJDK</h1><p><a href="https://www.azul.com/downloads/">https://www.azul.com/downloads/</a></p><p>自己去下载安装吧，反正这个安装起来，比Win都无脑。</p><h1 id="三、配置JDK切换"><a href="#三、配置JDK切换" class="headerlink" title="三、配置JDK切换"></a>三、配置JDK切换</h1><h2 id="3-1-编辑-zshrc"><a href="#3-1-编辑-zshrc" class="headerlink" title="3.1 编辑.zshrc"></a>3.1 编辑.zshrc</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.zshrc</span><br></pre></td></tr></table></figure><h2 id="3-2-调整配置"><a href="#3-2-调整配置" class="headerlink" title="3.2 调整配置"></a>3.2 调整配置</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">JDK版本切换</span></span><br><span class="line">export JAVA8_HOME=/Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home</span><br><span class="line">export JAVA17_HOME=/Library/Java/JavaVirtualMachines/zulu-17.jdk/Contents/Home</span><br><span class="line">CLASSPATH=$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar:.</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置默认JDK版本</span></span><br><span class="line">export JAVA_HOME=$JAVA8_HOME</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">配置<span class="built_in">alias</span>命令可以动态切换JDK版本</span>  </span><br><span class="line">alias jdk8=&quot;export JAVA_HOME=$JAVA8_HOME&quot;</span><br><span class="line">alias jdk17=&quot;export JAVA_HOME=$JAVA17_HOME&quot;</span><br><span class="line">export JAVA_HOME</span><br><span class="line">export PATH</span><br><span class="line">export CLASSPATH</span><br></pre></td></tr></table></figure><p>追加到文件结尾就行</p><h2 id="3-3-生效-zshrc"><a href="#3-3-生效-zshrc" class="headerlink" title="3.3 生效.zshrc"></a>3.3 生效.zshrc</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.zshrc</span><br></pre></td></tr></table></figure><h2 id="3-4-测试"><a href="#3-4-测试" class="headerlink" title="3.4 测试"></a>3.4 测试</h2><p><img src="/2025/05/21/macos-jdk-version-switch/pic1.png" alt="测试图"></p>]]></content:encoded>
      
      
      
      <category domain="https://log.660066.xyz/tags/MacOS/">MacOS</category>
      
      
      <comments>https://log.660066.xyz/2025/05/21/macos-jdk-version-switch/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>世界这么大我想去看看-2</title>
      <link>https://log.660066.xyz/2025/05/06/world-go-to-see-2/</link>
      <guid>https://log.660066.xyz/2025/05/06/world-go-to-see-2/</guid>
      <pubDate>Tue, 06 May 2025 02:56:57 GMT</pubDate>
      
      <description>2025年5月1日深港行</description>
      
      
      
      <content:encoded><![CDATA[<p><strong>本文声明</strong>：可能部分用词措辞不当，但对香港特别行政区是祖国一部分的想念毫不动摇。如有措辞不当，请在评论区指出，以便及时改正。</p><h1 id="一、飞机延误"><a href="#一、飞机延误" class="headerlink" title="一、飞机延误"></a>一、飞机延误</h1><p>本来是晚上9点的飞机，从遥墙飞宝安。飞机是从大连飞到济南，但是4月30日晚上，大连下大雨，导致飞机延误。一直拖了到12点半，才开始登机，当时买的春秋航空，都说上了飞机就卖东西，可能是太晚的原因，并没空姐推销东西，我立马进入入睡状态。</p><p>大约三点半，落地了宝安，在宝安附近定的酒店，打了个滴滴，立马飞奔睡觉。</p><h1 id="二、深圳一日游"><a href="#二、深圳一日游" class="headerlink" title="二、深圳一日游"></a>二、深圳一日游</h1><p>深圳本来打算的挺好的，要去深圳湾，要去各种地方。但是第一站，就是去看看腾讯大厦，看看国内的大厂。</p><p><img src="/2025/05/06/world-go-to-see-2/IMG_6955.JPG" alt="IMG_6955"></p><p><img src="/2025/05/06/world-go-to-see-2/IMG_6959.JPG" alt="IMG_6959"></p><p>第二站，去华强北，本来是奔着去买个安卓备用机的，但是去了才发现，全是苹果，全是苹果啊。再加上五一，很多档口的老板可能都休假了，有些档口直接处于无人的状态，不太清楚是黄了还是休假了。</p><p><img src="/2025/05/06/world-go-to-see-2/IMG_7008.JPG" alt="IMG_7008"></p><p>第三站，去中英街。提前感受一下香港地区的风土人情，因为第二天打算去香港。中英街就是个商业街，卖各种东西的。各种免税店，这里的大店铺是用港币结算的，小店铺有可能是港币也可能是人民币，大家去的时候一定要问清是什么结算。</p><p>大概看了一下化妆品、保健品啥的价格，因为五一的时候，汇率是94:100，说实话，也没太大优惠，但是肯定是比直接在淘宝天猫京东这些网店买要便宜。索性来一趟，买了点零食，买了一小箱南洋罐。</p><p>下面请看图！</p><img src="/2025/05/06/world-go-to-see-2/IMG_6968.PNG" alt="IMG_6968" style="zoom:33%;"><p>高德显示的是香港，但是我看网上说是大陆和香港共管的状态。</p><p><img src="/2025/05/06/world-go-to-see-2/IMG_6970.JPG" alt="IMG_6970"></p><p>这里是中英街的入口。</p><p><img src="/2025/05/06/world-go-to-see-2/IMG_6973.JPG" alt="IMG_6973"></p><p>这条路好像是通往香港的，有武警战士在这站岗，这么多提示，一定是有大陆的游客曾经走进过去。</p><p><img src="/2025/05/06/world-go-to-see-2/IMG_6976.JPG" alt="IMG_6976"></p><p><img src="/2025/05/06/world-go-to-see-2/IMG_6996.JPG" alt="IMG_6996"></p><p>在深圳的当天晚上，是在皇岗口岸的格林豪泰入住的，因为三月就把酒店订好了，价格也不是很贵，订了两天。不打算晚上在香港过夜，主要是因为那边法律和大陆不同，再加上价格肯定高，所以就直接回深圳睡觉，反正也不是很远。</p><h1 id="三、香港一日半游"><a href="#三、香港一日半游" class="headerlink" title="三、香港一日半游"></a>三、香港一日半游</h1><p>因为看到网上有人说，过口岸会排长队，一大早就去了皇岗口岸。最后发现，过口岸的时候，几乎不用排队，直接进人工通道过境。</p><p><img src="/2025/05/06/world-go-to-see-2/IMG_7133.JPG" alt="IMG_7133"></p><p><img src="/2025/05/06/world-go-to-see-2/IMG_7015.JPG" alt="IMG_7015"></p><p><img src="/2025/05/06/world-go-to-see-2/IMG_7016.JPG" alt="IMG_7016"></p><p>闸机人真的很少，几乎不用排队。过了闸机，需要坐大巴车去香港的口岸，然后刷通行证，拿过关小条。</p><p>因为是第一次去香港，不是很懂，边问边走。花了10港币，坐了皇巴，从大陆开到了香港口岸，然后过完关，再换车（只是换车，不用再交费用了），把你送出口岸。</p><p>其实当时不是很懂，不应该坐皇巴，因出了香港这边的口岸，不是很好找公交车，当时应该坐九巴这些，直接去想去的那些地方，很方便。</p><p><img src="/2025/05/06/world-go-to-see-2/IMG_7018.JPG" alt="IMG_7018"></p><p>入境香港了，右舵车的天下。都说香港的冷气（空调）开得足，那确实是足，我本来就比较胖，所以说，冷一点也感觉不出啥来。不过大陆过来的小姑娘真的建议穿件防晒衣啥的。</p><p>这个图是我当时坐公交车，香港的公交车不便宜啊，12港币我记得。在车上的第一件事，就是换香港的手机卡。然后开香港银行卡，把汇丰、中银、众安都开了。</p><p>汇丰、众安都没啥太大问题。但是中银就不太好了，他需要识别我的身份证开启流动保安码，但是我名字里有个生僻字，OCR算法死活不认，没办法只能下次去香港的时候，线下营业厅搞一个实体的令牌了。如果不开启流动保安码，没法转账（有别的方式转）、没法修改通讯地址。</p><p>上面说的没法转账，其实也有办法，但是每天限额2W港币，对我来说，足够了。用BocPay+这个App去转账。</p><p>到了香港的第一站，就去了紫金广场，看看大海，看看紫荆花雕像。</p><p><img src="/2025/05/06/world-go-to-see-2/IMG_7021.JPG" alt="IMG_7021"></p><p><img src="/2025/05/06/world-go-to-see-2/IMG_7023.JPG" alt="IMG_7023"></p><p><img src="/2025/05/06/world-go-to-see-2/IMG_7049.JPG" alt="IMG_7049"></p><p><img src="/2025/05/06/world-go-to-see-2/IMG_7084.JPG" alt="IMG_7084"></p><p>这个图就是著名的星光大道，梁朝伟的手印哈哈哈哈。</p><p><img src="/2025/05/06/world-go-to-see-2/IMG_7099.JPG" alt="IMG_7099"></p><p>ICAC查案，不方便透露。打卡点的人不是很多，我们去了，陆陆续续的有三四个人也来打卡。</p><p>去廉政公署打卡，旁边有个大厅，可以卖廉政公署的周边纪念品。我朋友买了个廉政公署的小咖啡杯，另一个朋友买了名片夹。我买了一个廉政公署的胸章和一个水瓶。</p><p>下午去了太平山，真的不建议去，出发不是旅游旺季。人太多，啥也不好看。</p><p><img src="/2025/05/06/world-go-to-see-2/IMG_7128.JPG" alt="IMG_7128"></p><p><img src="/2025/05/06/world-go-to-see-2/IMG_7129.JPG" alt="IMG_7129"></p><p>此时此刻，还不知道，一会下山要经历什么痛苦。大概拍了点照片，太累了，就去排队坐大巴下山了，一路上，我丢那个堵啊，那个要命啊。别问我为啥不坐缆车，那缆车排队2小时起步，哈哈哈哈哈扛不住。</p><p>当天还去了深水埗的鸭寮街，主要是去买大湾区的电信蓝卡，这样就有一个香港的手机号了，还能在大陆合法访问谷歌，就是流量有点贵，可以去参考参考小红书。</p><p>晚上回深圳，去皇岗村吃了个烧烤（真贵啊，不是一般的贵）。</p><p>第二天，有了经验，8点才去的皇岗口岸，人还是不多，这次直接坐的大巴，直捣油麻地警署，买点纪念品。</p><p><img src="/2025/05/06/world-go-to-see-2/IMG_7137.JPG" alt="IMG_7137"></p><p>油麻地警署，人不少，可以早点去排队买点周边啥的，有很大一部分人，不是排队买周边，是排队打卡拍照哈哈哈哈。</p><p><img src="/2025/05/06/world-go-to-see-2/IMG_7139.JPG" alt="IMG_7139"></p><p>哦豁，中午吃饭的时候，发现了一个BTC的ATM机，可以买比特币哈哈哈。</p><p>随后去了旺角中心，真没啥东西感觉，也可能是逛的时间短了？反正初印象就是，不如大陆宽敞。如果让我选一个地方生活，我还是喜欢在大陆生活。</p><h1 id="四、返程回国"><a href="#四、返程回国" class="headerlink" title="四、返程回国"></a>四、返程回国</h1><p>去苏州了，跳槽到了苏州，开启人生新篇章。</p><p><img src="/2025/05/06/world-go-to-see-2/IMG_7175.JPG" alt="IMG_7175"></p><p><img src="/2025/05/06/world-go-to-see-2/IMG_7177.JPG" alt="IMG_7177"></p><p>下一站去哪？新疆天山？西藏拉萨？韩国首尔？我还没想好。</p><p>但是，这次出镜去香港，本来是去见识见识资本主义是啥样的，但是发现，好像也没什么特别的地方。不知为啥，还是感觉大陆更自在更舒服。</p>]]></content:encoded>
      
      
      
      <category domain="https://log.660066.xyz/tags/%E7%94%9F%E6%B4%BB/">生活</category>
      
      
      <comments>https://log.660066.xyz/2025/05/06/world-go-to-see-2/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>问题排查解决方案集合</title>
      <link>https://log.660066.xyz/2025/04/23/solution-record/</link>
      <guid>https://log.660066.xyz/2025/04/23/solution-record/</guid>
      <pubDate>Wed, 23 Apr 2025 07:15:38 GMT</pubDate>
      
      <description>问题排查解决方案集合</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="一、前端"><a href="#一、前端" class="headerlink" title="一、前端"></a>一、前端</h1><ol><li>待整理……</li></ol><h1 id="二、后端"><a href="#二、后端" class="headerlink" title="二、后端"></a>二、后端</h1><ol><li>待整理……</li></ol><h1 id="三、数据库"><a href="#三、数据库" class="headerlink" title="三、数据库"></a>三、数据库</h1><ol><li>MySQL死锁：<a href="https://mp.weixin.qq.com/s/l6E5otoON1CQIEfIUHDvdA">https://mp.weixin.qq.com/s/l6E5otoON1CQIEfIUHDvdA</a></li></ol><h1 id="四、运维"><a href="#四、运维" class="headerlink" title="四、运维"></a>四、运维</h1><ol><li>待整理……</li></ol><h1 id="五、其他"><a href="#五、其他" class="headerlink" title="五、其他"></a>五、其他</h1><ol><li>DDD架构：<a href="https://mp.weixin.qq.com/s/DAiGCgE0ZdBRw_ckhD8AQA">https://mp.weixin.qq.com/s/DAiGCgE0ZdBRw_ckhD8AQA</a><ul><li>DDD 系列 第一弹 - Domain Primitive：<a href="https://mp.weixin.qq.com/s?__biz=MzAxNDEwNjk5OQ==&mid=2650403892&idx=1&sn=a91fa477392e80f9420a8ca4d26bcace">https://mp.weixin.qq.com/s?__biz=MzAxNDEwNjk5OQ==&amp;mid=2650403892&amp;idx=1&amp;sn=a91fa477392e80f9420a8ca4d26bcace</a></li><li>DDD系列 第二弹 - 应用架构：<a href="https://mp.weixin.qq.com/s?__biz=MzAxNDEwNjk5OQ==&mid=2650404060&idx=1&sn=cacf40d19528f6c2d9fd165151d6e8b4">https://mp.weixin.qq.com/s?__biz=MzAxNDEwNjk5OQ==&amp;mid=2650404060&amp;idx=1&amp;sn=cacf40d19528f6c2d9fd165151d6e8b4</a></li><li>DDD系列 第三讲 - Repository模式：<a href="https://mp.weixin.qq.com/s?__biz=MzAxNDEwNjk5OQ==&mid=2650406692&idx=1&sn=4a4ac4168299d8ca1905a4f457ae4c59">https://mp.weixin.qq.com/s?__biz=MzAxNDEwNjk5OQ==&amp;mid=2650406692&amp;idx=1&amp;sn=4a4ac4168299d8ca1905a4f457ae4c59</a></li><li>DDD系列第四讲：领域层设计规范：<a href="https://mp.weixin.qq.com/s?__biz=MzAxNDEwNjk5OQ==&mid=2650414919&idx=1&sn=0ad1df1a1b0e2488f7faa21008fdbdd0">https://mp.weixin.qq.com/s?__biz=MzAxNDEwNjk5OQ==&amp;mid=2650414919&amp;idx=1&amp;sn=0ad1df1a1b0e2488f7faa21008fdbdd0</a></li><li>DDD系列第五讲：聊聊如何避免写流水账代码：<a href="https://mp.weixin.qq.com/s?__biz=MzAxNDEwNjk5OQ==&mid=2650427571&idx=1&sn=bfc3c1c6f189965a1a4c7f3918012405">https://mp.weixin.qq.com/s?__biz=MzAxNDEwNjk5OQ==&amp;mid=2650427571&amp;idx=1&amp;sn=bfc3c1c6f189965a1a4c7f3918012405</a></li><li>DDD之于逛逛内容营销中的应用：<a href="https://mp.weixin.qq.com/s?__biz=MzAxNDEwNjk5OQ==&mid=2650433660&idx=1&sn=cb424db17b96aa28b476edafa2bc3509">https://mp.weixin.qq.com/s?__biz=MzAxNDEwNjk5OQ==&amp;mid=2650433660&amp;idx=1&amp;sn=cb424db17b96aa28b476edafa2bc3509</a></li><li>DDD之于业务支撑的意义：<a href="https://mp.weixin.qq.com/s?__biz=MzAxNDEwNjk5OQ==&mid=2650517536&idx=1&sn=926ba6f2c0fcc01aaf5abeea625aa260">https://mp.weixin.qq.com/s?__biz=MzAxNDEwNjk5OQ==&amp;mid=2650517536&amp;idx=1&amp;sn=926ba6f2c0fcc01aaf5abeea625aa260</a></li></ul></li></ol><p>备份仓库：<a href="https://github.com/BaseOrange/solution-record">https://github.com/BaseOrange/solution-record</a></p>]]></content:encoded>
      
      
      
      <category domain="https://log.660066.xyz/tags/%E5%BC%80%E5%8F%91%E7%BA%AA%E5%AE%9E/">开发纪实</category>
      
      
      <comments>https://log.660066.xyz/2025/04/23/solution-record/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>文档段落保留功能实现分析：基于层级与权限的标题保留策略</title>
      <link>https://log.660066.xyz/2025/04/09/analysis-of-document-para-reservation-impl/</link>
      <guid>https://log.660066.xyz/2025/04/09/analysis-of-document-para-reservation-impl/</guid>
      <pubDate>Wed, 09 Apr 2025 06:32:28 GMT</pubDate>
      
      <description>文档段落保留功能实现分析：基于层级与权限的标题保留策略</description>
      
      
      
      <content:encoded><![CDATA[<h2 id="一、问题背景"><a href="#一、问题背景" class="headerlink" title="一、问题背景"></a>一、问题背景</h2><p>在文档处理场景中，用户踢出需求，需要根据以下规则隐藏或保留段落：</p><ol><li><strong>标题保留条件</strong>：仅当标题的子段落中存在<strong>有权限的填报项</strong>时，该标题才被保留。</li><li>段落类型区分<ul><li><strong>正文&#x2F;表格</strong>：根据权限决定是否保留。</li><li><strong>标题</strong>：需结合子段落的保留状态判断是否保留。</li></ul></li><li><strong>层级嵌套复杂性</strong>：标题的层级（如一级标题、二级标题）需通过段落层级信息（<code>OutLevel</code>）动态计算其子段落范围。</li></ol><h3 id="存在的典型问题"><a href="#存在的典型问题" class="headerlink" title="存在的典型问题"></a>存在的典型问题</h3><ul><li><strong>标题范围计算错误</strong>：未正确记录标题的结束位置，导致误判子段落范围。</li><li><strong>保留条件不精准</strong>：未区分“有权限填报项”与其他保留类型（如正文），导致标题被错误保留。</li></ul><hr><h2 id="二、解决思路"><a href="#二、解决思路" class="headerlink" title="二、解决思路"></a>二、解决思路</h2><h3 id="1-分阶段处理逻辑"><a href="#1-分阶段处理逻辑" class="headerlink" title="1. 分阶段处理逻辑"></a>1. 分阶段处理逻辑</h3><p>将问题拆解为三个阶段，逐步解决：</p><ol><li><strong>基础保留标记</strong>：标记每个段落的保留状态（<code>retained</code>数组）。</li><li><strong>标题范围与保留判断</strong>：通过层级嵌套关系确定标题的子段落范围，并判断是否保留。</li><li><strong>结果生成</strong>：根据保留标记生成最终的删除&#x2F;保留指令。</li></ol><h3 id="2-关键逻辑设计"><a href="#2-关键逻辑设计" class="headerlink" title="2. 关键逻辑设计"></a>2. 关键逻辑设计</h3><h4 id="1-标题范围计算"><a href="#1-标题范围计算" class="headerlink" title="(1) 标题范围计算"></a>(1) 标题范围计算</h4><ul><li><strong>使用栈结构</strong>：通过栈记录当前层级的标题，动态维护标题的嵌套关系。</li><li><strong>层级比较</strong>：当遇到新标题时，若其层级≤栈顶标题层级，则弹出栈顶标题并记录其结束位置。</li><li><strong>结束位置处理</strong>：遍历结束后，栈中剩余标题的结束位置设为文档末尾。</li></ul><h4 id="2-保留条件细化"><a href="#2-保留条件细化" class="headerlink" title="(2) 保留条件细化"></a>(2) 保留条件细化</h4><ul><li>段落保留规则<ul><li><strong>正文&#x2F;表格</strong>：仅保留有权限的填报项。</li><li><strong>标题</strong>：仅保留子段落中存在有权限填报项的标题。</li></ul></li><li><strong>权限判断</strong>：通过<code>FillInfo</code>对象获取段落的填报项权限信息。</li></ul><h4 id="3-标题保留判断"><a href="#3-标题保留判断" class="headerlink" title="(3) 标题保留判断"></a>(3) 标题保留判断</h4><ul><li><strong>遍历子段落</strong>：对每个标题的子段落范围（<code>start</code>到<code>end</code>），检查是否存在有权限的填报项。</li><li><strong>标记保留状态</strong>：若满足条件，将标题的<code>titleShouldKeep</code>标记为<code>true</code>。</li></ul><hr><h2 id="三、关键代码解析"><a href="#三、关键代码解析" class="headerlink" title="三、关键代码解析"></a>三、关键代码解析</h2><h3 id="1-基础保留标记（retained数组）"><a href="#1-基础保留标记（retained数组）" class="headerlink" title="1. 基础保留标记（retained数组）"></a>1. 基础保留标记（<code>retained</code>数组）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 标记每个段落的保留状态</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">    <span class="type">Para</span> <span class="variable">p</span> <span class="operator">=</span> paras.get(i);</span><br><span class="line">    <span class="type">int</span> <span class="variable">paraOutLevel</span> <span class="operator">=</span> XxxUtil.getParaOutLevel(p, styles);</span><br><span class="line">    <span class="type">FillInfo</span> <span class="variable">fillItemPermission</span> <span class="operator">=</span> getFillItemPermission(fillItemList, p.getPos());</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">hasPermission</span> <span class="operator">=</span> fillItemPermission.isHasPermission();</span><br><span class="line">    <span class="type">FillItem</span> <span class="variable">fillItem</span> <span class="operator">=</span> fillItemPermission.getFillItem();</span><br><span class="line">    <span class="keyword">if</span> (!hasPermission &amp;&amp; fillItem != <span class="literal">null</span>) &#123;</span><br><span class="line">        retained[i] = <span class="literal">false</span>; <span class="comment">// 无权限的填报项不保留</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (paraOutLevel == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// 正文或填报项：仅保留有权限的</span></span><br><span class="line">        retained[i] = hasPermission;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 标题或表格：根据层级是否需要保留</span></span><br><span class="line">        <span class="keyword">if</span> (levelsToKeep.contains(paraOutLevel)) &#123;</span><br><span class="line">            retained[i] = <span class="literal">true</span>; <span class="comment">// 标题先标记为保留，后续根据子段落修正</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>关键点</strong>：</p><ul><li><strong>权限优先</strong>：无权限的填报项直接标记为不保留。</li><li><strong>层级过滤</strong>：仅保留需要显示的层级（如<code>levelsToKeep</code>中的层级）。</li></ul><hr><h3 id="2-标题范围计算（栈结构）"><a href="#2-标题范围计算（栈结构）" class="headerlink" title="2. 标题范围计算（栈结构）"></a>2. 标题范围计算（栈结构）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 确定标题的子段落范围</span></span><br><span class="line">List&lt;Range&gt; titleRanges = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Stack&lt;Range&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">    <span class="type">Para</span> <span class="variable">p</span> <span class="operator">=</span> allPapx.get(i);</span><br><span class="line">    <span class="type">int</span> <span class="variable">paraOutLevel</span> <span class="operator">=</span> DocDataUtil.getParaOutLevel(p, styles);</span><br><span class="line">    <span class="keyword">if</span> (paraOutLevel &gt; <span class="number">0</span> &amp;&amp; levelsToKeep.contains(paraOutLevel)) &#123;</span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty() &amp;&amp; paraOutLevel &lt;= stack.peek().getLevel()) &#123;</span><br><span class="line">            <span class="type">Range</span> <span class="variable">popped</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">            popped.setEnd(i - <span class="number">1</span>); <span class="comment">// 当前段落的前一个位置为结束</span></span><br><span class="line">            titleRanges.add(popped);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Range</span> <span class="variable">newRange</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Range</span>();</span><br><span class="line">        newRange.setStart(i);</span><br><span class="line">        newRange.setLevel(paraOutLevel);</span><br><span class="line">        stack.push(newRange);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 处理栈中剩余标题</span></span><br><span class="line"><span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">    <span class="type">Range</span> <span class="variable">r</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">    r.setEnd(size - <span class="number">1</span>); <span class="comment">// 结束位置为文档末尾</span></span><br><span class="line">    titleRanges.add(r);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>关键点</strong>：</p><ul><li><strong>栈的层级判断</strong>：通过层级比较确保标题范围的正确嵌套。</li><li><strong>结束位置修正</strong>：遍历结束后，确保所有标题范围到文档末尾。</li></ul><hr><h3 id="3-标题保留判断-1"><a href="#3-标题保留判断-1" class="headerlink" title="3. 标题保留判断"></a>3. 标题保留判断</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判断标题是否保留</span></span><br><span class="line"><span class="keyword">for</span> (Range r : titleRanges) &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">hasPermissionFilledForm</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> r.getStart() + <span class="number">1</span>; j &lt;= r.getEnd(); j++) &#123;</span><br><span class="line">        <span class="type">FillInfo</span> <span class="variable">fillItemPermission</span> <span class="operator">=</span> getFillItemPermission(fillItemList, allPapx.get(j).getPos());</span><br><span class="line">        <span class="keyword">if</span> (retained[j] &amp;&amp; fillItemPermission.isHasPermission()) &#123;</span><br><span class="line">            hasPermissionFilledForm = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (hasPermissionFilledForm) &#123;</span><br><span class="line">        titleShouldKeep[r.getStart()] = <span class="literal">true</span>; <span class="comment">// 标记标题保留</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>关键点</strong>：</p><ul><li><strong>子段落遍历</strong>：检查标题的子段落（<code>start+1</code>到<code>end</code>）中是否存在有权限的填报项。</li><li><strong>权限双重验证</strong>：仅当<code>retained[j]</code>为<code>true</code>（被基础保留）且<code>hasPermission</code>为<code>true</code>（有权限）时，才视为有效。</li></ul><hr><h3 id="4-结果生成"><a href="#4-结果生成" class="headerlink" title="4. 结果生成"></a>4. 结果生成</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 生成最终的删除/保留指令</span></span><br><span class="line">List&lt;ResultItem&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (i &lt; size) &#123;</span><br><span class="line">    <span class="type">Para</span> <span class="variable">p</span> <span class="operator">=</span> paras.get(i);</span><br><span class="line">    <span class="type">int</span> <span class="variable">paraOutLevel</span> <span class="operator">=</span> XxxUtil.getParaOutLevel(p, styles);</span><br><span class="line">    <span class="keyword">if</span> (paraOutLevel &gt; <span class="number">0</span> &amp;&amp; levelsToKeep.contains(paraOutLevel)) &#123;</span><br><span class="line">        <span class="comment">// 标题的保留状态由titleShouldKeep决定</span></span><br><span class="line">        retained[i] = titleShouldKeep[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 处理表格或普通段落</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="comment">/* 是表格 */</span>) &#123;</span><br><span class="line">        <span class="comment">// 删除表格并跳过所有表格段落</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!retained[i]) &#123;</span><br><span class="line">            <span class="comment">// 记录删除指令</span></span><br><span class="line">            result.add(<span class="keyword">new</span> <span class="title class_">ResultItem</span>(p.getPos(), p.getLen(), <span class="number">0</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>关键点</strong>：</p><ul><li><strong>标题保留状态更新</strong>：根据<code>titleShouldKeep</code>覆盖标题的<code>retained</code>标记。</li><li><strong>统一处理</strong>：通过<code>retained</code>数组统一判断段落的保留或删除。</li></ul><hr><h2 id="四、验证与测试"><a href="#四、验证与测试" class="headerlink" title="四、验证与测试"></a>四、验证与测试</h2><h3 id="1-测试案例"><a href="#1-测试案例" class="headerlink" title="1. 测试案例"></a>1. 测试案例</h3><p>以用户提供的案例为例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">段落索引 | 内容              | 层级 | 是否保留</span><br><span class="line">-----------------------------------------------</span><br><span class="line">0       | 一级1            | 1    | false（无子段落有权限填报项）</span><br><span class="line">1       | 二级1            | 2    | false</span><br><span class="line">...     | ... | ...  | ...</span><br><span class="line">18      | 一级2            | 1    | true（子段落包含有权限填报项）</span><br><span class="line">21      | 二级10           | 2    | true（子段落包含有权限填报项）</span><br><span class="line">25      | 有权限填报项      | 0    | true</span><br></pre></td></tr></table></figure><p><strong>验证逻辑</strong>：</p><ul><li><strong>一级2的保留</strong>：子段落（索引19-25）包含索引25的有权限填报项 → 保留。</li><li><strong>二级10的保留</strong>：子段落包含索引25的有权限填报项 → 保留。</li><li><strong>一级1的不保留</strong>：子段落中无有权限的填报项 → 不保留。</li></ul><h3 id="2-边界条件测试"><a href="#2-边界条件测试" class="headerlink" title="2. 边界条件测试"></a>2. 边界条件测试</h3><ul><li><strong>无子段落的标题</strong>：若标题无子段落，不保留。</li><li><strong>层级嵌套交叉</strong>：如<code>一级→二级→三级</code>的复杂结构，确保范围计算正确。</li></ul><hr><h2 id="五、总结与扩展"><a href="#五、总结与扩展" class="headerlink" title="五、总结与扩展"></a>五、总结与扩展</h2><h3 id="1-解决方案优势"><a href="#1-解决方案优势" class="headerlink" title="1. 解决方案优势"></a>1. 解决方案优势</h3><ul><li><strong>精准控制</strong>：通过层级栈和权限双重判断，确保标题保留的条件严格符合需求。</li><li><strong>可扩展性</strong>：通过<code>levelsToKeep</code>和权限接口，可灵活适配不同业务场景。</li></ul><h3 id="2-可优化方向"><a href="#2-可优化方向" class="headerlink" title="2. 可优化方向"></a>2. 可优化方向</h3><ul><li><strong>性能优化</strong>：对大规模文档，可优化子段落遍历逻辑（如预处理子段落列表）。</li><li><strong>异常处理</strong>：增加对层级不合法或权限信息缺失的容错机制。</li></ul>]]></content:encoded>
      
      
      
      <category domain="https://log.660066.xyz/tags/%E5%BC%80%E5%8F%91%E7%BA%AA%E5%AE%9E/">开发纪实</category>
      
      
      <comments>https://log.660066.xyz/2025/04/09/analysis-of-document-para-reservation-impl/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>OpenWRT部署及其使用</title>
      <link>https://log.660066.xyz/2025/03/26/openwrt-and-openclash/</link>
      <guid>https://log.660066.xyz/2025/03/26/openwrt-and-openclash/</guid>
      <pubDate>Wed, 26 Mar 2025 01:05:28 GMT</pubDate>
      
      <description>OpenWRT部署及其使用</description>
      
      
      
      <content:encoded><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="2c0df64fa31f78dc6a957f592fa8ff3fc89e374041f0a4978d39868f0baa7a72">c1b73eab8127d6e5450ef89a5c6005a87b4c19dcdc084411a258c01a3844a435d9eb1efdfcf26a2b6a80dabc85598971da32d1a0d2f755c40201c17884cf31304a73cf91482537de7a18a8954136af94852ee8e0ce5f7fe31b4aa4259088c6742c886a78e1ee3f28823d8e9bd38c11ed9b8e77a293b5c917c5f8c04fef31beb788741bbbd70b4380f33a7ff4c1deae84a6980d727c5167d861eba308fcf2666aac75fdc69a20e18586a72993cdc09dfab04ea73bfeb771cca2f754912791b803dc341e9b16c710526e4449ed3a9f4f31934dfcd72bb50d400fc47953a79ea6ad40fd48c63394c19dd00cd4dee9f4433b31f1103b658822371aab938a2cf52383e4074d37712bf059d523966f1fc437645907304073cbe2ee0ce017617d5d09590a7677b11758857782115410eb77921c3b5223ea5d366bb4fac0b7affecc52df88a81d39bbea07e24cda3a7e80fc782e22cf053b8c18a454a998b0ddcde3de1180c19d115f8ea7837d1f7600413c1f13c1c4de43bdc7f93e98700d649f7a42d82c749f7b06434f9186e2326c9c589e5e3f3a3a3473480fee00b53dbe5790e2ea0564c7eafd1e0ece67aab25a2cc4c3707c46b629e38f4f4bc8ef39c190017dba8d1f8681f2c526dcf99c8b235e39407d5b9c8ddc79b119de0ec023cfd706343f42fc63316f3b32bb6e6d27ec55d48991913f7876f944a88196832cc0c6c9beb9a01a226362c0e203356ceced8d1b57f3a7e896b17cca68c9017929bdebdeb3d3dba6a378585afceedecb8262012c098eef66a18dab0cb33e33648dfa5ec0d4282084bbba21a94a11806d84eb04bb714a0d1dd7f4d229160020f24774e193e164aee2994bb4656c52c7d135e62e67aeee2738b86bf45b2fc07b1d9ff0e02a3c7ea690960956bafe859172dc5b1ce33a5114ac7db09c1c452120c5eeba0cc9aa0a97dbb2a01c9d1887089ba65a2de9b8338783094914596d5b3ad81ab0eaa65fac8340d548ae60148d6984051187856e53ede49f846dcb6f1ce17b2d7a864d102da3692be4c9dccbfe858bcad8dce42bdd4edbb5b60edc99c7480f96c957bca1dfc3c1c73cd12d29e22a95a81fc8f2e44c5567e078abfd63bfefe22e9bdb5b7e7be08a211c5487f04718dd19a9f1315eab0cd36e5ba562bac3071f39d6ea3971d5c1ed467084ddf70656cd5b68aaffe06a6d868dadd6b435c68b0db4816f172c544e3e1ec89c06eb6e9b889c439d0ffbeeec3c2f30563cb80f41e2019d3ee3a5a721759b365d09273e79c5764de5a8de3b0e33bc2d8d7814eea6209f1e34d2fc97694e7091c04dda9c8ca209199b46ec8cb9a0c418664d7dd06d3943fabb04486361bbaabc7994635fda7b3dfbab50ed2d2c51b4c2a10bd3aac813a45035f3a102c5b142be34f1fd8445aa93537f592ac802148c3e2649ed174a34016fa43b10098f237a6d52ff31b55502a8e2d9e5106fc21aa4b256c14d03d9ea0ed14f37e8052aaf595b6957618ce63fe7eff31f3f5e620f53a19427a23f956a9e30497851a8843c4fce5d52bc98d6d2f3f84d09e1598251afe886d5aaa169066359da1c3dccb74a32cf1fe10e8424168195eddae8cd3bd191b442881b6c6871d8904eac061df45044c40ed1599af30b1bdf565d31ae5a8ddc76c313690a3f7171ec2fa75bd56b35bd2b84f8b8c1924bfa2c916f6fa7a1062fdfc295a8dcead9c43e0dd0f4a59366eae85d003c925685161e090e5d8418310407dbcc099ec4fc7ea7e8cf8dac715bc4f936274d1001f6069085e6bfded52da1ac735422cd0c458f1f444a79b6db13c4715954316249e2453aaa7c4599f03b90dd77da2823e6926fb9fef0d3418f11f6fc4fe255de618d2d5184e48afddfbc851715c2be97cea00dbaf5fce1d7c741fcda6ee60da03fc4daa4ff2aa801d4cc864911b50ea18f3f73e9258305d6ebbce128ad0654e47acd236136445edae4372b7ad533685e37d1462bacc5970bb41185eebe87170b741edd065771e1821c6b99fad0cf60e52d4f226dfb72860c63f040132e89880afe6cd21be0fe229708eab7f7a21d1f911aa56edefb7abf78438c3b0e36139ef1cdbe513f5cd6aaae1d05872a326db1581d1ceddc6d3be1a05aa7fa189123eb8e831c0f3c84cc62dac3fc0394fbc25c9aa1034bdff0261b86b89f95a33a084375364fa9fbc7bf1482772b14dcf22234013476a2fd0738d12c9ed92ee5eee9760025a750e4aa5633fb32da0a2eb3562b8f83936e0e743c1b4df54dda53a2bf312039dec9b8a07c26ef82cc799ddabc50ec3dc227697fe2b40e1215253a6582415157419d797254e69069deb0fc6ce86a2e5323d3528cdc40528b7b4fea4b87681eb19d652298c11ad8942ccb7d436cadaae88cec5b421c040e009cbecebc78dfb693e1cb5ccbb5ffa37c358c17f2691edd667a1f6833fc1e0e609f0f7adb60a58c3fc6a3dce291c6e4fd4c523d4be0253bf28273c8bd643823ed0435b7211d9a73fb45cb3f5824c33ce095522839abef95a247c18d11d5c54de27d24e943d5c1245c7266440da50592ad00a692c69a3795f6aaf7e2f2f1f3bb1845231e44058bc00a8e0309cb18971dcdf7c04bc91504a0e9b8bd3a0048fa0b7c084ce270214565d86f621623b94c08e248ef5bdc0d67a835d2b1b6274b2fb6937e331847d168a4ff5d52844f691ffa404dae068931aecb6ecb3e37e692a9e63978551d55aad2bac1b05e0c9f51d32720d5a587add0f1f0803813567cf276d8686ff991a19450991b02a70a545ed50a13f84e15bc737815c024d02c0da5e95e8623d197029377548ae13723493869cd2f4b8bce918572a73f470a9d0634aeca18a143767f49652e08940796751f59985905366c269378043ef8f6e36dd80637b694d31a99d1b1ddcf836290812431bf867e45e9b4d55dbf1fcaff581401f296754db64ecb2699eb964baf7770ad009e2ac0fec6752cc23456073814cc3ad012ea8ddb591bdeff646cddc81359d2ec047b1cea5fdbe3456870b53f8ad5ba716710e8134d9c1fe89fe4a49a4cad5d87024bae38a80e8388649d5b3f8c148f9c02ab92c71f29202207e06fcc57fd6d448391391c1bc1f727b66f87bc2ea2a2dc7208f5c9a9c9192c943271ca9620c5f4fba2b9cae608494868daed949f00d2b5ca7e73d8c0b9fd39ada24c64dc0898b4b2fa7774447fbebe36bf2441fd88cdbea14f2f60e70c3628d5368e1364acc1a320794f8ef87e319ff8a490552d2e10dfc9ee24edbf004b91163a26f4f07efb1419b9bdf718c0212ceb2de54a6040df6450c05bad9545832ddc18a87b0ccc7af53bfd59abb3eed2db214a0236399faf63db6a7d0768b2d0940b92fa2b72ea9bbaaec7afdacb357588ddba84e68ca7ab5b91401bf95af22412c456b2908b5e742dcc4a9f4cfdcd2e5e6e5bb2abe742ad3a14814b46a502608420582febfd4ed03131addb0abc22c36ac1476dc7f09caf8b4171f2a5fb0ce177c0930077d90b8933be6c3e8ff4e8943c19be49dde140133378136fc221e93bff40bc840d45b7464cc474547e3c437d34bae10757ab02e852b31c0e0b4ab1e5cd456e55d8770a6d6940ed95d68520e9eebfb0d544f4c13e2ef54e3f3319cdf487319db350b81e504fb2140e2badb3365850a59f21146a506446473ce608dff7faa0ad8bc023f4ba0f8054dffbb1283a070da8778bd1850aae53bffc648b70dd4f6cc1b2a6fe099f04bb2b6f5762fcf16200fcc810aeb7fa231427b1bcab6bc6018f8e96eac2e71f4c926eaa216370e710043a242809446184fb09434b3f58ee1bd58fc3a312e14bfd4c6741d0bcbece48653ae464a976a1836edba44f379c9ac2bffc0cbeead06209b379a5a2b79f48098098dff23cb3b7a3d0b825cf8e785962465a7441b81aa7ae117f7133ef2bd97b9faa24a115b9b481a4fb7a3c1441f0b6e587dc6390d6f75b80ef5f50bf9d41429fd152dabfe94fa132a53405c8b1c2f0e8657d01e912b0dd2504aeb55126d893dbf25fe18ab945a14055735ab6570b5827ceee6135f262bb68c959fc8d0db85a869fab5315966cd883cba70f924d93d767865a2eee45e7e3146c1d13bbf10f2f80a497577978c929bcf33d2dbec571b8c9b803f9d94463bf6e1ba33b716b4311747909fb577cdbbe474d780cc4bd42965ec54d3bdf1c9f742eeb000e0f81afb36ef980233d435da7dfbd3d32c326fe47860f3761bc7bbe88ec3d8f72bb4069aa968f3522900f593d142aece89335f61e5785dd9e894f7f71cf18ca465ade07297cf48757c0027bd0a22ac2290990cd5c425a396778745609e4d78bebaa7ec17ce9b6826ca4d661d8112daa8b94e6f757d83eca87d6217395c5a4588c66b241fb4df88d94fc05123743a39d005da59d288ee41f06ede4cecf881961f93a64f1139549c9bcaff1f27b70a218db67a525f507e6676eed4e8508bf6d98993e7822b5188d3945ed4c1e45f47e594980ef20e3d97b323bbc6765d0b129404d9bf8ab803c2b328a176aad5ce86a490e429dcde4eab3028bae4f5f44bfa32ae61fd2ca7165a070139719a365a7a1359946df79e258205c4f9ac10ddd8c6e9cc324a262e55948064ddf95b02e296d90b0f73992eca06bb4c8290c4d7e0b9db6a3449687cabe3f04d6e4be92de787b8942d712fa8e851e4266303443dcae6b192607bee15b96c985917e4c0d80f776c501e75a377894e59e2d8e0b2fb9f887176f17b2e906c77a8964390887bba178fb01270380140c49c4697e9cb425e86a1eccc02a9a2795da9a47cbc3cb83e31445b08fcf6b6b3c565656ee3426a6b72a721149149a4abfe3b4953c967bbe63848da0efbcc8fa43510fe47127e3460152c16a00f6d987c1fa7fecbda277ba3b4f4a71adbd44b680c098ecb371d69c24bee1f95ec516617d53b5c5e48a9fddee79a41aef558499ea9620a5320aa8a975150b17b5c88a1034bf300f1f27274d1220031432b56eb18e4f6c571af81324602eb85de4c0863b3e3e3b61b22d8c0a66d0a4e3a6fbd4ca4319c671860ad612d34512c082d6c1c7c9b122d2809713bfe68f9587feaaab81c9a7a922e4cb79796a88f7771cd2bab47f99b13f5b877f218f6bbcc368e2ebca45cb33c6120ccb405da66555cf40ca755314675bf87d186eb72f95c102e0ca2348637c0af20fe1deadd3aba8adaeb8cb009222e27f256799f4c83e32ffcab3b83b29d0aecd5761eaa8051e8956ffd06e4312ed53b65559386a14e59caab5e3c8bb9d1274d877592bf578361ccbd10844b1b8dfc2d9444482b4e91992a2ad3dd31f46936fbdb89e2a5b1714f95691ea04c1fca3c299eb84d5a9f1af6e1a54249c6c2e055257e292ea852f6a46fa19a5cc35a368713456b492a0b77749d5ac116c0841a07276f08d06e707bd1e00eddda8f3e10d5dd18e333e8d3b959f6c0b97e54c8a554dc9d495848b65cd966a14377c201ea660112d7c66057752617b8781eeacb5235580d0bf0f8fe5b7c1d567a752fd691dae709d2a89e06bb6f28fd35b8d481367556653f334dce25ebc26a5cd96a717d7f0cc4ad1f3a9033dc639d59e22356d37e930d9899546de6ed7911cd5bbd2c0765e173afc4f88c8c92a6faeaa0ff89603af00643c3d96c0a3e38b9a9089efa527850e53e319fe32f024c8a9cd2fb7aeb73999f76ebdf532b23a485a5f66d9f714db4c537b30ac783ba2fb53dae9c26ea1d47429a369c4e5c29fa82e21359db93dd50cb80d9af786e3ac9752ed3e5fee5980d61d43439f6c6fd0c76ba3ba664576989d4af547fe3c7834bd60185f4d50f845ded98c576867b768b2887e9b23a7f5236806716118f8cb1595720a78edb5561ad777ad7ab0b1cd274678afaac93c87341f6cf7d0c980656522f6c80716b13a9023e5d818666756dca46acbf0675baacbe8891f9e0b02542f9e95036fa9f556cfa06e5cb91f3ca312cc3713652bb9ebdd403f5b5b70a91a1e397176f3c5b114d9690e5b5c71ab292f8e48d6468452fc7fb8e0176d754b375c42716ee0b1e9b0925f2a310492bec617a173819e3894d8571113b6ca07c2b21e30249bf88657d64089d6e89bba15a93e8bcd2dc074fbfb0198c36803f8470e4974bc1c20147206c727ac72c9423e7272fb556535067a281d68229228892d037273d080b172de714efe4527a768d917062f4b373fbfa841f691c75b51981d09a5df5ddcd127cbf1b77ac063bf5d212d4b0d5cc107d7d39ea03db38d2df0c8aca1a9174c286ef10332763240f9b063e19c9c506224b168cb8531561a72736b73dcacbaee0a75e0a276a63d0054be0b5e1710ccd050f3b15e4434a6dc3d0ca4ede6ee9e6b538aecfb4fe24274e824653ebcf0b2536fb4a0dfde927270d0f7ab33c1f4b2a9307f800873ec2b88961b9c5c0ef0eeca79c0b22cae4816e9bb4fd04a61ecaa4032926a572ad1958ff11a9200afd3575e5b48c1bef118d36d2a4266a4e0123b45363099b15e14afb28b97fc3a61d177e2790a94e2c7a070d39237bb599805e533a1b934bb1f66ce1050f6f7f0bbc632e1554a441304228341c8272d7e69f7c0da9bb22506c5af9a9970f1131e1a8ff71918b55af5894d9ddb763856c2fc48dd760e2266fe65d433a81c4544a0489cef0ef3cb7caecd179bbacbb69823380d28a0fba62643e3adae6a952c2fd92c189af77f8ff2ecba683eab4e952ebff39149bc13c0e3549110cbc99d855c1b2867cd9fabd75157ae8266f7faa69b5538235e43e721ca4b8a9b1f160127a976726f6d9d9ecb954e3b54043cf262f44e749f86f2dfdc8d72ec5d63ff467657ab501d6f2b2cce3eda18189483e28675b3d1dbaefa5ad59c09457b8a83d5692d67dc972a0c2871148191e6cfeed7fb194082bfe122cdd4b9e4ed2ecc0ff8f5499daed1e3a860fe8f66d472f5760b0dc4b326e9eee19fe35866d3a551e5ef671097f67a93a8819d9b267d5cd9a74700e6da3e13ddd48873b1556f7d1dd6064e4cb8bac9ac87cb3812974f9032c8e2ec9fd9b807c21f1f51d379ca23dfd88caef45eeec2943eb7a5d126f7b0e09de13a059c8b175bcf5dc4ab67dd3795c1cf0d7684df3478e4ad35c6bbdefb63f5eb5e22f428777df349ed40da35a94290ec5337b9482a4013b6d1cbbb82081d6545a985eceff96ea11e61f4a0d6665c1192efa5ae263e8bc96fff72b185b64c5fdd47c4fffc7ce91f49984df8dda179936d85a77c31af3085855ea4892c5069cc11aab298962f5a9d532cf7ce23e72ab8de250ea28bc57fae13f0e246f66fd8cce15de60dce289dea0679ab715100cbd6e4a8b42e55fb5a1167f7bce005729eaf7a57ec6f86849837b9e215294fc01fe383fb371f85c51d8f6ed43f905e87680f2f4d2bddbad7395e6ea540f943c505d65048de285a52f650fc72e1d16e8bf775465bfb76cc1ebdfb795037e8718173a9e6799104be8b52c01aa66dcddd9962e206ca265e59d831bfbc3d92ecd019da41d7905b161f4fa2f86b0e5e746467577558235ca7497004fe595c5a6d11988ae4a2e6515493e2c25c383f2195718c4974de78483b2b6bb0e6042a3ffa2f0f57c7ff0e033e3352fde2437bdf840df70832ca620fd43f591dc08431c06cd7db49b490bb831606334d71a29f3e607bcb9992e4e9a3a52fec80a944c2c2372a330ffc496cc3fafad12a74f9d33571ef1b9d46a231cfd0b54b13450e9f1cf7c618387e5251f2a5710fb3f3401b62fb54242922823e7655a3c7f9688fb4ea17c154952f63978dfb520cf5707694a21f9af22f333d14aa6f8a189747491a38662c76ddafd1274ba01ecd5312e044c553aec432b8051060ee639ecd1a89117e5806eb492c94339055feeec1463afe7104689743f995e93579f4b691ff15c3bf431358f50711fc1d3b47044992ca1964886b3d4d4fa9761ea6a8d865835d0e4b3201c1c8f4a50d4810fca2027090f5253649fd181127e94c9c7b85bc84012033ba10f8447da862f3f216e8269bebed9d57f1e93ba3e3bf14ed4f0734e7a2d0a9d6288d29254518b46b2b52ca73052253f22ae88537412d6c18c259971676f8b44b2eb017fb6ba45ed5865af20da8e32c142dec1e57ed69c79534a0c2800f5e46242f259beff748286ea24ea173c0d871c5f4e2043ce5ffcbc4342e6f9aa8c337d9bdf9bd6982ea068a3cb32f99170884ccb40ff584998a38c58a69721a90ab66587fee7fd67a1c40cc0d1a905be8bd230dc954f7e8e701affccaa0a9aac77a85cf978e2a7eac3213c49a7de8752517e412a2eef4b83da672d37c04e8e3b4367663671924f97321586d1eddc3c4cc65fe091ffa7e003abd77ceeb27038082cc27a6a0189f7f9d14a9af32174cfa5349bb1ade3cb74afd25fa98085657ed794a102284c74f022d4da0a0c2d1c1883e4e6be10a40a50641402fe09f8c3b7604d926842857532e0961688b491a1cdd68327c8fe96a94edcb9e7631ab2f1209005a86a8e55ac56b224330b692af1dd3c3581adf47200d7a6d6f45b3b4706ec26ad7f6ec6291ac01c12964006cd5ad4a96e945c3a172287fe3067c11fd957152485b4f1ecdafc8d4a623a7db3440e5a1c7ad3802d0ccf5b21220</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">您好, 这里需要密码.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content:encoded>
      
      
      
      <category domain="https://log.660066.xyz/tags/%E5%BC%80%E5%8F%91%E7%BA%AA%E5%AE%9E/">开发纪实</category>
      
      
      <comments>https://log.660066.xyz/2025/03/26/openwrt-and-openclash/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>OnlyOffice部署【基于centos】</title>
      <link>https://log.660066.xyz/2025/03/14/onlyoffice-deploy/</link>
      <guid>https://log.660066.xyz/2025/03/14/onlyoffice-deploy/</guid>
      <pubDate>Fri, 14 Mar 2025 11:12:27 GMT</pubDate>
      
      <description>OnlyOffice部署【基于centos】</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="onlyoffice部署【centos】"><a href="#onlyoffice部署【centos】" class="headerlink" title="onlyoffice部署【centos】"></a>onlyoffice部署【centos】</h1><h1 id="一、上传out文件夹"><a href="#一、上传out文件夹" class="headerlink" title="一、上传out文件夹"></a>一、上传out文件夹</h1><p>基于上一篇打包文章，需要将out文件夹上传到CentOS。</p><p>此处不在赘述。</p><h1 id="二、安装rabbitmq及其配置"><a href="#二、安装rabbitmq及其配置" class="headerlink" title="二、安装rabbitmq及其配置"></a>二、安装rabbitmq及其配置</h1><ol><li><p>更新yum（基本操作）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y update</span><br></pre></td></tr></table></figure></li><li><p>安装EPEL存储库</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y install epel-release</span><br><span class="line">yum -y update</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">(无网环境自行下载)https://packagecloud.io/rabbitmq/erlang</span></span><br></pre></td></tr></table></figure></li><li><p>安装Erlang语言</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y install erlang socat </span><br><span class="line"><span class="comment"># 查看是否成功安装</span></span><br><span class="line">erl -version</span><br></pre></td></tr></table></figure></li><li><p>下载并安装RabbitMq（自行选择方式，wget、curl、上传等）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/rabbitmq/rabbitmq-server/releases/download/rabbitmq_v3_6_16/rabbitmq-server-3.6.16-1.el7.noarch.rpm</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装命令</span></span><br><span class="line">rpm -ivh rabbitmq-server-3.6.16-1.el7.noarch.rpm</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动服务</span></span><br><span class="line">systemctl start rabbitmq-server</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看服务状态</span></span><br><span class="line">systemctl status rabbitmq-server</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">停止服务</span></span><br><span class="line">systemctl stop rabbitmq-server</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">开启开机自启</span></span><br><span class="line">systemctl enable rabbitmq-server</span><br></pre></td></tr></table></figure></li><li><p>添加RabbitMq用户（根据自己需要配置，一般生产无需配置）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建账号和密码</span></span><br><span class="line">rabbitmqctl add_user 用户名 密码</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置用户角色：</span></span><br><span class="line">rabbitmqctl set_user_tags 用户名 administrator</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">为用户添加资源权限，添加配置、写、读权限</span></span><br><span class="line">rabbitmqctl set_permissions -p &quot;/&quot; 用户名 &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改用户密码</span></span><br><span class="line">rabbitmqctl change_password 用户名  新密码</span><br></pre></td></tr></table></figure></li></ol><h1 id="三、安装nginx及其配置"><a href="#三、安装nginx及其配置" class="headerlink" title="三、安装nginx及其配置"></a>三、安装nginx及其配置</h1><ol><li><p>更新yum、安装EPEL存储库（Mq安装时一描述，不在赘述）</p></li><li><p>安装nginx</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yum install nginx</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动Nginx服务：</span></span><br><span class="line">systemctl start nginx</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检查Nginx服务状态：</span></span><br><span class="line">systemctl status nginx</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置Nginx开机自启：</span></span><br><span class="line">systemctl enable nginx</span><br></pre></td></tr></table></figure></li><li><p>配置Nginx配置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">切换到配置文件目录</span></span><br><span class="line">cd /etc/nginx/conf.d/</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建配置文件</span></span><br><span class="line">touch nginx.conf</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">编辑(配置信息如下)</span></span><br><span class="line">vim nginx.conf</span><br></pre></td></tr></table></figure><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">map</span> <span class="variable">$http_host</span> <span class="variable">$this_host</span> &#123;</span><br><span class="line">  &quot;&quot; $host;</span><br><span class="line">  <span class="attribute">default</span> <span class="variable">$http_host</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attribute">map</span> <span class="variable">$http_x_forwarded_proto</span> <span class="variable">$the_scheme</span> &#123;</span><br><span class="line">  <span class="attribute">default</span> <span class="variable">$http_x_forwarded_proto</span>;</span><br><span class="line">  &quot;&quot; $scheme;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attribute">map</span> <span class="variable">$http_x_forwarded_host</span> <span class="variable">$the_host</span> &#123;</span><br><span class="line">  <span class="attribute">default</span> <span class="variable">$http_x_forwarded_host</span>;</span><br><span class="line">  &quot;&quot; $this_host;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attribute">map</span> <span class="variable">$http_upgrade</span> <span class="variable">$proxy_connection</span> &#123;</span><br><span class="line">  <span class="attribute">default</span> upgrade;</span><br><span class="line">  &quot;&quot; close;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attribute">proxy_set_header</span> Host <span class="variable">$http_host</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span> Connection <span class="variable">$proxy_connection</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span> X-Forwarded-Host <span class="variable">$the_host</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span> X-Forwarded-Proto <span class="variable">$the_scheme</span>;</span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">0.0.0.0:80</span>;</span><br><span class="line">  <span class="attribute">listen</span> [::]:<span class="number">80</span> default_server;</span><br><span class="line">  <span class="attribute">server_tokens</span> <span class="literal">off</span>;</span><br><span class="line">  <span class="attribute">rewrite</span><span class="regexp"> ^\/OfficeWeb(\/apps\/.*)$</span> /web-apps<span class="variable">$1</span> <span class="literal">redirect</span>;</span><br><span class="line">  <span class="section">location</span> / &#123;</span><br><span class="line">    <span class="attribute">proxy_pass</span> http://localhost:8000;</span><br><span class="line">    <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>重启Nginx</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure></li></ol><h1 id="四、修改项目配置文件"><a href="#四、修改项目配置文件" class="headerlink" title="四、修改项目配置文件"></a>四、修改项目配置文件</h1><p>配置文件路径：.&#x2F;out&#x2F;linux_64&#x2F;onlyoffice&#x2F;documentserver&#x2F;server&#x2F;Common&#x2F;config&#x2F;</p><p><strong>不知道的配置项含义及其作用时，建议不要自己调整。</strong></p><ol><li><p>数据库（因项目需要，将数据库替换为Mysql）</p><ol><li><p>数据库SQL路径：.&#x2F;out&#x2F;linux_64&#x2F;onlyoffice&#x2F;documentserver&#x2F;server&#x2F;schema&#x2F;</p></li><li><p>搜索sql关键字。type根据需要进行调整。dbHost(数据库ip)、dbPort(端口)、dbName(库名)、dbUser(用户名)、dbPass(密码)</p><p><img src="/2025/03/14/onlyoffice-deploy/image-20250314182832093.png" alt="image-20250314182832093"></p></li></ol></li><li><p>Redis</p><ol><li><p>根据自己的需要，调整host、port、password(密码这个属性不一定存在，请自行测试！)</p><p><img src="/2025/03/14/onlyoffice-deploy/image-20250314183248722.png" alt="image-20250314183248722"></p></li></ol></li><li><p>RabbitMq</p><ol><li>使用vim搜索关键词rabbitmq，因为我的rabbitmq与服务在同一主机，所以无需调整。</li></ol><p><img src="/2025/03/14/onlyoffice-deploy/image-20250314182528117.png" alt="image-20250314182528117"></p></li></ol><h1 id="五、启动项目"><a href="#五、启动项目" class="headerlink" title="五、启动项目"></a>五、启动项目</h1><ol><li><p>生成字体数据信息</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cd out/linux_64/onlyoffice/documentserver/</span><br><span class="line">mkdir fonts</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">生成命令</span></span><br><span class="line">LD_LIBRARY_PATH=$&#123;PWD&#125;/server/FileConverter/bin server/tools/allfontsgen \</span><br><span class="line">  --input=&quot;$&#123;PWD&#125;/core-fonts&quot; \</span><br><span class="line">  --allfonts-web=&quot;$&#123;PWD&#125;/sdkjs/common/AllFonts.js&quot; \</span><br><span class="line">  --allfonts=&quot;$&#123;PWD&#125;/server/FileConverter/bin/AllFonts.js&quot; \</span><br><span class="line">  --images=&quot;$&#123;PWD&#125;/sdkjs/common/Images&quot; \</span><br><span class="line">  --selection=&quot;$&#123;PWD&#125;/server/FileConverter/bin/font_selection.bin&quot; \</span><br><span class="line">  --output-web=&#x27;fonts&#x27; \</span><br><span class="line">  --use-system=&quot;true&quot;</span><br></pre></td></tr></table></figure></li><li><p>生成演示主题</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd out/linux_64/onlyoffice/documentserver/</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">生成命令</span></span><br><span class="line">LD_LIBRARY_PATH=$&#123;PWD&#125;/server/FileConverter/bin server/tools/allthemesgen \</span><br><span class="line">  --converter-dir=&quot;$&#123;PWD&#125;/server/FileConverter/bin&quot;\</span><br><span class="line">  --src=&quot;$&#123;PWD&#125;/sdkjs/slide/themes&quot;\</span><br><span class="line">  --output=&quot;$&#123;PWD&#125;/sdkjs/common/Images&quot;</span><br></pre></td></tr></table></figure></li><li><p>启动FileConverter</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd out/linux_64/onlyoffice/documentserver/server/FileConverter</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">环境变量</span></span><br><span class="line">export LD_LIBRARY_PATH=$PWD/bin</span><br><span class="line">export NODE_ENV=development-linux</span><br><span class="line">export NODE_CONFIG_DIR=$PWD/../Common/config ./converter</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">守护执行</span></span><br><span class="line">nohup ./converter &gt; /xxxx/converter.log 2&gt;&amp;1 &amp; </span><br></pre></td></tr></table></figure></li><li><p>启动DocService</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd out/linux_64/onlyoffice/documentserver/server/DocService</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">环境变量</span></span><br><span class="line">export NODE_ENV=development-linux</span><br><span class="line">export NODE_CONFIG_DIR=$PWD/../Common/config</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">守护执行</span></span><br><span class="line">nohup ./docservice &gt; /xxxx/docservice.log 2&gt;&amp;1 &amp; </span><br></pre></td></tr></table></figure></li></ol>]]></content:encoded>
      
      
      
      <category domain="https://log.660066.xyz/tags/onlyoffice/">onlyoffice</category>
      
      
      <comments>https://log.660066.xyz/2025/03/14/onlyoffice-deploy/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>编译OnlyOffice【填坑教程】</title>
      <link>https://log.660066.xyz/2025/03/14/onlyoffice-compile/</link>
      <guid>https://log.660066.xyz/2025/03/14/onlyoffice-compile/</guid>
      <pubDate>Fri, 14 Mar 2025 00:46:17 GMT</pubDate>
      
      <description>编译OnlyOffice【填坑教程】</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="一、编译环境"><a href="#一、编译环境" class="headerlink" title="一、编译环境"></a>一、编译环境</h1><table><thead><tr><th>系统、硬件</th><th></th></tr></thead><tbody><tr><td>物理机</td><td>ThinkPad</td></tr><tr><td>虚拟机</td><td>Vmware（建议硬盘大小40G）</td></tr><tr><td>系统</td><td><strong>Ubuntu Desktop 16.04</strong></td></tr><tr><td><strong>编译依赖软件</strong></td><td></td></tr><tr><td>Git</td><td>apt直接安装的即可</td></tr><tr><td>Python</td><td>Ubuntu Desktop 16.04自带版本即可，应该是2.7</td></tr><tr><td>NodeJs</td><td>应该是16，我看到编译时自动下载了16</td></tr><tr><td>Npm</td><td>apt直接安装的即可</td></tr></tbody></table><h1 id="二、注意事项"><a href="#二、注意事项" class="headerlink" title="二、注意事项"></a>二、注意事项</h1><p>因部分依赖在阿里云镜像中可能不存在，因此镜像源未进行更改，编译全过程使用依赖软件自带镜像源。</p><p><strong>系统版本、架构</strong>一定要按官方要求来，我踩坑路线：</p><ul><li>Ubuntu25（Arm）&#x3D;&gt; 内嵌的python不支持arm架构</li><li>Ubuntu24.04（X64）&#x3D;&gt; 编译V8相关内容是卡住，综合来看，可能是clang或其他打包工具版本过高的原因。</li><li>Ubuntu16.04（X64）&#x3D;&gt; 目前跑过了上面的错误，还不知道有没有其他坑。</li></ul><p>系统的内存、Swap也不能随便搞（可以大，不能小！）：</p><p><img src="/2025/03/14/onlyoffice-compile/image-20250314083925823.png" alt="image-20250314083925823"></p><p>总结一下就是，系统版本得按照上图，CPU、RAM、HDD、SWAP都要安装上图官方的来！</p><p>如果你用的是带Gui的桌面版乌班图，建议吧RAM、SWAP适当的调高一些。</p><h1 id="三、编译"><a href="#三、编译" class="headerlink" title="三、编译"></a>三、编译</h1><h2 id="3-1-克隆编译工具（build-tools）"><a href="#3-1-克隆编译工具（build-tools）" class="headerlink" title="3.1 克隆编译工具（build_tools）"></a>3.1 克隆编译工具（build_tools）</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/ONLYOFFICE/build_tools.git</span><br></pre></td></tr></table></figure><h2 id="3-2-切换到linux编译目录"><a href="#3-2-切换到linux编译目录" class="headerlink" title="3.2 切换到linux编译目录"></a>3.2 切换到linux编译目录</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd build_tools/tools/linux</span><br></pre></td></tr></table></figure><h2 id="3-3-执行编译命令"><a href="#3-3-执行编译命令" class="headerlink" title="3.3 执行编译命令"></a>3.3 执行编译命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./automate.py server</span><br></pre></td></tr></table></figure><h2 id="3-4-编译命令注意事项"><a href="#3-4-编译命令注意事项" class="headerlink" title="3.4 编译命令注意事项"></a>3.4 编译命令注意事项</h2><blockquote><p>如果在没有任何参数的情况下运行脚本，这将构建 <strong>ONLYOFFICE 文档</strong>以及 <strong>Document Builder</strong> 和 <strong>Desktop Editors</strong>。</p><p>如有必要，可以使用与必要产品对应的参数运行脚本，从而一次构建多个产品。</p></blockquote>]]></content:encoded>
      
      
      
      <category domain="https://log.660066.xyz/tags/onlyoffice/">onlyoffice</category>
      
      
      <comments>https://log.660066.xyz/2025/03/14/onlyoffice-compile/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>2024年终总结</title>
      <link>https://log.660066.xyz/2025/01/06/2024-summary/</link>
      <guid>https://log.660066.xyz/2025/01/06/2024-summary/</guid>
      <pubDate>Mon, 06 Jan 2025 06:42:16 GMT</pubDate>
      
      <description>2024年终总结</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="2024年总结"><a href="#2024年总结" class="headerlink" title="2024年总结"></a>2024年总结</h1><h2 id="工作："><a href="#工作：" class="headerlink" title="工作："></a>工作：</h2><ol><li>公司项目顺利的稳步开发中</li><li>沟通上，有了进步，不像一年前刚入职时候语无伦次的样子了。管理上老样子，插不进手，毕竟刚毕业，也没资格插手哈哈哈哈哈。</li><li>年内换了两次工位，从公共办公区进了会议室集中开发， 又从会议室搬到了经理室门口，”经理警卫排”。</li><li>木涨薪、木涨薪、木涨薪。就这就业环境及其恶劣的情况下，还好没辞退我，谢天谢地了也是。</li></ol><h2 id="生活："><a href="#生活：" class="headerlink" title="生活："></a>生活：</h2><ol><li>24年总共去了三个地方。苏州-&gt;上海-&gt;南京</li><li>找到了女朋友</li><li>搬了新住处，在此提醒，济南的各位朋友，济南租房找中介、二房东的，95%你是拿不回押金的。（泊寓、冠寓等大概能拿回来，但是每年都涨租）</li></ol><h2 id="学习："><a href="#学习：" class="headerlink" title="学习："></a>学习：</h2><ol><li>了解了一下React相关的知识，但是完全去开发还是比较困难</li><li>LLM了解的比较多，相关的专业概念、术语也有所了解。</li><li>软考划水的一年，很显然，过不了哈哈哈哈哈</li></ol><h2 id="资产："><a href="#资产：" class="headerlink" title="资产："></a>资产：</h2><ol><li>资产上比较走运。买了债基，小赚一笔。</li><li>在低点买了沪指基金，也小赚了一点。</li><li>黄金也多少赚了一点点，很少，也就买杯奶茶的钱。</li><li>真是凑巧。24年，债牛、股牛都让我赶上了，虽然没赚到大钱，但是多少赚了点饭钱。</li><li>开了证券账户，买了一手股票，开始积累股票交易经验。（妥妥投机分子我）</li><li>年底置办了Mac mini m4的丐版。构建出了手机、手表、电脑的苹果生态。</li></ol><h1 id="2025年展望"><a href="#2025年展望" class="headerlink" title="2025年展望"></a>2025年展望</h1><h2 id="工作：-1"><a href="#工作：-1" class="headerlink" title="工作："></a>工作：</h2><ol><li>一步一个脚印，稳扎稳打，保证别出现重大生产事故。</li><li>进一步提升沟通、管理能力。加强自己对系统架构的设计能力。</li><li>尽量避免摸鱼被经理抓包。</li></ol><h2 id="生活：-1"><a href="#生活：-1" class="headerlink" title="生活："></a>生活：</h2><ol><li>初步打算是五一去香港旅游，目前港澳通行证已经在审批了。</li><li>多出去转转、玩玩。</li><li>拔牙，公司给买的商业医疗补充险，把两个智齿拔了。</li></ol><h2 id="学习：-1"><a href="#学习：-1" class="headerlink" title="学习："></a>学习：</h2><ol><li>React还是要看啊，完成“全干”工程师的基本技能</li><li>拿到软考中级证书，多看题多刷题。</li><li>继续深耕LLM相关领域，重点是OCR识别、应用开发、微调相关方面。</li><li>打算拿一下A类业余无线电执照</li></ol><h2 id="资产：-1"><a href="#资产：-1" class="headerlink" title="资产："></a>资产：</h2><ol><li>也是稳扎稳打吧，以稳健投资为主体。</li><li>多元化布局投资，布局少量的激进投资产品。</li><li>学习一下金融投资相关的知识，少踩坑，多赚钱。</li></ol><h1 id="后话"><a href="#后话" class="headerlink" title="后话"></a>后话</h1><p>其实本来有个2023年总结来着，2024年写着写着就写到年中了，实在是太忙，索性不总结了。</p>]]></content:encoded>
      
      
      
      <category domain="https://log.660066.xyz/tags/%E7%94%9F%E6%B4%BB/">生活</category>
      
      
      <comments>https://log.660066.xyz/2025/01/06/2024-summary/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>MacOS的系统环境变量</title>
      <link>https://log.660066.xyz/2024/11/22/mac-env-var/</link>
      <guid>https://log.660066.xyz/2024/11/22/mac-env-var/</guid>
      <pubDate>Fri, 22 Nov 2024 03:36:27 GMT</pubDate>
      
      <description>MacOS的系统环境变量</description>
      
      
      
      <content:encoded><![CDATA[<p>在macOS中，配置环境变量可以通过多个文件来完成，这些文件根据不同的场景和需求有所不同。以下是一些常用的文件及其用途：</p><h1 id="etc-paths"><a href="#etc-paths" class="headerlink" title="&#x2F;etc&#x2F;paths"></a><strong>&#x2F;etc&#x2F;paths</strong></h1><ul><li>作用：定义系统的路径列表，即命令搜索路径。</li><li>适用范围：全局，影响所有用户。</li><li>使用方法：直接编辑此文件，添加或修改路径条目。</li></ul><h1 id="etc-paths-d"><a href="#etc-paths-d" class="headerlink" title="&#x2F;etc&#x2F;paths.d&#x2F;"></a><strong>&#x2F;etc&#x2F;paths.d&#x2F;</strong></h1><ul><li>作用：这是一个目录，可以在这个目录下创建多个文件，每个文件可以包含一个或多个路径条目，这些路径将被添加到PATH环境变量中。</li><li>适用范围：全局，影响所有用户。</li><li>使用方法：在<code>/etc/paths.d/</code>目录下创建文件，每行一个路径条目。</li></ul><h1 id="etc-profile"><a href="#etc-profile" class="headerlink" title="&#x2F;etc&#x2F;profile"></a><strong>&#x2F;etc&#x2F;profile</strong></h1><ul><li>作用：系统级的配置文件，当用户登录时，它会被读取以设置环境变量。</li><li>适用范围：全局，影响所有用户。</li><li>使用方法：编辑此文件，添加或修改环境变量设置。</li></ul><h1 id="bash-profile"><a href="#bash-profile" class="headerlink" title="~&#x2F;.bash_profile"></a><strong>~&#x2F;.bash_profile</strong></h1><ul><li>作用：用户级的配置文件，当用户登录时，它会被读取以设置环境变量和启动命令。</li><li>适用范围：仅影响当前用户。</li><li>使用方法：编辑此文件，添加或修改环境变量设置。</li></ul><h1 id="bashrc"><a href="#bashrc" class="headerlink" title="~&#x2F;.bashrc"></a><strong>~&#x2F;.bashrc</strong></h1><ul><li>作用：用户级的配置文件，当用户打开一个新的终端窗口（非登录shell）时，它会被读取。</li><li>适用范围：仅影响当前用户。</li><li>使用方法：编辑此文件，添加或修改环境变量设置。</li></ul><h1 id="zshrc"><a href="#zshrc" class="headerlink" title="~&#x2F;.zshrc"></a><strong>~&#x2F;.zshrc</strong></h1><ul><li>作用：如果你使用的是Zsh作为默认shell，这个文件会在每次打开新的终端窗口时被读取。</li><li>适用范围：仅影响当前用户。</li><li>使用方法：编辑此文件，添加或修改环境变量设置。</li></ul><h1 id="profile"><a href="#profile" class="headerlink" title="~&#x2F;.profile"></a><strong>~&#x2F;.profile</strong></h1><ul><li>作用：用户级的配置文件，如果<code>~/.bash_profile</code>不存在，Bash会尝试读取这个文件。</li><li>适用范围：仅影响当前用户。</li><li>使用方法：编辑此文件，添加或修改环境变量设置。</li></ul><h1 id="etc-launchd-conf"><a href="#etc-launchd-conf" class="headerlink" title="&#x2F;etc&#x2F;launchd.conf"></a><strong>&#x2F;etc&#x2F;launchd.conf</strong></h1><ul><li>作用：系统级的配置文件，用于设置环境变量，这些变量在系统启动时生效。</li><li>适用范围：全局，影响所有用户。</li><li>使用方法：编辑此文件，添加或修改环境变量设置。注意：在macOS Catalina及更高版本中，<code>/etc/launchd.conf</code>可能不再被支持，建议使用<code>launchctl</code>命令来设置环境变量。</li></ul><h1 id="launchctl"><a href="#launchctl" class="headerlink" title="launchctl"></a><strong>launchctl</strong></h1><ul><li><p>作用：命令行工具，用于设置系统级或用户级的环境变量。</p></li><li><p>适用范围：全局或用户级。</p></li><li><p>使用方法：</p><ul><li><p>设置系统级环境变量：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo launchctl setenv VARIABLE_NAME value</span><br></pre></td></tr></table></figure></li><li><p>设置用户级环境变量：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">launchctl setenv VARIABLE_NAME value</span><br></pre></td></tr></table></figure></li></ul></li></ul><h1 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h1><p>假设你想为当前用户设置一个环境变量<code>MY_VARIABLE</code>，可以编辑<code>~/.bash_profile</code>文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano ~/.bash_profile</span><br></pre></td></tr></table></figure><p>添加以下内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export MY_VARIABLE=value</span><br></pre></td></tr></table></figure><p>保存并退出编辑器，然后使更改生效：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.bash_profile</span><br></pre></td></tr></table></figure><p>这样，每次你登录或打开一个新的终端窗口时，<code>MY_VARIABLE</code>就会被设置。</p>]]></content:encoded>
      
      
      
      <category domain="https://log.660066.xyz/tags/MacOS/">MacOS</category>
      
      
      <comments>https://log.660066.xyz/2024/11/22/mac-env-var/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Google提示词指南101【翻译】</title>
      <link>https://log.660066.xyz/2024/11/14/google-prompting-guide-101/</link>
      <guid>https://log.660066.xyz/2024/11/14/google-prompting-guide-101/</guid>
      <pubDate>Thu, 14 Nov 2024 01:30:00 GMT</pubDate>
      
      <description>Google官方的prompt提示教程是一本四十多页的书，对入门小白来说比较友好，简单使用翻译软件阅读。</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="一、编写有效的提示"><a href="#一、编写有效的提示" class="headerlink" title="一、编写有效的提示"></a>一、编写有效的提示</h1><p>​Google Workspace 最早就是为让您能够与其他人实时协作而创立的。现在，您还可以使用 Gemini for Google Workspace 与 AI 协作，帮助提高您的工作效率和创造力，而无需牺牲隐私或安全性。嵌入式生成式 AI 功能可以帮助您编写、组织、可视化、加速工作流程、召开更精彩的会议等等，同时使用您最喜爱的应用程序，例如 Gmail、Google Docs、Google Sheets、Google Meet 和 Google Slides。<br>​这本书将为您提供基础技能，让您学会如何在使用Gemini for Workspace时编写有效且具有指导性的提示语，从而提高日常工作的效率和生产力。您可以将提示语视为与AI助手对话的开场白。随着对话的深入，您可能会撰写多个提示语。虽然可能性几乎是无限的，但仍然有一些一贯的最佳实践可供您今天就开始应用。</p><p>​<strong>在撰写有效的提示语时，有四个主要方面是需要考虑的。您并不一定非要全部使用，但采用其中的几个将会很有帮助！</strong></p><ul><li><font style="background: #D2E2FB">人物角色</font></li><li><font style="background: #F9D2CF">任务</font></li><li><font style="background: #FDEEC3">语境</font></li><li><font style="background: #CEEAD5">格式</font></li></ul><p>​以下是使用所有四个区域的提示示例，这些提示在 Gmail 和 Google Docs 中可以很好地发挥作用：</p><p>​<font style="background: #D2E2FB">你是 Google Cloud 项目经理。</font><font style="background: #F9D2CF">起草执行摘要电子邮件发给</font><font style="background: #FDEEC3">[角色] 基于[相关程序文档的详细信息]。</font><font style="background: #CEEAD5">限制为要点。</font></p><p>以下是一些帮助您开始使用 Gemini for Workspace 的快速提示：</p><ol><li>使用自然语言。写作时就像在和另一个人说话一样。用完整的句子表达完整的想法。</li><li>具体并反复。告诉 Gemini for Workspace 您需要它做什么（总结、写作、改变语气、创造）。提供尽可能多的背景信息。</li><li>简明扼要，避免复杂化。用简短但具体的语言陈述您的请求。避免使用行话。</li><li>进行对话。如果结果不符合您的期望或您认为还有改进空间，请细微的调整您的提示。使用后续提示和反复审查和改进的过程来获得更好的结果。</li></ol><blockquote><p>提示词是一门艺术。如果第一次没有得到想要的结果，你可能需要尝试几种不同的提示方法。根据我们在 Workspace Labs 计划中学到的知识，最成功的提示平均大约有 21 个字，但人们经常在不知情的情况下尝试的提示很短——通常少于 9 个字。</p><p>生成式人工智能及其各种可能性确实令人兴奋，但它仍然是一个新兴的技术领域。即便我们的模型每天都在改进，变得更加智能和可靠，但是有时候对于给定的提示，它们的响应仍然可能是不可预测的。这是因为模型的学习基于过去的数据，并且在处理新颖或特定的问题时可能会遇到困难，尤其是在理解上下文或执行复杂的推理任务时。此外，模型也可能会产生与人类价值观或社会规范不一致的内容。因此，在使用生成式AI时，重要的是要持续监督和评估其生成的内容，以确保它们符合预期并适当地应用于实际场景中。</p><p>在将Gemini for Workspace的输出付诸实施之前，请先审查以确保其清晰、相关和准确。当然，最重要的是要记住：生成式AI是为了帮助人类，但最终的输出是由您决定的。</p><p>本指南中的示例提示仅用于说明目的。</p></blockquote><h1 id="二、介绍"><a href="#二、介绍" class="headerlink" title="二、介绍"></a>二、介绍</h1><h2 id="2-1-Gemini-for-Google-Workspace：提示-101"><a href="#2-1-Gemini-for-Google-Workspace：提示-101" class="headerlink" title="2.1 Gemini for Google Workspace：提示 101"></a>2.1 Gemini for Google Workspace：提示 101</h2><p>​有多种方式可以访问Gemini for Google Workspace的生成式AI功能。它是一个强大的生成式AI体验，无缝集成到了您每天使用的应用程序中——Gmail、Google Docs、Google Sheets、Google Meet 和 Google Slides。同时，您还可以访问gemini.google.com与Gemini进行交谈（享有Google Workspace企业级的安全和隐私保护）。</p><p>​理解如何构建一个有效的提示语并学习即时创建提示语能够极大地提升您的生产力和创造力。您可以将Gemini for Workspace视为一个由AI驱动的助手，它可以帮助您：</p><ul><li>提高写作水平</li><li>组织数据</li><li>创建原始图像</li><li>总结信息并提出见解</li><li>与同事建立有意义的联系</li><li>研究不熟悉的话题</li><li>发现趋势、综合信息并识别商机</li></ul><p>​Gemini for Workspace 可帮助您更聪明地工作，而不是更辛苦地工作，从而提高工作效率并节省时间，以便您可以专注于更有效的工作。本指南探讨了快速入门和掌握基础知识的不同方法，以帮助您完成日常任务。</p><p>​随着您对这种新的工作方式越来越有信心并逐渐熟悉，您将准备好探索更为复杂的提示语，这将使您能够优化整个工作流程。届时，Gemini for Workspace 可以成为您的思维伙伴、写作教练等角色。</p><p>​使用Gemini for Workspace 提升生产力和创造力的机会几乎是无穷无尽的。</p><h2 id="2-2-如何使用这份提示语指南"><a href="#2-2-如何使用这份提示语指南" class="headerlink" title="2.2 如何使用这份提示语指南"></a>2.2 如何使用这份提示语指南</h2><p>​这本手册是一份快速入门指南，旨在向您介绍如何使用Gemini for Workspace进行提示语操作。它包含了针对不同角色的情景、用例示例以及适用于高管、创始人及销售、营销、客户服务、项目管理和人力资源专业人士日常任务的潜在提示语。</p><p>​您会注意到各种不同的提示语风格。有些提示语中包含括号内的项目，这表示您需要填写的具体细节所在的位置。其他提示语则不标记变量，以展示完整的提示语可能是什么样子。本指南中的所有提示语都是为了启发您，但最终它们需要根据您的具体工作进行调整。</p><p>​首先，请跳至最适合您角色的部分。使用特定于角色的建议提示作为灵感，帮助您解锁一种全新而强大的工作方式。</p><p>​接下来，只需查找这些功能，并访问 g.co&#x2F;gemini&#x2F;features 了解如何开始使用每个功能</p><ul><li>帮我写 (Google 文档)</li><li>帮我写 (Gmail)</li><li>帮我整理 (Google 表格)</li><li>使用 Gemini 创建图像 (Google 幻灯片)</li><li>创建背景图像 (Google Meet)</li><li>gemini.google.com（具有 Google Workspace 企业级安全和隐私）</li></ul><h1 id="三、客户服务"><a href="#三、客户服务" class="headerlink" title="三、客户服务"></a>三、客户服务</h1><p>​作为客户服务专业人士，您致力于提供高效、始终令人愉悦的服务，并由积极主动、乐于助人的团队提供支持。本部分为您提供了将提示集成到日常任务中的简单方法。快速构建标准化沟通框架、个性化沟通、新培训材料等 - 所有这些都使用 Gemini for Google Workspace。</p><h2 id="3-1-入门"><a href="#3-1-入门" class="headerlink" title="3.1 入门"></a>3.1 入门</h2><p>​首先，查看一般提示写作技巧和本指南开头的提示 101 部分</p><p>​下面的每个提示都附带一个场景，以启发您如何使用 Gemini for Workspace 进行协作。提示迭代示例说明了如何继续编写提示以在最初生成的响应的基础上进行构建。我们还提供了不同客户服务角色如何使用 Gemini for Workspace 的示例。您可以调整每个提示以完成常见任务并优化生成的输出。</p><h2 id="3-2-提示迭代示例"><a href="#3-2-提示迭代示例" class="headerlink" title="3.2 提示迭代示例"></a>3.2 提示迭代示例</h2><p>​您是一名客户服务代表，负责直接回复客户的咨询和疑虑。您刚刚收到一封客户发来的电子邮件，称客户收到了损坏的商品。您打开一份新的 Google 文档，点击“帮我写”，以提示 Docs 中的 Gemini。输入以下内容：</p><p><font style="background: #F9D2CF">帮我写一封富有同理心的电子邮件回复。</font><font style="background: #D2E2FB">我是一名客户服务代表，</font><font style="background: #F9D2CF">我需要回复一个客户投诉。</font><font style="background: #FDEEC3">客户订购了一副耳机，但收到后发现已经损坏。他们已经通过电子邮件联系我们，并提供了损坏的图片。我提供了替换品，但他们要求使用通常不包含在订单中的加急送货服务。</font><font style="background: #CEEAD5">请附上一段文字，承认他们的沮丧情绪，并列出三个可能的解决方案。</font></p><p><font style="background: #D2E2FB">人物角色</font> <font style="background: #F9D2CF">任务</font> <font style="background: #FDEEC3">语境</font> <font style="background: #CEEAD5">格式</font></p><p><img src="/2024/11/14/google-prompting-guide-101/image-20240829163350572.png" alt="image-20240829163350572"></p><p>​您喜欢 Docs 中的 Gemini 创建的电子邮件，因此选择“插入”。但您想集思广益，想出解决问题的方法，但不提供加急送货服务。您选择“帮我写”来提示。您输入：</p><p>​ <font style="background: #F9D2CF">帮我写10个替代加急运输的方案，</font><font style="background: #FDEEC3">以解决客户收到损坏包裹时的沮丧情绪。</font></p><p><img src="/2024/11/14/google-prompting-guide-101/image-20240829163603135.png" alt="image-20240829163603135"></p><p>​这 10 条建议很有帮助。单击“插入”将文本添加到草稿中。</p><h2 id="3-3-提示指南"><a href="#3-3-提示指南" class="headerlink" title="3.3 提示指南"></a>3.3 提示指南</h2><h3 id="3-3-1-客户服务经理或代表"><a href="#3-3-1-客户服务经理或代表" class="headerlink" title="3.3.1 客户服务经理或代表"></a>3.3.1 客户服务经理或代表</h3><h4 id="用例：标准化沟通框架"><a href="#用例：标准化沟通框架" class="headerlink" title="用例：标准化沟通框架"></a>用例：标准化沟通框架</h4><p>​您是客户服务团队经理。您的团队已经扩大，您需要创建可扩展的资源来标准化整个团队的沟通。您打开一个新的 Google 文档。您想集思广益，因此您向 Docs 中的 Gemini 寻求帮助。您选择“帮我写”并输入：</p><blockquote><p>为三种不同类型的客户沟通草拟模板。为道歉电子邮件、订单确认信息和忠诚客户的感谢信创建模板。将每个模板限制为一段文字，并使用友好的语气。</p></blockquote><p>​建议的模板为您提供了一个很好的起点，您可以开始编辑和添加一些与公司品牌和政策一致的元素。您选择“插入”。现在，您要创建一个文档，概述团队用于入职的最佳沟通实践。您打开一个新的 Google 文档并提示 Gemini in Docs。您输入：</p><blockquote><p>制定一份客户沟通最佳实践清单，可用于培训新团队成员。概述三个部分，包括如何处理满意的客户咨询、中立的客户咨询和不满意的客户咨询。</p></blockquote><p>​您还希望为团队提供标准化语言，以便他们在电话中与客户互动时使用。 您想集思广益，因此打开 gemini.google.com 并输入：</p><blockquote><p>我是一名 [客户服务经理]。我正在尝试创建标准化语言，以便团队在与客户进行电话交流时使用。为零售店的客户服务代表生成常见的通话开始、问候和结束语模板。这些模板应允许使用客户详细信息进行个性化设置。目标是确保一致性和专业性，同时允许使用特定客户信息进行区分。</p></blockquote><h4 id="用例：改善客户服务"><a href="#用例：改善客户服务" class="headerlink" title="用例：改善客户服务"></a>用例：改善客户服务</h4><p>​您注意到客户投诉有所增加。您需要跨部门协作，以了解如何解决反复出现的问题。您首先向其他团队负责人发送电子邮件。您在 Gmail 中选择“帮我写”，提示 Gemini。您输入：</p><blockquote><p>草拟一封电子邮件给我的同事们，提议召开一次会议讨论客户体验改进计划。请求市场、销售和产品相关人员在下周会面，以明确各自的职责和角色。</p></blockquote><p>​您简单地复制编辑了电子邮件并将其发送给您的同事。现在您已经发送了初始电子邮件，您想创建一个电子表格，以便跟踪此跨部门计划的进展情况。您打开 Google 表格，并通过选择“帮助我整理”来提示 Gemini。您输入：</p><blockquote><p>创建一个表格来跟踪不同客户体验改进策略的进展和影响，使用相关指标包括支持工单数量和优先级（高、中、低）。</p></blockquote><p>​您看到一个已经按照您要求的类别格式化好的电子表格模板。现在您只需填入具体的细节即可。</p><h3 id="3-3-2-客户支持专家"><a href="#3-3-2-客户支持专家" class="headerlink" title="3.3.2 客户支持专家"></a>3.3.2 客户支持专家</h3><h4 id="用例：实现客户自助服务"><a href="#用例：实现客户自助服务" class="headerlink" title="用例：实现客户自助服务"></a>用例：实现客户自助服务</h4><p>​作为客户支持专家，您的团队收到了很多关于退货政策的问题电子邮件。客户反馈一致认为您的指导方针不明确。您打开一份 Google 文档，其中说明了退货、退款和商店信用政策。您通过选择“帮助我撰写”提示 Docs 中的 Gemini。您输入：</p><blockquote><p>总结此内容，制定一个清晰简洁的产品退货政策，并概述客户需依次采取的5个步骤</p></blockquote><p>​您喜欢这些步骤的简洁性。接着，您重复这一过程来简化退款政策和商店积分政策。现在，您希望使用这些新简化的内容来创建一篇博客文章，以便告知客户有关退货、退款和商店积分的政策。使用包含新撰写的指导内容的Google Doc，您在Google Docs中向Gemini发出提示。您输入：</p><blockquote><p>把这些内容变成一个简短的文章，标题为“无需客服协助即可解决常见问题”。为我们的退货政策、退款政策和商店信用政策设置单独的部分。</p></blockquote><p>​现在，您想要创建一个电子邮件模板，团队可以在收到有关这三个领域的客户问题时使用该模板。您打开一个新的 Google 文档，并在 Docs 中提示 Gemini。您输入：</p><blockquote><p>起草一份发给客户的电子邮件模板，重点介绍 [支持问题] 的自助服务资源 [博客链接]。并感谢客户的惠顾，向他们保证我们致力于满足他们的需求。</p></blockquote><h4 id="用例：客户之声研究"><a href="#用例：客户之声研究" class="headerlink" title="用例：客户之声研究"></a>用例：客户之声研究</h4><p>​公司的新政策是，您将向每一位不满意的客户发送电子邮件，以尝试解决问题。您打开一封包含客户投诉的电子邮件。您选择“帮我写”，在 Gmail 中提示 Gemini。您输入：</p><blockquote><p>请求在 [日期] 的 [时间] 与提供负面反馈的客户进行跟进对话，以了解他们的关切并提供解决方案。包括示例解决方案。</p></blockquote><p>​起草的回复是一个不错的开始，但对于投诉的回应语言有点太直接了。您可以通过在 Gmail 中使用“优化”&gt;“详细阐述”提示 Gemini 来进行迭代。接下来，您想要创建一个简短的调查问卷，您可以在每次与客户进行后续通话后发送该问卷，以评估通话对满足他们的需求有多大帮助。您打开一个新的 Google 文档并在 Docs 中提示 Gemini。您输入</p><blockquote><p>创建五个不同的问题，针对刚刚与客服代表通过电话的客户。这些问题应衡量通话的有效性，客户的关切是否得到解决，以及他们是否会向其他人推荐我们的业务。</p></blockquote><h3 id="3-3-3-客户服务协调员"><a href="#3-3-3-客户服务协调员" class="headerlink" title="3.3.3 客户服务协调员"></a>3.3.3 客户服务协调员</h3><h4 id="用例：与客户互动"><a href="#用例：与客户互动" class="headerlink" title="用例：与客户互动"></a>用例：与客户互动</h4><p>​您在更新政策方面取得了很大进展，并希望从最忠实的客户那里获得有关这些变化的反馈。您计划举办一次倾听之旅，与他们互动。您打开 Gmail 并在 Gmail 中提示 Gemini。您选择“帮我写”并输入</p><blockquote><p>写一封电子邮件，邀请我最忠实的客户参加下周在 [地点] [日期] [时间] 举行的有关我们更新的 [政策] 的反馈会议。</p></blockquote><p>​聆听之旅已结束，您已收到与会者的后续电子邮件。您需要帮助回复每封邮件，因此您在 Gmail 中提示 Gemini。您输入：</p><blockquote><p>给客户 [姓名] 写一封个性化的感谢信，感谢他们参加反馈会议，并解释我们将如何使用反馈来改进我们的政策。</p></blockquote><h4 id="用例：准备客户会议"><a href="#用例：准备客户会议" class="headerlink" title="用例：准备客户会议"></a>用例：准备客户会议</h4><p>​您需要准备与一位重要客户会面。他们的帐户对您来说是新客户，他们的行业和业务线也是新客户。您需要帮助进行研究，因此您打开 gemini.google.com 并输入：</p><blockquote><p>撰写五个问题，用于调研[行业]行业的公司，以了解他们面临的最大挑战并为首次会议做准备。</p></blockquote><p>​使用这些问题，您继续在gemini.google.com与Gemini的对话中进行后续提问。您将笔记和发现整理到一个Google文档中。你有几页笔记，所以你想为自己创建一个易于理解的摘要。你在 Docs 中提示 Gemini。你输入：</p><blockquote><p>从该内容中总结有关[行业]的发现并创建与客户讨论的谈话要点。</p></blockquote><p>​现在，您已经准备好与客户第一次见面了。您正准备发送第一封介绍电子邮件。您打开 Gmail，并在 Gmail 中提示 Gemini。您选择“帮我写”，然后输入：</p><blockquote><p>写一封电子邮件介绍我是 [帐户] 的客户服务协调员。邀请我的客户就 [主题] 举行会议，并要求在未来两周内确定日期和时间。</p></blockquote><h1 id="四、高管和企业家"><a href="#四、高管和企业家" class="headerlink" title="四、高管和企业家"></a>四、高管和企业家</h1><p>​作为一名高管，您在规划组织发展方向时时间非常紧张。您做出的每一个决定都会影响业务的增长、创新和整体发展轨迹。了解您的市场、保持领先趋势并做出明智的战略决策至关重要，在忙碌时完成紧急任务也同样重要。</p><p>​本节向您介绍由AI生成的提示语的强大功能，这些提示语旨在简化您的决策过程，帮助改善业务成果，并协助您快速完成任务——即使您不在办公桌前也是如此。了解Gemini for Google Workspace如何帮助您解锁深刻的洞察力，促进协作，并推动您的组织达到新的高度。</p><h2 id="4-1-入门"><a href="#4-1-入门" class="headerlink" title="4.1 入门"></a>4.1 入门</h2><p>​首先，查看一般提示写作技巧和本指南开头的提示 101 部分</p><p>​下面的每个提示都附带一个场景，以启发您如何使用 Gemini for Workspace 进行协作。提示迭代示例说明了如何继续编写提示以在最初生成的响应的基础上进行构建。我们还提供了不同客户服务角色如何使用 Gemini for Workspace 的示例。您可以调整每个提示以完成常见任务并优化生成的输出。</p><h2 id="4-2-提示迭代示例"><a href="#4-2-提示迭代示例" class="headerlink" title="4.2 提示迭代示例"></a>4.2 提示迭代示例</h2><p>​您是一位即将登上长途航班的高管，刚刚收到下次会议的邀请，并附有议程。您有一些意见，并想提议在议程中添加一些主题。您打开 Gmail，并在 Gmail 中提示 Gemini。您输入：</p><p><font style="background: #F9D2CF">起草一封电子邮件，</font><font style="background: #FDEEC3">确认我将参加董事会会议。询问我们是否可以调整议程，为[紧急主题]留出 15 分钟时间。</font></p><p><font style="background: #D2E2FB">人物角色</font> <font style="background: #F9D2CF">任务</font> <font style="background: #FDEEC3">语境</font> <font style="background: #CEEAD5">格式</font></p><p><img src="/2024/11/14/google-prompting-guide-101/image-20240829172742154.png" alt="image-20240829172742154"></p><p>电子邮件看起来不错，但您想确保语气尽可能正式。您选择“优化-&gt;正式化”。</p><p><img src="/2024/11/14/google-prompting-guide-101/image-20240829172821285.png" alt="image-20240829172821285"></p><p>您阅读电子邮件，然后选择“插入”。在发送之前，您进行了简单的编辑，以感谢团队在旅途中为您提供帮助。</p><h2 id="4-3-提示指南"><a href="#4-3-提示指南" class="headerlink" title="4.3 提示指南"></a>4.3 提示指南</h2><h3 id="4-3-1-首席运营官"><a href="#4-3-1-首席运营官" class="headerlink" title="4.3.1 首席运营官"></a>4.3.1 首席运营官</h3><h4 id="用例：准备员工沟通信息"><a href="#用例：准备员工沟通信息" class="headerlink" title="用例：准备员工沟通信息"></a>用例：准备员工沟通信息</h4><p>​您正在主持全公司季度全体会议。本季度取得了许多积极进展和发展势头，但您担心多个团队在遭遇意外挫折后士气低落。您想集思广益并练习如何回答可能很棘手的问题。您打开 gemini.google.com，然后输入</p><blockquote><p>我是一家中型公司的首席运营官。我将主持全公司季度员工大会。本季度取得了许多积极进展和发展势头，但我担心多个团队由于一些不可预见的挫折而士气低落。我想集思广益并练习如何回答可能棘手的问题。帮我写一些有挑战性的问题，员工可能会在即将到来的员工大会上询问我们的收入、领导层变动和公司愿景。为每个问题生成可能的答案，并使用自信而坚定的语气。</p></blockquote><p>​这些问题和建议的答案对您的准备阶段很有帮助。现在，您想收集有关如何以同理心回答问题的想法，尤其是在不确定的时期。您再次提示。您输入：</p><blockquote><p>这些问题和建议的答案对我的准备阶段很有帮助。现在，我想收集一些想法，关于如何以同理心的方式回答问题，特别是在不确定的时期。使用自信和令人安心的语气来做出回应，承认员工的担忧，并让员工知道我们正在努力为整个公司尽最大努力。</p></blockquote><p>​您想从这些问题开始，找出如何撰写振奋人心的评论来开启市政厅。您决定使用 Docs 中的 Gemini 进行头脑风暴。您打开一个新的 Google Doc 并选择“帮助我写作”。您输入</p><blockquote><p>帮我为刚刚结束一个充满挑战的季度的员工写两段振奋人心的文字。承认[困难]并强调即将到来的季度的[积极因素]。使用一种激励人心、乐观并培养团结和协作意识的语气。</p></blockquote><h4 id="用例：简化随时随地的响应"><a href="#用例：简化随时随地的响应" class="headerlink" title="用例：简化随时随地的响应"></a>用例：简化随时随地的响应</h4><p>由于您正在处理一项紧急任务，您的计划突然发生了变化。您无法参加会议，只需要确保团队对几个关键项目有答案。您打开 Gmail 并使用语音命令提示 Gmail 中的 Gemini。你说：</p><blockquote><p>给 [项目负责人] 写一封电子邮件，告知他们我因紧急事项无法参加会议。请他们做详细记录，确保团队就 [关键主题] 做出决定，并将事后分析报告的查看权分配给 [同事]。</p></blockquote><h3 id="4-3-2-首席营销官"><a href="#4-3-2-首席营销官" class="headerlink" title="4.3.2 首席营销官"></a>4.3.2 首席营销官</h3><h4 id="用例：集思广益内容和思想领导力"><a href="#用例：集思广益内容和思想领导力" class="headerlink" title="用例：集思广益内容和思想领导力"></a>用例：集思广益内容和思想领导力</h4><p>​您刚与社交媒体团队负责人进行了会议。在一份Google文档中，您记录了许多关于受众共鸣的内容、热门话题、目标受众数据以及能够有效提升品牌互动的关键词。您希望利用这些见解来头脑风暴一些潜在的思想领导文章。您通过在现有的Google文档中选择“帮助我写作”来向Docs中的Gemini发出提示。您输入：</p><blockquote><p>根据热门话题、目标受众分析和品牌关键词，为 [公司] 列出四个相关且引人入胜的思想领导力博客文章创意。</p></blockquote><p>​在相同的会议中，团队讨论了启动一个新的品牌活动。您知道客户非常重视您们可靠且独特的产品服务，并且您的公司一直以来都有兑现对客户承诺的历史。您需要帮助来开始构思新的活动方案。您打开一个新的Google文档并选择“帮助我写作”。您输入：</p><blockquote><p>为 [公司] 提出三个新口号选项，强调可靠性、创新性和悠久的受欢迎程度。</p></blockquote><p>​这些口号对启动您的创意过程很有帮助。您有一些即将举行的活动，这些活动可能是测试新活动元素的完美场所。您希望为活动团队设计展位图形的草案。您在Google Slides中打开一个新的演示文稿并选择使用Gemini创建图像。您输入：</p><blockquote><p>创建一张使用橙色和蓝色的贸易展会展位图像。该展位应该是现代风格，并展示互动电脑站。</p></blockquote><h4 id="用例：进行竞争分析"><a href="#用例：进行竞争分析" class="headerlink" title="用例：进行竞争分析"></a>用例：进行竞争分析</h4><p>​您的团队正在考虑拓展一条新的业务线。这对您来说是一个全新的领域，您希望能够迅速了解这对业务意味着什么。您决定进行调研。您前往gemini.google.com，并输入：</p><blockquote><p>我是一名 CMO，正在进行竞争分析。我的公司正在考虑拓展 [新的业务线]。列出 [行业] 中排名前五的竞争对手，并列出他们的定价、优势、劣势和目标受众。</p></blockquote><p>经过深入研究后，您决定制定一个虚构的五年战略，看看这对公司来说会是什么样子。您输入：</p><blockquote><p>好的，我打算说服我的CEO我们应该拓展进入 [业务领域]。请为北美的[行业]行业起草一个为期五年的精炼的竞争战略，包括目标、策略和战术。</p></blockquote><h3 id="4-3-3-首席技术官"><a href="#4-3-3-首席技术官" class="headerlink" title="4.3.3 首席技术官"></a>4.3.3 首席技术官</h3><h4 id="用例：总结新兴技术趋势"><a href="#用例：总结新兴技术趋势" class="headerlink" title="用例：总结新兴技术趋势"></a>用例：总结新兴技术趋势</h4><p>​您需要了解新兴技术趋势，因为形势瞬息万变。您打开gemini.google.com，然后输入：</p><blockquote><p>我是 [行业] 的 [公司] 的首席技术官。我想了解新兴技术趋势。总结对 [行业] 最具潜在影响的五大新兴技术。对于每项技术，列出其潜在的优势和挑战，并提出其在未来两到三年内可能对 [公司] 产生的影响。</p></blockquote><p>​提供的摘要是您进行初步研究的有用起点。您想更深入地研究特定主题，因此您通过键入以下内容继续对话</p><blockquote><p>推荐三个领域让[我的组织]可以采取积极措施，以保持在[特定领域]的领先优势。</p></blockquote><h3 id="4-3-4-首席信息官"><a href="#4-3-4-首席信息官" class="headerlink" title="4.3.4 首席信息官"></a>4.3.4 首席信息官</h3><h4 id="用例：建立技术沟通"><a href="#用例：建立技术沟通" class="headerlink" title="用例：建立技术沟通"></a>用例：建立技术沟通</h4><p>​您的团队刚刚提供了一份关于您的安全状况和关键漏洞的冗长技术报告。您需要立即与 CEO 讨论这个问题，但您知道目前一份多页的报告太多了，难以消化。您打开包含完整报告的 Google Doc，然后选择“帮助我撰写”以提示 Docs 中的 Gemini。您输入：</p><blockquote><p>总结本报告对[受众]的主要发现和影响。重点介绍已发现的主要[弱点]以及解决这些弱点的建议措施。使用正式语气。</p></blockquote><p>​摘要很有用，为您的 CEO 提供了适当的详细程度。您做了一些小修改，并将其作为执行摘要放在报告的顶部。现在，您需要向 CEO 发送电子邮件以安排会议进行讨论。<br>您打开 Gmail 并通过选择“帮助我撰写”提示 Gmail 中的 Gemini。您输入：</p><blockquote><p>帮我写一封电子邮件给我的首席执行官，要求下周举行 30 分钟的会议，讨论我们即将进行的 [IT 变革]。包括对可扩展性、安全性和数据管理的考虑。</p></blockquote><p><strong>用例：跟踪 IT 资产</strong><br>    您的公司需要一种快速的方法来跟踪新员工的软件访问情况。您需要一个电子表格，因此您打开 Google 表格并选择“帮我整理”。然后输入：</p><blockquote><p>为员工创建软件许可证跟踪器，并包括许可证类型、使用权和续订日期等列。</p></blockquote><h3 id="4-3-5-首席人力资源官"><a href="#4-3-5-首席人力资源官" class="headerlink" title="4.3.5 首席人力资源官"></a>4.3.5 首席人力资源官</h3><h4 id="用例：表达对员工的赞赏"><a href="#用例：表达对员工的赞赏" class="headerlink" title="用例：表达对员工的赞赏"></a><strong>用例：表达对员工的赞赏</strong></h4><p>​您想建立一个新计划，帮助组织中的每个人都感到被包容、被欣赏和被认可。但是对于这么大的公司，您需要深思熟虑。您想集思广益，因此您打开了一个新的 Google 文档并提示 Docs 中的 Gemini。您输入</p><blockquote><p>根据 [类型] 的公司文化和员工的多样化兴趣（如烹饪、园艺、运动、阅读和旅行），集思广益，提出 10 个员工赞赏想法。</p></blockquote><p>​Docs 中的 Gemini 激发了您的创造力，现在您有了员工兴趣俱乐部和活动的想法。您还希望确保您的领导团队定期鼓励管理人员认可团队中的人才，因此您创建了他们可以用作灵感的电子邮件模板。您通过选择“帮助我写作”来提示 Docs 中的 Gemini，然后输入：</p><blockquote><p>起草一份电子邮件模板，感谢 [员工] 的辛勤工作和 [近期成就]。为他们的奉献精神提供额外奖励，例如咖啡礼品卡。使用乐观而专业的语气。</p></blockquote><h4 id="用例：评估员工满意度"><a href="#用例：评估员工满意度" class="headerlink" title="用例：评估员工满意度"></a><strong>用例：评估员工满意度</strong></h4><p>​您担心您的团队最近不堪重负。在与直接下属通话之前，您想起草一份匿名调查问卷，让人们能够公开、诚实地评估自己的感受。要起草问题，请打开一份新的 Google 文档，然后选择“帮助我写作”以提示 Docs 中的 Gemini。您输入：</p><blockquote><p>起草一份匿名员工满意度调查问卷，问卷中的问题和答案应涉及工作量、工作与生活平衡、薪酬和职业发展机会等关键领域。确保问题清晰、简洁，避免引导性答案。</p></blockquote><p>​您收到了 15 位高层领导的反馈，并将所有匿名结果收集到 Google 文档中。您想要创建一份可以在下次通话中使用的摘要。您通过选择“帮助我撰写”提示 Docs 中的 Gemini。您输入：</p><blockquote><p>总结员工反馈的结果以确定关键主题。</p></blockquote><h3 id="4-3-6-创始人或企业家"><a href="#4-3-6-创始人或企业家" class="headerlink" title="4.3.6 创始人或企业家"></a>4.3.6 创始人或企业家</h3><h4 id="用例：进行竞争分析-1"><a href="#用例：进行竞争分析-1" class="headerlink" title="用例：进行竞争分析"></a><strong>用例：进行竞争分析</strong></h4><p>​您是一家初创公司的创始人，您的在线业务正在获得发展。您一直梦想着开设一家<br>实体店，现在可能是最佳时机。您需要一位思想伙伴来帮助您更好地了解当前形势。您打开 gemini.google.com，然后输入：</p><blockquote><p>我是一家初创公司的创始人。我正在考虑开设一家实体店。对[重点领域]的竞争格局进行分析。提供[主要竞争对手]在此领域的优势和劣势，包括他们的具体战略、策略和结果。确定[我的公司]如何改进其方法并获得竞争优势的18条可操作的见解和建议。</p></blockquote><p>​您从与 gemini.google.com 上的 Gemini 的讨论中收集到了有用的信息。您想更深入地围绕两个竞争对手进行头脑风暴。您输入：</p><blockquote><p>在当前市场格局下对 [公司] 与 [竞争对手] 进行竞争分析。</p></blockquote><h4 id="用例：进行筹款和投资者关系"><a href="#用例：进行筹款和投资者关系" class="headerlink" title="用例：进行筹款和投资者关系"></a><strong>用例：进行筹款和投资者关系</strong></h4><p>​您已准备好联系潜在投资者，让您的实体店成为现实。您需要帮助开始给投资者写电子邮件，因此在包含所有笔记和研究的同一个 Google 文档中，您通过选择“帮助我写作”来提示 Docs 中的 Gemini。您输入：</p><blockquote><p>为潜在投资者起草一份个性化的电子邮件模板，重点介绍[公司]独特的价值主张和[计划]的最新进展。请求安排会面时间，讨论下个月的合作机会。</p></blockquote><p>​电子邮件模板为您提供了一个起点。在将电子邮件发送给潜在投资者之前，您可以修改草稿并继续添加一些个人风格。一个月后与他们成功会面后，您想要起草一封感谢信。您打开 Google Doc，其中包含会议记录和笔记。您提示 Docs 中的 Gemini 帮助您撰写电子邮件草稿。您输入：</p><blockquote><p>起草一封电子邮件，感谢潜在投资者的来电，并要求安排时间安排后续会议以解决 [问题和疑虑]。</p></blockquote><p><strong>用例：管理休假政策和跟踪</strong><br>    您有一本冗长的手册，详细说明了公司的所有政策和程序。您想让新员工轻松理解休假申请政策。您打开包含手册的 Google 文档。您通过选择“帮助我撰写”提示 Docs 中的 Gemini。您输入：</p><blockquote><p>生成一份分步检查表，总结公司的休假申请政策。确保以通俗易懂的语言编写，便于员工理解。</p></blockquote><p>​由于许多员工都是轮班制，因此您需要一种快速的方法来跟踪每周的人员配备情况。您打开 Google 表格并点击“帮我整理”。您输入：</p><blockquote><p>创建一个跟踪每周人员配备情况的表格。创建日期、姓名、班次（上午或下午）和备注的列。</p></blockquote><h1 id="五、人力资源"><a href="#五、人力资源" class="headerlink" title="五、人力资源"></a>五、人力资源</h1><p>​作为人力资源专业人士，您是组织的骨干，需要处理大量机密和敏感信息。您塑造公司文化、寻找和培养人才，并确保员工获得积极的体验。这绝非易事。本部分为您提供了将提示整合到日常任务中的简单方法。<br>​学习编写有效的提示将有助于提高您的工作效率并简化您的日常任务，让您有更多时间专注于最紧迫的任务。使用 Gemini for Google Workspace 启动招聘、入职、培养归属感文化等。有关 CHRO 用例，请访问本指南的高管和企业家部分。</p><h2 id="5-1-入门"><a href="#5-1-入门" class="headerlink" title="5.1 入门"></a>5.1 入门</h2><p>​首先，请阅读第 2 页上的一般提示写作技巧和本指南开头的提示 101 部分。<br>​下面的每个提示都附带一个场景，以启发您如何与 Gemini for Workspace 进行协作。提示迭代示例说明了如何继续编写提示以在最初生成的响应的基础上进行构建。我们还提供了不同人力资源角色如何使用 Gemini for Workspace 的示例。您可以调整每个提示以完成常见任务并优化生成的输出。</p><h2 id="5-2-提示迭代示例"><a href="#5-2-提示迭代示例" class="headerlink" title="5.2 提示迭代示例"></a>5.2 提示迭代示例</h2><p>​您是一名人力资源经理，正在为员工会议编写演示文稿。您有一个 Google 文档，里面全是笔记、要点和您想要讨论的主题。您首先打开带有笔记的 Google 文档，然后使用以下提示在 Docs 中使用 Gemini。</p><p><font style="background: #D2E2FB">我是一名人力资源经理，</font><font style="background: #FDEEC3">我正在为新员工准备一份演讲稿。</font><font style="background: #F9D2CF">我需要为入职演讲稿撰写一份演讲稿，介绍我们公司对员工发展和福利的承诺。</font><font style="background: #CEEAD5">请帮我起草一些谈话要点，展示为什么员工指导和发展是我们公司的核心价值。</font></p><p><font style="background: #D2E2FB">人物角色</font> <font style="background: #F9D2CF">任务</font> <font style="background: #FDEEC3">语境</font> <font style="background: #CEEAD5">格式</font></p><p><img src="/2024/11/14/google-prompting-guide-101/image-20241113152832119.png" alt="image-20241113152832119"></p><p>​您喜欢 Gemini in Docs 创建的内容，因此选择“插入”。现在，您想添加更多有针对性的谈话要点。在 Google Doc 中，您突出显示与培训和认证计划以及指导机会相关的注释。您输入：<br>​<font style="background: #FDEEC3">在演示文稿的新部分</font><font style="background: #F9D2CF">添加四个谈话要点，</font><font style="background: #FDEEC3">解释我们如何支持员工的发展。</font><font style="background: #F9D2CF">提及我们的培训和认证计划以及指导机会。</font></p><p><img src="/2024/11/14/google-prompting-guide-101/image-20241113153046227.png" alt="image-20241113153046227"></p><p>​您选择“插入”。现在，您需要一些关于如何构思脚本结尾的想法。您在 Google Doc 中突出显示了关于预期团队行为的注释，并在 Docs 中提示 Gemini 以下内容：<br>​<font style="background: #F9D2CF">写一份有力的结束语，</font><font style="background: #FDEEC3">说明我们的期望，即每个人都要为营造一个尊重和热情的工作场所做出贡献。</font><font style="background: #CEEAD5">使用专业的语气。</font></p><p><img src="/2024/11/14/google-prompting-guide-101/image-20241113153543458.png" alt="image-20241113153543458"></p><p>​生成的内容让您在编写脚本方面有了先机。您只需添加一些详细信息，然后就可以创建与您的谈话要点一起提供的 Google 幻灯片草稿。</p><h2 id="5-3-提示指南"><a href="#5-3-提示指南" class="headerlink" title="5.3 提示指南"></a>5.3 提示指南</h2><h3 id="5-3-1-招聘人员"><a href="#5-3-1-招聘人员" class="headerlink" title="5.3.1 招聘人员"></a>5.3.1 招聘人员</h3><h4 id="用例：管理招聘流程"><a href="#用例：管理招聘流程" class="headerlink" title="用例：管理招聘流程"></a><strong>用例：管理招聘流程</strong></h4><p>​业务正在增长，您正在进行大规模的招聘工作。首先，您想使用 Gemini 进行头脑风暴，看看公司如何更好地管理招聘流程。您打开团队的“招聘策略”Google Doc，其中包含有关招聘策略和渠道的注释，以及用于从 LinkedIn 和其他来源向候选人进行冷门推广的电子邮件和消息模板。您首先使用 Docs 中的 Gemini 选择“帮助我写作”，输入以下提示。您输入：</p><blockquote><p>创建一份我们的招聘人员可以使用的策略列表，以改进我们现有的招聘流程并确定<br>潜在的求职者。</p></blockquote><p>​在成功为领导层创建了一份关于团队如何改进现有招聘流程的简短建议后，团队收到了有关紧急职位空缺的指导，职位空缺为一名内容营销经理，该经理具有 B2B 和 B2C 内容创作经验，至少有五年经验，并有一系列写作范例。您打开一份新的 Google 文档，并在 Docs 中向 Gemini 提示以下内容：</p><blockquote><p>我正在为营销团队开设一个新职位。为内容营销经理写一份引人注目的职位描述。突出显示关键职责 [插入] 和要求，包括 B2B 和 B2C 内容创作、至少五年经验以及一系列写作范例。</p></blockquote><p>​Docs 中的 Gemini 会生成一份职位描述。在查看并稍作调整后，您可以突出显示文本<br>并提示：</p><blockquote><p>建议更新 [职位描述] 的方法，并提供建议以使其对[受众] 更具吸引力。</p></blockquote><h4 id="用例：管理面试流程"><a href="#用例：管理面试流程" class="headerlink" title="用例：管理面试流程"></a><strong>用例：管理面试流程</strong></h4><p>​现在，您想要准备电话面试的问题。职位描述已获批准并在线发布。您决定通过访问 gemini.google.com 进行准备。您输入：</p><blockquote><p>我是一名招聘人员，正在为候选人面试做准备。为 [open role URL] 写一份 20 个开放式面试问题清单，我可以使用它们来筛选候选人。</p></blockquote><p>​面试结束后，您会得到一份 Google 文档，其中包含与每位候选人的对话记录。使用此 Google 文档，您会在 Docs 中提示 Gemini。您输入：</p><blockquote><p>总结面试记录并生成 [职位] 的最佳候选人名单。</p></blockquote><p>​在同一个 Google 文档中，您现在想为招聘经理总结您对每位候选人的发现。您通过选择“帮助我撰写”提示 Docs 中的 Gemini。您输入：</p><blockquote><p>生成一封电子邮件发送给招聘经理，其中包含 [候选人] 的摘要。</p></blockquote><h4 id="用例：候选人沟通"><a href="#用例：候选人沟通" class="headerlink" title="用例：候选人沟通"></a><strong>用例：候选人沟通</strong></h4><p>​团队已做出招聘决定。您打开 Google 文档，其中包含每个候选人的注释。您通过选择“帮助我写作”提示 Docs 中的 Gemini。您输入：</p><blockquote><p>我正在给刚完成面试流程的求职者写一封电子邮件。为 [选定的候选人] 创建一个模板，用于 [职位] 的录用通知，并请求安排电话讨论福利、薪酬和开始日期。</p></blockquote><p>​现在，您想生成个性化、富有同理心的电子邮件副本，发送给不会收到录用通知的求职者。您通过选择“帮我写”来提示 Docs 中的 Gemini。您输入：</p><blockquote><p>我正在给完成面试流程但未被选中的求职者写一封电子邮件。帮我为 [候选人] 写一封拒绝信，拒绝 [职位]。使用富有同理心的语气。</p></blockquote><h3 id="5-3-2-人力资源经理"><a href="#5-3-2-人力资源经理" class="headerlink" title="5.3.2 人力资源经理"></a>5.3.2 人力资源经理</h3><h4 id="用例：入职员工"><a href="#用例：入职员工" class="headerlink" title="用例：入职员工"></a><strong>用例：入职员工</strong></h4><p>​您是人力资源经理。招聘人员刚刚填补了公司两个空缺职位。现在，您负责确保候选人拥有顺畅的入职体验。您需要帮助为新员工构建信息，因此您打开 Google 表格，并通过选择“帮助我组织”提示 Gemini。您输入：</p><blockquote><p>创建一个表格，概述新员工第一周的日程安排，包括关键会议、培训课程和介绍。为每项活动提供一列关键联系人和优先级（低、中、高）。</p></blockquote><p>​Gemini in Sheets 返回一个格式化的 Google Sheet，您现在可以在其中填写关键联系人、会议和活动。条件格式使您可以轻松地使用颜色编码的视觉提示按优先级对任务进行排序。接下来，您需要为团队创造凝聚力的方法。您打开一个新的 Google 文档，并通过选择“帮助我写作”来提示 Gemini in Docs。您输入：</p><blockquote><p>设计一个团队凝聚力活动，例如办公室寻宝游戏，让团队成员在团队会议期间一起工作。</p></blockquote><p>​Docs 中的 Gemini 提供一些建议，让您集思广益，了解寻宝游戏。您调整输出并得到团队负责人的批准。现在，您需要与新员工沟通，向他们提供有关他们第一天与团队见面的信息。您打开 Gmail，选择“帮我写”，提示 Gmail 中的 Gemini。您输入：</p><blockquote><p>起草一封电子邮件给 [团队] 中的新员工，让他们与团队的其他成员见面，并解释会议的团队建设目的。</p></blockquote><h4 id="用例：传达关键发现并起草后续调查"><a href="#用例：传达关键发现并起草后续调查" class="headerlink" title="用例：传达关键发现并起草后续调查"></a><strong>用例：传达关键发现并起草后续调查</strong></h4><p>​现在您已经完成了新员工入职培训，您需要专注于确保领导层能够轻松理解最新的公司研究数据。您致力于为所有员工创造一个温馨的环境，让他们能够发展自己的技能。您打开包含最终报告的 Google 文档。您通过选择“帮助我撰写”提示 Docs 中的 Gemini。您输入：</p><blockquote><p>起草一封电子邮件给高层领导，总结我们[报告]的主要发现。包括一个简短的介绍段落，其中列出最重要的发现的要点。</p></blockquote><p>​Docs 中的 Gemini 返回带有要点的摘要。您对其进行编辑，然后使用它向领导团队发送电子邮件。作为后续行动，您想了解公司政策的变更如何影响员工体验。您打开 Docs 中的 Gemini 开始起草调查。您选择“帮助我撰写”并输入：</p><blockquote><p>起草一份带有问题和答案选项的匿名员工调查，以监控公司在 [主题] 上的进展。</p></blockquote><h1 id="六、市场营销"><a href="#六、市场营销" class="headerlink" title="六、市场营销"></a>六、市场营销</h1><p>​作为营销专业人士，您是引人入胜的广告活动、品牌体验、潜在客户生成等背后的创造力。您了解数据驱动的洞察、引人注目的消息传递以及与受众建立更深层次联系的力量。<br>​本部分为您提供了将提示整合到日常任务中的简单方法。学习编写有效的提示将有助于提高您的工作效率并简化您的日常任务，让您有时间专注于更具战略性的工作。了解如何以一种有助于释放新水平的创造力、自动化洞察和制作引起共鸣的广告活动的方式编写提示——所有这些都使用 Gemini for Google Workspace。有关 CMO 使用案例，请访问指南的高管和企业家部分。</p><h2 id="6-1-入门"><a href="#6-1-入门" class="headerlink" title="6.1  入门"></a>6.1  入门</h2><p>​首先，请阅读第 2 页的一般提示写作技巧和本指南开头的提示 101 部分。</p><p>​下面的每个提示都附带一个场景，以启发您如何与 Gemini for Workspace 协作。提示迭代示例说明了如何继续编写提示以在最初生成的响应的基础上进行构建。我们还提供了不同营销角色如何使用 Gemini for Workspace 的示例。您可以调整每个提示以完成常见任务并优化生成的输出。</p><h2 id="6-2-提示迭代示例"><a href="#6-2-提示迭代示例" class="headerlink" title="6.2 提示迭代示例"></a>6.2 提示迭代示例</h2><p>​您拥有自己的咨询公司，经常被聘为客户的品牌经理。您为各行各业的企业提供帮助。您的客户正准备开办一家咖啡店和电子游戏咖啡馆，您需要通过开发视觉形象来启动创意过程。您想构思并向团队其他成员提供早期想法。您决定在 gemini.google.com 上与 Gemini 聊天。您输入：</p><p>​<font style="background: #F9D2CF">为我的新业务</font><font style="background: #FDEEC3">（一家兼具咖啡店和视频游戏咖啡馆的咖啡店）</font><font style="background: #F9D2CF">构思一个有创意且引人注目的徽标。</font><font style="background: #FDEEC3">考虑以下因素来设计徽标：</font><br>​<font style="background: #FDEEC3">双重概念：徽标需要清晰地表明咖啡和游戏业务的两方面，但不能太过杂乱。</font><br>​<font style="background: #FDEEC3">目标受众：吸引广泛的游戏玩家（休闲玩家和发烧友）以及寻求独特聚会场所的咖啡爱好者。</font><br>​<font style="background: #CEEAD5">风格选择：我愿意接受这些方法 — 让我们从这三种风格中各取几个例子来比较：现代和俏皮：大胆的色彩、有趣的图形，也许是像素艺术美学。复古酷炫：想想经典的街机风格 — 粗体字体、霓虹色灵感。时尚简约：干净的线条、几何形状，更微妙地向这两个主题致敬。</font></p><p><font style="background: #D2E2FB">人物角色</font> <font style="background: #F9D2CF">任务</font> <font style="background: #FDEEC3">语境</font> <font style="background: #CEEAD5">格式</font></p><p><img src="/2024/11/14/google-prompting-guide-101/image-20241113155307919.png" alt="image-20241113155307919"></p><p>​您喜欢复古酷炫的选项。您继续对话并输入：</p><p>​<font style="background: #FDEEC3">我喜欢复古酷炫的款式。</font><font style="background: #F9D2CF">您能再提供三款</font><font style="background: #CEEAD5">相同风格的款式吗？</font></p><p><img src="/2024/11/14/google-prompting-guide-101/image-20241113155431174.png" alt="image-20241113155431174"></p><p>​现在你已经知道了徽标的外观，接下来你需要集思广益想出名字。你输入：</p><p>​<font style="background: #FDEEC3">为企业</font><font style="background: #F9D2CF">写一个标语和 10 个可能的名称</font><font style="background: #FDEEC3">以与这些标识相匹配。</font></p><p><img src="/2024/11/14/google-prompting-guide-101/image-20241113155553223.png" alt="image-20241113155553223"></p><h2 id="6-3-提示指南"><a href="#6-3-提示指南" class="headerlink" title="6.3 提示指南"></a>6.3 提示指南</h2><h3 id="6-3-1-品牌经理"><a href="#6-3-1-品牌经理" class="headerlink" title="6.3.1 品牌经理"></a>6.3.1 品牌经理</h3><h4 id="用例：进行市场调研并确定趋势"><a href="#用例：进行市场调研并确定趋势" class="headerlink" title="用例：进行市场调研并确定趋势"></a><strong>用例：进行市场调研并确定趋势</strong></h4><p>​您所在行业的格局正在迅速变化，您需要进行市场调研以更好地确定和了解新兴趋势。您访问 gemini.google.com，然后输入：</p><blockquote><p>我需要对 [行业] 行业进行市场调研以确定新趋势。使用 [URL] 发现新兴趋势和不断变化的消费者偏好。（gemini.google.com）</p></blockquote><p>​完成研究后，您和您的团队已更新您的品牌活动，以包含您想要进行 A&#x2F;B 测试的新消息。您决定生成广告文案的多个变体。您前往 gemini.google.com 并输入：</p><blockquote><p>我需要对新消息进行 A&#x2F;B 测试。这是我们的消息：[messaging]。生成三种不同的广告文案变体。</p></blockquote><h4 id="用例：创建和管理内容和分发"><a href="#用例：创建和管理内容和分发" class="headerlink" title="用例：创建和管理内容和分发"></a><strong>用例：创建和管理内容和分发</strong></h4><p>​另一位客户正在进行一些激动人心的领导层变动。您需要创建内容来塑造公司进入下一个时代的品牌叙事。您打开 Google 文档开始撰写博客草稿。您通过选择“帮助我撰写”提示 Docs 中的 Gemini。您输入：</p><blockquote><p>创建博客草稿，宣布 [姓名] 将以 [职位] 身份加入 [公司]。[分享他们简历中的两三个细节，例如他们之前的职位和公司、他们在专业组织中的参与情况等。]</p></blockquote><p>​您还想找到一种有效跟踪内容放大方式和位置的方法，因此您打开了 Google 表格。您在表格中选择“帮助我整理”来提示 Gemini。您输入：</p><blockquote><p>为内容放大创建项目跟踪器，并包括渠道、所有者、URL 和优先级（低、中、高）的列。</p></blockquote><h3 id="6-3-2-数字营销经理"><a href="#6-3-2-数字营销经理" class="headerlink" title="6.3.2 数字营销经理"></a>6.3.2 数字营销经理</h3><h4 id="用例：起草客户获取通讯"><a href="#用例：起草客户获取通讯" class="headerlink" title="用例：起草客户获取通讯"></a><strong>用例：起草客户获取通讯</strong></h4><p>​电子邮件是贵公司与潜在客户和客户直接沟通的主要渠道之一。您需要帮助开始撰写新的电子邮件活动文案。您打开一个新的 Google 文档，然后通过选择“帮助我撰写”提示 Docs 中的 Gemini。您输入：</p><blockquote><p>撰写三个不同的电子邮件主题行，其中引用 [受众群体] 和我们的 [产品]。让它们引人注目但又专业。</p></blockquote><p>​现在，您想与文案团队分享建议的电子邮件主题行。您打开 Gmail，然后选择“帮我写”。您输入：</p><blockquote><p>帮我写一封电子邮件，向文案团队提出 [建议的电子邮件主题行]。保持电子邮件简短明了，并在周末之前请求反馈。感谢他们的帮助。</p></blockquote><h4 id="用例：生成入站营销活动"><a href="#用例：生成入站营销活动" class="headerlink" title="用例：生成入站营销活动"></a><strong>用例：生成入站营销活动</strong></h4><p>​团队刚刚使用我们的新解决方案创建了一本有关高管最佳实践的新电子书。您正在创建一个登陆页面来容纳门控资产，并且需要引人入胜的副本。您打开一个新的 Google 文档并选择帮我写。您输入：</p><blockquote><p>为宣传新[电子书&#x2F;网络研讨会&#x2F;免费试用和详细信息]的登陆页面创建引人注目的副本，该页面专为高管目标受众设计。突出主要优势并通过有说服力的行动号召来鼓励转化。</p></blockquote><p>​网页已启动，您现在正在开展入站营销活动。您需要培养下载了最新电子书的潜在客户。您打开一个新的 Google 文档，然后通过选择帮助我写作来提示 Docs 中的 Gemini。您输入：</p><blockquote><p>生成一系列五封自动电子邮件的副本，以在潜在客户下载有关 [主题] 的电子书后培养他们。使用 [名称] 个性化电子邮件并鼓励进一步参与 [与其他有价值的资源或优惠]。</p></blockquote><h3 id="6-3-3-内容营销经理"><a href="#6-3-3-内容营销经理" class="headerlink" title="6.3.3 内容营销经理"></a>6.3.3 内容营销经理</h3><h4 id="用例：为您的博客产生灵感"><a href="#用例：为您的博客产生灵感" class="headerlink" title="用例：为您的博客产生灵感"></a><strong>用例：为您的博客产生灵感</strong></h4><p>​您在一家旅游公司工作，担任该公司博客频道的内容营销经理。您需要启动新博客文章的头脑风暴过程。您决定通过与 gemini.google.com 上的 Gemini 合作来收集想法。您输入：</p><blockquote><p>我需要博文主题，这些主题对热爱旅行和旅游业的人来说很有趣。以下是我希望您关注的重点：让主题独一无二。现在有很多旅游博客——让我们想出一些引人注目的新角度。保持主题的相关性。在集思广益时，利用旅游业的当前趋势或最近的挑战&#x2F;创新。我希望每个主题都包括：</p><p>目标受众：这个主题特别吸引谁？</p><p>内容大纲：博客文章将讨论的主要思想的几个要点。</p><p>号召行动：建议一种在文章结尾吸引读者的方法。</p></blockquote><p>​您喜欢您能够创造的最初想法。您还需要专注于生成创意图像以配合博客中的副本。您打开一个新的 Google Slide，并通过选择使用 Gemini 创建图像来提示 Gemini。您输入：</p><blockquote><p>创建一张飞机在日出时飞过山脉和河流的云层之上的图像，我可以将其用于营销活动来推广我的旅游公司</p></blockquote><h4 id="用例：创建社交媒体帖子"><a href="#用例：创建社交媒体帖子" class="headerlink" title="用例：创建社交媒体帖子"></a><strong>用例：创建社交媒体帖子</strong></h4><p>​您专注于创建针对社交媒体渠道优化的内容。您需要收集针对不同受众的不同内容的想法。您打开一个新的 Google 文档，并通过选择“帮助我撰写”来提示 Docs 中的 Gemini。您输入：</p><blockquote><p>撰写三篇关于 [产品&#x2F;服务&#x2F;主题] 的引人入胜的社交媒体帖子，以吸引 [目标受众]。将每篇社交媒体帖子控制在两句话以内，并包含访问 [我们的网站] 的号召性用语。</p></blockquote><p>​您还需要制作社交媒体帖子，以推动针对应届毕业生的即将举行的活动的注册。您打开一个新的 Google 文档，并通过选择“帮助我撰写”来提示 Docs 中的 Gemini。您输入：</p><blockquote><p>创建社交媒体帖子，宣传我们即将举行的 [活动名称]。包括吸引注意力的语言和与 [受众] 相关的主题标签。</p></blockquote><h4 id="用例：制定战略营销计划"><a href="#用例：制定战略营销计划" class="headerlink" title="用例：制定战略营销计划"></a><strong>用例：制定战略营销计划</strong></h4><p>​您的公司正在推出一款新应用。您需要一个强大的营销计划，但您需要一些想法来开始。您通过访问 gemini.google.com 与 Gemini 聊天。您输入：</p><blockquote><p>我正在为提供 [功能] 的新应用制定营销计划。我的目标受众是[受众]。请帮我制定一个以 [营销渠道] 为重点的计划。以下是我希望您涵盖的内容：竞争对手分析、理想的营销渠道组合及其理由、预算建议、关键信息传递想法以及带有 KPI 的拟议活动时间表。</p></blockquote><p>​聊天中的回复有助于制定营销计划。在确定所有细节的同时，您需要将高级细节提供给您的 CMO。您打开 Gmail，选择“帮我写”，在 Gmail 中提示 Gemini。您输入：</p><blockquote><p>给 CMO 写一封电子邮件，告诉他们我将在 [日期] 之前提供一份一页纸的战略营销计划，用于新应用发布项目，其中包括执行摘要、竞争格局概述、顶级营销渠道和所有南美市场的目标人群。</p></blockquote><h1 id="七、项目管理"><a href="#七、项目管理" class="headerlink" title="七、项目管理"></a>七、项目管理</h1><h2 id="7-1-入门"><a href="#7-1-入门" class="headerlink" title="7.1  入门"></a>7.1  入门</h2><p>​作为复杂且不断发展的项目的指挥者，您的任务是把握时间表、协调团队并确保您的项目产生预期的影响。</p><p>​本部分将向您介绍 Gemini for Google Workspace 的强大功能，帮助您学习提示的基础知识并优化项目管理工作流程。准备好实现效率、洞察力和主动解决问题的能力，这将有助于使用 Gemini for Workspace 提升您的项目成果。</p><h2 id="7-2-提示迭代示例"><a href="#7-2-提示迭代示例" class="headerlink" title="7.2 提示迭代示例"></a>7.2 提示迭代示例</h2><p>​首先，请阅读第 2 页的一般提示写作技巧和本指南开头的提示 101 部分。</p><p>​下面的每个提示都附带一个场景，以启发您如何与 Gemini for Workspace 协作。提示迭代示例说明了如何继续编写提示以在最初生成的响应的基础上进行构建。您可以继续编写提示以在最初生成的响应的基础上进行构建，并且可以调整每个提示以完成常见任务并优化生成的输出。</p><p>​您的团队刚刚完成了新网站的注册表单，现在您需要生成一些用户验收测试 (UAT)。要开始草稿，请访问 gemini.google.com 并输入：<br>​ <font style="background: #FDEEC3">为最新网站注册表单</font><font style="background: #F9D2CF">创建一个包含 10 个用户验收测试 (UAT) 的表格。</font></p><p>​<font style="background: #D2E2FB">人物角色</font> <font style="background: #F9D2CF">任务</font> <font style="background: #FDEEC3">语境</font> <font style="background: #CEEAD5">格式</font></p><p><img src="/2024/11/14/google-prompting-guide-101/image-20241113162759322.png" alt="image-20241113162759322"></p><p>​您认为这些结果是一个有用的起点，因此您将结果导出到 Google Sheet，然后起草一封电子邮件给负责运行 UAT 的同事。您想解释他们需要做什么。您继续在 gemini.google.com 上与 Gemini 进行对话。您输入：</p><p>​<font style="background: #F9D2CF">起草一封电子邮件</font><font style="background: #FDEEC3">给负责运行此 UAT 的 [我的同事]，并解释他们下一步需要做什么。</font></p><p><img src="/2024/11/14/google-prompting-guide-101/image-20241113162901255.png" alt="image-20241113162901255"></p><p>​起草的电子邮件提供了一个有用的起点，因此您可以将结果导出到 Gmail，并在将邮件发送给同事之前直接进行编辑。</p><h2 id="7-3-提示指南"><a href="#7-3-提示指南" class="headerlink" title="7.3 提示指南"></a>7.3 提示指南</h2><h3 id="7-3-1-项目经理"><a href="#7-3-1-项目经理" class="headerlink" title="7.3.1 项目经理"></a>7.3.1 项目经理</h3><h4 id="用例：报告项目状态"><a href="#用例：报告项目状态" class="headerlink" title="用例：报告项目状态"></a><strong>用例：报告项目状态</strong></h4><p>​您刚刚与所有项目利益相关者进行了长时间的通话，现在您想总结讨论的内容并跟进分配的行动项目。在包含会议记录的 Google 文档中，您通过选择“帮助我撰写”提示 Docs 中的 Gemini。您输入：</p><blockquote><p>用一个简短的段落总结此通话记录。在项目符号中，根据 [通话记录] 突出显示行动项目、做出的决定和每个项目的所有者。</p></blockquote><p>​您需要根据上次通话中的活动向经理汇报情况。您希望模板化项目状态更新的交付方式。您打开一个新的 Google 文档，然后通过选择“帮我写”提示 Docs 中的 Gemini。您输入：</p><blockquote><p>草拟要发送给我经理的项目状态更新电子邮件模板。包括本周主要成就、面临的任何挑战以及下周的三大优先事项的摘要部分。</p></blockquote><p>​团队提前整整一周完成了关键里程碑。这是一个具有挑战性的项目，所以你想召集所有人一起庆祝。你打开 Gmail，选择“帮我写”，在 Gmail 中提示 Gemini。你输入：</p><blockquote><p>写一份团队午餐邀请函，庆祝项目进展，并注明 [日期、时间和地点]。感谢他们的辛勤工作，并承认这是一个具有挑战性的项目。</p></blockquote><h4 id="用例：创建项目回顾"><a href="#用例：创建项目回顾" class="headerlink" title="用例：创建项目回顾"></a><strong>用例：创建项目回顾</strong></h4><p>​您刚刚完成项目，您的高级领导团队需要进行项目回顾。要启动从整个团队收集反馈的过程，请打开 Google 文档，然后选择“帮助我撰写”，提示 Docs 中的 Gemini。您输入：</p><blockquote><p>我需要撰写一份报告，详细说明 [项目] 的成功、失败和经验教训。起草一份包含 20 个问题的清单，以指导跨团队流程调查。包括一些问题，以发现哪些方法有效、哪些方法无效、特定流程故障、技术问题、沟通差距或任何其他可能导致项目问题或成功的因素。</p></blockquote><p>​Gemini in Docs 提供的问题为您提供了一个很好的起点。您可以在与团队共享 Google Doc 以征求他们的意见之前对其进行编辑。在 Google Doc 中收集每个人的反馈后，您需要帮助构建报告。您可以通过选择“帮助我撰写”来提示 Gemini in Docs。您输入：</p><blockquote><p>用两段话总结此文档。包括有关项目目标、主要贡献者、项目成果以及任何关键成功或失败的高级信息。</p></blockquote><h4 id="用例：开发问题跟踪器和相关通信"><a href="#用例：开发问题跟踪器和相关通信" class="headerlink" title="用例：开发问题跟踪器和相关通信"></a><strong>用例：开发问题跟踪器和相关通信</strong></h4><p>​您需要创建一个项目问题跟踪器来跟踪风险并及时解决。您想快速创建一个模板，因此您打开一个新的 Google Sheet 并通过选择“帮助我整理”来提示 Sheets 中的 Gemini。您输入：</p><blockquote><p>创建一个电子表格来跟踪项目问题，包括描述、状态、分配的所有者和解决问题的行动项目。</p></blockquote><p>​在项目全面启动之前，您需要拥有标准化的沟通模板。例如，您需要一封可以在出现问题时使用的电子邮件。您打开一个新的 Google 文档，并通过选择“帮我写”提示 Docs 中的 Gemini。您输入：</p><blockquote><p>草拟一份电子邮件模板，用于在出现问题时进行通知，并包括原因、解决方案和解决问题的时间表。</p></blockquote><p>​您喜欢 Gemini in Docs 创建的模板，并且想要创建一个额外的、略有不同的电子邮件模板。在同一个 Google 文档中，您通过选择“帮助我撰写”来提示 Gemini in Docs。您输入：</p><blockquote><p>起草一份电子邮件模板给利益相关者，以升级关键项目问题，概述影响和建议的解决方案。 </p></blockquote><h1 id="八、销售"><a href="#八、销售" class="headerlink" title="八、销售"></a>八、销售</h1><p>​彻底了解客户是您走向成功的钥匙。您负责维护关键关系、解读购买信号、制定定制解决方案、进行数据驱动的呼叫等。</p><p>​Gemini for Google Workspace 可以帮助您重新定义生产力并培养有意义的客户关系。本节提供专为您和您的团队设计的实用提示和真实用例。学习编写有效的提示将有助于提高您的生产力并简化您的日常任务，让您有更多时间专注于您的客户，通过使用 Gemini for Workspace。</p><h2 id="8-1-入门"><a href="#8-1-入门" class="headerlink" title="8.1  入门"></a>8.1  入门</h2><p>​首先，请阅读第 2 页上的一般提示编写技巧和本指南开头的提示 101 部分。</p><p>​下面的每个提示都附带一个场景，以启发您如何与 Gemini for Workspace 协作。提示迭代示例说明了如何继续编写提示以在最初生成的响应的基础上进行构建。我们还提供了不同销售角色如何使用 Gemini for Workspace 的示例。您可以调整每个提示以完成常见任务并优化生成的输出。</p><h2 id="8-2-提示迭代示例"><a href="#8-2-提示迭代示例" class="headerlink" title="8.2 提示迭代示例"></a>8.2 提示迭代示例</h2><p>​您是一名客户主管，刚刚被指派给一位新客户。您需要一名研究助理。您需要了解客户的关键联系人，以便开始在团队之间建立信任，但首先，您想发送一封介绍性电子邮件，因此您打开 Gmail 并选择“帮我写”，在 Gmail 中提示 Gemini。您输入：</p><p>​<font style="background: #F9D2CF">给 [公司] 的新 [职位] [姓名] 写一封电子邮件。</font><font style="background: #FDEEC3">祝贺他们获得新职位。介绍我是他们在 [公司名称] 的联系人。邀请他们下周共进午餐，看看他们更喜欢周一还是周二。</font></p><p>​<font style="background: #D2E2FB">人物角色</font> <font style="background: #F9D2CF">任务</font> <font style="background: #FDEEC3">语境</font> <font style="background: #CEEAD5">格式</font></p><p><img src="/2024/11/14/google-prompting-guide-101/image-20241113163518779.png" alt="image-20241113163518779"></p><p>​这提供了一个有用的起点，但你想尝试获得更好的响应。你点击 <strong>完善&gt;形式化</strong>。</p><p><img src="/2024/11/14/google-prompting-guide-101/image-20241113163616893.png" alt="image-20241113163616893"></p><p>​您对电子邮件很满意，因此点击了“插入”。您最后一次阅读了邮件，直接进行了最后的简单编辑，然后发送了邮件。现在，您想了解有关客户的更多信息以及客户如何营销自己。要进行研究，请访问 gemini.google.com 并输入：</p><p>​<font style="background: #D2E2FB">我是一名负责新客户（[客户名称]）的客户经理。</font><font style="background: #FDEEC3">我需要做初步调查。</font><font style="background: #F9D2CF">[客户] 的市场策略是什么？</font></p><p><img src="/2024/11/14/google-prompting-guide-101/image-20241113163731312.png" alt="image-20241113163731312"></p><p>​Gemini 为您提供了有用的信息，帮助您开始研究。您决定先关注新闻公告，进一步研究。您收集了 URL 列表，并将其粘贴到您在 gemini.google.com 上与 Gemini 的对话中。您输入：</p><p>​<font style="background: #FDEEC3">[URL] </font><font style="background: #F9D2CF">总结这些文章。</font><font style="background: #CEEAD5">提供关键见解并说明这些公告为何如此重要。</font></p><p>​现在，您已经清楚地了解了宣布的内容、新闻的重要性以及其他见解。接下来，您想更好地了解将成为主要联系人的高管。您找到了一段有关该高管的录音采访。您将 YouTube 网址粘贴到您与 gemini.google.com 上的 Gemini 的对话中，然后输入：</p><p>​<font style="background: #FDEEC3">[URL] </font><font style="background: #F9D2CF">总结这次采访并告诉我更多关于 [高管姓名] 的信息。</font><font style="background: #CEEAD5">[高管] 关心什么？</font></p><p>​现在您有了一份简洁的面试总结。您可以继续对话，提出更多问题以熟悉您的关键联系人和帐户。您提示：</p><p>​<font style="background: #F9D2CF">告诉我 [公司] 如何帮助 [客户公司] 实现他们的目标。</font></p><p>​结束对话后，您可以将结果导出到 Google 文档中。打开 Google 文档并在 Docs 中提示 Gemini。输入：</p><p>​<font style="background: #FDEEC3">为 [客户] </font><font style="background: #F9D2CF">创建一封电子邮件草稿，</font><font style="background: #FDEEC3">解释为什么 [贵公司] 是他们实现市场目标的完美合作伙伴。</font></p><h2 id="8-3-提示指南"><a href="#8-3-提示指南" class="headerlink" title="8.3 提示指南"></a>8.3 提示指南</h2><h3 id="8-3-1-销售经理"><a href="#8-3-1-销售经理" class="headerlink" title="8.3.1 销售经理"></a>8.3.1 销售经理</h3><h4 id="用例：发展客户关系"><a href="#用例：发展客户关系" class="headerlink" title="用例：发展客户关系"></a><strong>用例：发展客户关系</strong></h4><p>​您的年度会议即将召开，许多最重要的客户都会出席。您想亲自邀请他们参加您举办的欢乐时光活动。您还想邀请一些潜在客户，以便他们与现有客户建立联系。您打开 Gmail，选择“帮我写”以在 Gmail 中提示 Gemini。<br>您输入：</p><blockquote><p>写一封电子邮件，邀请对 [重点领域] 感兴趣的人参加我们于 [日期、时间] 在 [贸易展览活动] 举行的欢乐时光活动。包括我们专注于 [重点领域]。</p></blockquote><p>​现在活动已经结束，您想要跟进参加欢乐时光的客户。您打开 Gmail并选择“帮我写”来提示 Gmail 中的 Gemini。您输入：</p><blockquote><p>起草一封电子邮件，感谢客户在 [日期、时间、地点] 参加欢乐时光。最后邀请他们在接下来的几周内继续对话。使用友好的语气。</p></blockquote><p>​在活动总结活动中，您还想与参加动手演示研讨会的客户进行交流。他们测试了公司的一些新产品，他们的早期反馈对团队来说很重要。您打开一个新的 Google 文档，并通过选择“帮我写”提示 Docs 中的 Gemini。您输入：</p><blockquote><p> 草拟 10 个问题，我可以使用这些问题来调查客户最近使用我们的 [产品&#x2F;服务] 的体验。包括一些问题来衡量 [产品] 有多有用、他们喜欢什么以及他们认为哪些方面可以改进。</p></blockquote><h4 id="用例：支持销售团队"><a href="#用例：支持销售团队" class="headerlink" title="用例：支持销售团队"></a><strong>用例：支持销售团队</strong></h4><p>​不幸的是，公司的服务出现了区域性问题。您需要联系东南地区的所有团队负责人，以立即指导如何主动联系客户。您打开 Gmail，选择“帮我写”以提示 Gmail 中的 Gemini。您输入：</p><blockquote><p>起草一封电子邮件给所有东南地区的销售主管。告知他们 [问题]。建议他们与团队沟通，联系客户，并在未来的订单中提供 20% 的折扣作为道歉。 </p></blockquote><p>​现在，您需要向所有区域团队成员发送电子邮件，因为他们最接近客户反馈。您打开 Gmail，选择“帮我写”，在 Gmail 中提示 Gemini。您输入：</p><blockquote><p>起草一封电子邮件给区域销售代表，内容是下周需要就 [问题] 举行的紧急会议。请他们周一或周二安排时间</p></blockquote><h4 id="用例：指导和培训销售团队"><a href="#用例：指导和培训销售团队" class="headerlink" title="用例：指导和培训销售团队"></a><strong>用例：指导和培训销售团队</strong></h4><p>​您从许多团队成员那里听说他们想要更多的学习机会。您正在组织一个半天的学习计划来支持这一请求。您需要创建一个时间表，因此您打开一个新的 Google 文档，然后通过选择“帮助我写作”提示 Docs 中的 Gemini。您输入：</p><blockquote><p>为销售团队创建一个半天的教育课程议程，介绍我们的最新技术 [产品]。包括产品开发团队的演示时间以及午餐时间。</p></blockquote><p>​作为团队会议的后续活动，您希望重点介绍团队可用的所有不同学习机会。您需要一种方法来组织这些内容，因此您打开 Google 表格，并通过选择“帮助我组织”提示 Gemini。您输入：</p><blockquote><p>创建一个电子表格，跟踪卖家的在线课程。包括课程的主要主题、价格、持续时间和优先级别的列。</p></blockquote><h3 id="8-3-2-客户经理和客户主管"><a href="#8-3-2-客户经理和客户主管" class="headerlink" title="8.3.2 客户经理和客户主管"></a>8.3.2 客户经理和客户主管</h3><h4 id="用例：建立客户关系"><a href="#用例：建立客户关系" class="headerlink" title="用例：建立客户关系"></a><strong>用例：建立客户关系</strong></h4><p>​您刚刚与客户进行了一次愉快的通话，现在您想使用在 Google Docs 中记录的会议笔记来起草一封发送给客户的电子邮件。在包含笔记的 Google Doc 中，选择“帮助我撰写”，提示 Docs 中的 Gemini。您输入：</p><blockquote><p>在初次交谈后，为 [客户] 撰写个性化的后续电子邮件。总结我们讨论的关键点并解决任何未解决的问题。</p></blockquote><p>​该帐户刚刚采用了该公司的一项服务，您需要确保他们在入职过程中感受到支持。您想确保每周检查一次事情的进展情况，但您想探索电子邮件的外观。您打开一个新的 Google 文档，并通过选择“帮助我写作”提示 Docs 中的 Gemini。您输入：</p><blockquote><p>草拟四个电子邮件模板，以便每周检查我的客户，因为他们已经购买了我们的新[服务]。使用一个价值主张（成本、易用性、安全性、可用性和定制）作为每封电子邮件的主要主题，并在每封邮件中包含[号召性用语]。</p></blockquote><h4 id="用例：为新客户来电做准备"><a href="#用例：为新客户来电做准备" class="headerlink" title="用例：为新客户来电做准备"></a><strong>用例：为新客户来电做准备</strong></h4><p>​您即将与潜在客户通话。这对您来说是一个全新的用例，您需要帮助准备通话。您需要初步研究方面的帮助，因此您访问 gemini.google.com，然后输入：</p><blockquote><p>为我起草一份定制脚本，供我在与潜在客户进行销售通话时遵循。通话将通过视频通话进行，并将持续 30 分钟。请确保在脚本中添加以下内容：[插入公司产品&#x2F;解决方案] 如何帮助解决潜在客户的痛点，[公司] 的交付系统如何保证无缝和及时交付，有竞争力的定价和批量折扣表，以及[客户行业] 行业中客户参考的空间。</p></blockquote><p>​现在您已经完成了初步研究，您可以将研究结果导出到新的 Google 文档中。您打开 Google 文档，以便继续工作。现在，您想要创建一个定制的推介。使用包含所有研究笔记的 Google 文档，您可以选择“帮助我撰写”来提示 Gemini in Docs。您输入：</p><blockquote><p>为 [产品名称] 生成电梯推介，并包括主要优势、竞争差异化点以及 [产品名称] 解决的痛点。</p></blockquote><p>​您的电梯推介和简短的谈话要点有一个很好的开端。您想利用这一点进一步预测客户电话的进展情况。您返回 gemini.google.com 继续会议准备。您输入：</p><blockquote><p>我即将与潜在客户通话。[用例] 对我来说是一个新的用例，我需要帮助准备通话。列出 [客户] 在销售电话中可能对我提出的最有可能的反对意见，并提出如何回应这些反对意见的建议。我在 [插入行业] 工作，我正在尝试销售 [产品]。还请提供如何处理异议的想法并建议回应方式。</p></blockquote><h3 id="8-3-3-业务发展经理"><a href="#8-3-3-业务发展经理" class="headerlink" title="8.3.3 业务发展经理"></a>8.3.3 业务发展经理</h3><h4 id="用例：培养关系、个性化推广和思想领导力"><a href="#用例：培养关系、个性化推广和思想领导力" class="headerlink" title="用例：培养关系、个性化推广和思想领导力"></a><strong>用例：培养关系、个性化推广和思想领导力</strong></h4><p>​您希望与在商业影响者社交活动中遇到的潜在客户建立更深层次的关系。您想要起草一个可以为多个联系人自定义的模板。您打开一个新的Google 文档，并通过选择“帮我写”提示 Docs 中的 Gemini。您输入：</p><blockquote><p>起草一份面向行业影响者的推广电子邮件模板。表达我们在 [活动] 上建立联系的感激之情，并提出合作机会，例如 [机会]。</p></blockquote><p>​在成功与潜在客户通话后，您希望跟进创始人可能感兴趣的思想领导力内容。您打开包含博客文章的 Google Doc，然后选择“帮助我撰写”，提示 Docs 中的 Gemini。您输入：</p><blockquote><p>以要点形式总结此博客内容，并提出三个后续问题的想法，以便我可以询问客户他们的想法。</p></blockquote><h4 id="用例：生成个性化的客户入职材料"><a href="#用例：生成个性化的客户入职材料" class="headerlink" title="用例：生成个性化的客户入职材料"></a><strong>用例：生成个性化的客户入职材料</strong></h4><p>​您已经入职了几个新的大客户，现在您想亲自感谢您的客户并查看是否还有其他可以提供的。您打开 Gmail 并选择“帮我写”以提示 Gmail 中的 Gemini。您输入：</p><blockquote><p>在 [客户] 与 [公司] 合作一周年之际，为其生成个性化电子邮件。感谢他们成为客户。询问他们是否有任何问题。包括有关 [其他产品] 的信息。</p></blockquote><p>​您还想向这些客户发送礼物，以祝贺他们建立新的合作伙伴关系。您打开 Google 表格，并通过选择“帮助我整理”提示 Gemini。您输入：</p><blockquote><p>给我一份要送给新客户的礼物清单，这些礼物价格低于 200 美元，可以邮寄到办公室。</p></blockquote><h1 id="结束-提高你的提示写作水平"><a href="#结束-提高你的提示写作水平" class="headerlink" title="结束. 提高你的提示写作水平"></a>结束. 提高你的提示写作水平</h1><p>本指南旨在提供灵感，但 Gemini for Google Workspace 的可能性几乎是无穷无尽的。尝试这些额外的技巧来提高您的即兴写作技能。</p><ul><li><strong>分解。</strong>如果您希望 Gemini for Workspace 执行多个相关任务，请将它们分解为单独的提示。</li><li><strong>给出约束。</strong>要生成特定结果，请在提示中包含详细信息，例如字符数限制或您想要生成的选项数量。</li><li><strong>分配角色。</strong>要鼓励创造力，请分配角色。您可以通过使用以下语言开始提示来做到这一点：“您是一家领先广告公司的创意部门负责人……”</li><li><strong>征求反馈。</strong>在您与 gemini.google.com 上的 Gemini 对话时，告诉它您正在给它一个项目，包括您拥有的所有细节和您所知道的一切，然后描述您想要的输出。通过提出以下问题继续对话：“您有什么问题可以问我，以帮助您提供最佳输出？”</li><li><strong>考虑语气。</strong>定制您的提示以适合您的目标受众和所需的内容语气。要求在输出中使用特定的语气，例如正式、非正式、技术、创意或随意。</li><li><strong>换一种说法。</strong>如果结果不符合您的预期或您认为还有改进空间，请微调您的提示。反复的审查和改进过程通常会产生更好的结果。</li></ul><blockquote><p>生成式人工智能及其所有可能性都令人兴奋，但它仍然是一个新事物。尽管我们的模型每天都在改进，但我们的提示有时会产生不可预测的响应。</p><p>在将 Gemini for Workspace 的输出付诸实践之前，请先对其进行检查，以确保其清晰度、相关性和准确性。当然，最重要的是要记住：生成式人工智能旨在帮助人类，但最终的输出属于您。</p><p>本指南中的示例提示仅用于说明目的。</p></blockquote><p>关注 workspace.google.com 和 workspace.google.com&#x2F;blog 了解最新动态</p><h1 id="下载链接"><a href="#下载链接" class="headerlink" title="下载链接"></a>下载链接</h1><p>官方原文：<a href="https://inthecloud.withgoogle.com/gemini-for-google-workspace-prompt-guide/dl-cd.html">https://inthecloud.withgoogle.com/gemini-for-google-workspace-prompt-guide/dl-cd.html</a></p><p>国内链接：<a href="https://www.lanzouj.com/iWtBQ28fqtbc">https://www.lanzouj.com/iWtBQ28fqtbc</a></p>]]></content:encoded>
      
      
      
      <category domain="https://log.660066.xyz/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/">大模型</category>
      
      <category domain="https://log.660066.xyz/tags/AI/">AI</category>
      
      
      <comments>https://log.660066.xyz/2024/11/14/google-prompting-guide-101/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>.git目录的解释【翻译】</title>
      <link>https://log.660066.xyz/2024/09/01/inside-git/</link>
      <guid>https://log.660066.xyz/2024/09/01/inside-git/</guid>
      <pubDate>Sat, 31 Aug 2024 16:22:52 GMT</pubDate>
      
      <description>.git目录的解释【翻译|非原创|文末已备注原文链接】</description>
      
      
      
      <content:encoded><![CDATA[<p>你好！本周我在 Mastodon 上发布了一个关于 <code>.git</code> 目录中内容的漫画，有人要求提供文本版本，所以就在这里。我还添加了一些额外的注释。首先，这是图片。它是对 <code>.git</code> 目录每个部分的约 15 个字的解释。</p><p><img src="/2024/09/01/inside-git/inside-git.png" alt="inside.git"></p><p>如果您想自己运行所有这些示例，可以“git clone <a href="https://github.com/jvns/inside-git%E2%80%9D%E3%80%82">https://github.com/jvns/inside-git”。</a></p><p>以下是目录：</p><ol><li>HEAD：.git&#x2F;head</li><li>分支：.git&#x2F;refs&#x2F;heads&#x2F;main</li><li>提交：.git&#x2F;objects&#x2F;10&#x2F;93da429…</li><li>树：.git&#x2F;objects&#x2F;9f&#x2F;83ee7550…</li><li>blobs：.git&#x2F;objects&#x2F;5a&#x2F;475762c…</li><li>reflog：.git&#x2F;logs&#x2F;refs&#x2F;heads&#x2F;main</li><li>远程跟踪分支：.git&#x2F;refs&#x2F;remotes&#x2F;origin&#x2F;main</li><li>标签：.git&#x2F;refs&#x2F;tags&#x2F;v1.0</li><li>存储：.git&#x2F;refs&#x2F;stash</li><li>.git&#x2F;config</li><li>钩子：.git&#x2F;hooks&#x2F;pre-commit</li><li>暂存区：.git&#x2F;index</li><li>这不是详尽无遗的</li><li>这并不是要完全解释 git</li></ol><p>前5个部分（HEAD、分支、提交、树、bols）是git的核心。</p><h3 id="HEAD-git-head"><a href="#HEAD-git-head" class="headerlink" title="HEAD: .git/head"></a>HEAD: <code>.git/head</code></h3><p><strong><code>HEAD</code><strong>是一个小文件，仅包含当前</strong>分支</strong>的名称。</p><p>示例内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cat .git/HEAD</span><br><span class="line">ref: refs/heads/main</span><br></pre></td></tr></table></figure><p>“HEAD”也可以是提交ID，称为“分离HEAD状态”。</p><h3 id="branch-git-refs-heads-main"><a href="#branch-git-refs-heads-main" class="headerlink" title="branch: .git/refs/heads/main"></a>branch: <code>.git/refs/heads/main</code></h3><p>A <strong>branch</strong> is stored as a tiny file that just contains 1 <strong>commit ID</strong>. It’s stored in a folder called <code>refs/heads</code>.</p><p><strong>分支</strong>存储为一个小文件，仅包含1<strong>提交ID</strong>。它存储在名为“refs&#x2F;heads”的文件夹中。</p><p>示例内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cat .git/refs/heads/main</span><br><span class="line">1093da429f08e0e54cdc2b31526159e745d98ce0</span><br></pre></td></tr></table></figure><h3 id="commit-git-objects-10-93da429"><a href="#commit-git-objects-10-93da429" class="headerlink" title="commit: .git/objects/10/93da429..."></a>commit: <code>.git/objects/10/93da429...</code></h3><p><strong>提交</strong>是一个小文件，包含其父文件、消息、<strong>树</strong>和作者。</p><p>示例内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git cat-file -p 1093da429f08e0e54cdc2b31526159e745d98ce0</span><br><span class="line">tree 9f83ee7550919867e9219a75c23624c92ab5bd83</span><br><span class="line">parent 33a0481b440426f0268c613d036b820bc064cdea</span><br><span class="line">author Julia Evans &lt;julia@example.com&gt; 1706120622 -0500</span><br><span class="line">committer Julia Evans &lt;julia@example.com&gt; 1706120622 -0500</span><br><span class="line"></span><br><span class="line">add hello.py</span><br></pre></td></tr></table></figure><p>这些文件是压缩的，查看对象的最佳方法是使用 <code>git cat-file -p HASH</code>.</p><h3 id="tree-git-objects-9f-83ee7550"><a href="#tree-git-objects-9f-83ee7550" class="headerlink" title="tree: .git/objects/9f/83ee7550..."></a>tree: <code>.git/objects/9f/83ee7550...</code></h3><p><strong>树</strong>是包含目录列表的小文件。其中的文件称为 <strong>blobs</strong>。</p><p>示例内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$  git cat-file -p 9f83ee7550919867e9219a75c23624c92ab5bd83</span><br><span class="line">100644 blob e69de29bb2d1d6434b8b29ae775ad8c2e48c5391.gitignore</span><br><span class="line">100644 blob 665c637a360874ce43bf74018768a96d2d4d219ahello.py</span><br><span class="line">040000 tree 24420a1530b1f4ec20ddb14c76df8c78c48f76a6lib</span><br></pre></td></tr></table></figure><p>这里的权限看起来像unix权限，但实际上它们是超级限制的，只允许644和755。</p><h3 id="blobs-git-objects-5a-475762c"><a href="#blobs-git-objects-5a-475762c" class="headerlink" title="blobs: .git/objects/5a/475762c..."></a>blobs: <code>.git/objects/5a/475762c...</code></h3><p><strong>blobs</strong> 是包含实际代码的文件</p><p>示例内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git cat-file -p 665c637a360874ce43bf74018768a96d2d4d219a</span><br><span class="line">print(&quot;hello world!&quot;)</span><br></pre></td></tr></table></figure><p>存储一个包含每一个更改的新blob可能会变得很大, 因此<code>git gc</code> 定期 <a href="https://codewords.recurse.com/issues/three/unpacking-git-packfiles">打包它们</a> 以提高 <code>.git/objects/pack</code>中的效率。</p><h3 id="reflog-git-logs-refs-heads-main"><a href="#reflog-git-logs-refs-heads-main" class="headerlink" title="reflog: .git/logs/refs/heads/main"></a>reflog: <code>.git/logs/refs/heads/main</code></h3><p>reflog存储每个分支、标签和HEAD的历史。 对于（大多数） <code>.git/refs</code>中的每个文件，.git&#x2F;logs&#x2F;refs&#96;中都有相应的日志。</p><p><code>main</code> 分支的示例内容:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ tail -n 1 .git/logs/refs/heads/main</span><br><span class="line">33a0481b440426f0268c613d036b820bc064cdea</span><br><span class="line">1093da429f08e0e54cdc2b31526159e745d98ce0</span><br><span class="line">Julia Evans &lt;julia@example.com&gt;</span><br><span class="line">1706119866 -0500</span><br><span class="line">commit: add hello.py</span><br></pre></td></tr></table></figure><p>reflog的每一行都有：</p><ul><li>提交之前&#x2F;之后ID</li><li>用户</li><li>时间戳</li><li>日志消息</li></ul><p>通常都是一行，为了可读性，我只是在这里将其包装起来。</p><h3 id="remote-tracking-branches-git-refs-remotes-origin-main"><a href="#remote-tracking-branches-git-refs-remotes-origin-main" class="headerlink" title="remote-tracking branches: .git/refs/remotes/origin/main"></a>remote-tracking branches: <code>.git/refs/remotes/origin/main</code></h3><p><strong>远程跟踪分支</strong>存储远程分支最近看到的 <strong>提交ID</strong>。</p><p>示例内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cat .git/refs/remotes/origin/main</span><br><span class="line">fcdeb177797e8ad8ad4c5381b97fc26bc8ddd5a2</span><br></pre></td></tr></table></figure><p>当git status显示“您与‘origin&#x2F;main’保持最新状态”时，它只是在查看这个。它经常过时，您可以使用<code>git fetch origin main</code>更新它。</p><h3 id="tags-git-refs-tags-v1-0"><a href="#tags-git-refs-tags-v1-0" class="headerlink" title="tags: .git/refs/tags/v1.0"></a>tags: <code>.git/refs/tags/v1.0</code></h3><p>标签是 <code>.git/refs/tags</code>中的一个小文件，包含提交ID。</p><p>示例内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cat .git/refs/tags/v1.0</span><br><span class="line">1093da429f08e0e54cdc2b31526159e745d98ce0</span><br></pre></td></tr></table></figure><p>与分支不同，当您进行新的提交时，它不会更新标签。</p><h3 id="the-stash-git-refs-stash"><a href="#the-stash-git-refs-stash" class="headerlink" title="the stash: .git/refs/stash"></a>the stash: <code>.git/refs/stash</code></h3><p>存储是一个名为 <code>.git/refs/stash</code> 的小文件。它包含运行 <code>git stash</code> 时创建的提交的提交 ID。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat .git/refs/stash</span><br><span class="line">62caf3d918112d54bcfa24f3c78a94c224283a78</span><br></pre></td></tr></table></figure><p>存储是一个堆栈，以前的值存储在 <code>.git/logs/refs/stash</code> 中（ <code>stash</code>的 reflog）。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat .git/logs/refs/stash</span><br><span class="line">62caf3d9 e85c950f Julia Evans &lt;julia@example.com&gt; 1706290652 -0500WIP on main: 1093da4 add hello.py</span><br><span class="line">00000000 62caf3d9 Julia Evans &lt;julia@example.com&gt; 1706290668 -0500WIP on main: 1093da4 add hello.py</span><br></pre></td></tr></table></figure><p>与分支和标签不同，如果您从存储中“git stash pop”提交，它将从引用日志中<strong>删除</strong>，因此几乎不可能再次找到它。存储是 git 中唯一一个在添加后很快就会被删除的引用日志。（分支引用日志中的条目也会过期，但通常仅在 90 天后）</p><p><strong>关于 ref 的说明：</strong></p><p>此时，您可能已经注意到，很多东西（分支、远程跟踪分支、标签和存储）都是 <code>.git/refs</code> 中的提交 ID。它们被称为“引用”或“refs”。每个 ref 都是一个提交 ID，但 git 对不同类型的 ref 的处理方式非常不同，因此，我发现分别考虑它们很有用，即使它们都使用相同的文件格式。例如，git 从存储引用日志中删除内容的方式与分支或标签引用日志不同。</p><h3 id="git-config"><a href="#git-config" class="headerlink" title=".git&#x2F;config"></a>.git&#x2F;config</h3><p><code>.git/config</code> 是存储库的配置文件。您可以在这里配置远程服务器。</p><p>示例内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[remote &quot;origin&quot;] </span><br><span class="line">url = git@github.com: jvns/int-exposed </span><br><span class="line">fetch = +refs/heads/*: refs/remotes/origin/* </span><br><span class="line">[branch &quot;main&quot;] </span><br><span class="line">remote = origin </span><br><span class="line">merge refs/heads/main</span><br></pre></td></tr></table></figure><p>git 有本地和全局设置，本地设置在这里，全局设置位于 <code>~/.gitconfig</code> 钩子中</p><h3 id="hooks-git-hooks-pre-commit"><a href="#hooks-git-hooks-pre-commit" class="headerlink" title="hooks: .git/hooks/pre-commit"></a>hooks: <code>.git/hooks/pre-commit</code></h3><p>钩子是可选脚本，您可以设置运行（例如在提交之前）来执行任何您想要的操作。</p><p>示例内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash </span><br><span class="line">any-commands-you-want</span><br></pre></td></tr></table></figure><p>（这显然不是一个真正的预提交钩子）</p><h3 id="the-staging-area-git-index"><a href="#the-staging-area-git-index" class="headerlink" title="the staging area: .git/index"></a>the staging area: <code>.git/index</code></h3><p>暂存区用于存储您准备提交的文件。这是一个二进制文件，与 git 中的许多本质上是纯文本文件的东西不同。</p><p>据我所知，查看索引内容的最佳方式是使用“git ls-files –stage”：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git ls-files --stage</span><br><span class="line">100644 e69de29bb2d1d6434b8b29ae775ad8c2e48c5391 0.gitignore</span><br><span class="line">100644 665c637a360874ce43bf74018768a96d2d4d219a 0hello.py</span><br><span class="line">100644 e69de29bb2d1d6434b8b29ae775ad8c2e48c5391 0lib/empty.py</span><br></pre></td></tr></table></figure><h3 id="这并不详尽"><a href="#这并不详尽" class="headerlink" title="这并不详尽"></a>这并不详尽</h3><p><code>.git</code> 中还有一些其他内容，例如 <code>FETCH_HEAD</code>、<code>worktrees</code> 和 <code>info</code>。我只包括了我认为有助于理解的内容。</p><h3 id="这并不是要完全解释-git"><a href="#这并不是要完全解释-git" class="headerlink" title="这并不是要完全解释 git"></a>这并不是要完全解释 git</h3><p>我听到的关于 git 最常见的建议之一是“只要了解 <code>.git</code> 目录的结构，你就会明白一切！”。</p><p>我比任何人都更喜欢了解事物的内部结构，但“.git 目录的结构”并没有解释很多东西，比如：</p><ul><li>merge和rebases如何工作以及它们可能出错的原因（例如，<a href="https://jvns.ca/blog/2023/11/06/rebasing-what-can-go-wrong-/">rebases可能出错的原因</a> 的列表）</li><li>您的同事究竟是如何使用 git 的，以及您应该遵循哪些准则才能成功地与他们合作</li><li>如何从其他存储库推送&#x2F;拉取代码</li><li>如何处理合并冲突</li></ul><p>但愿这对某些人有用。</p><h3 id="其他一些参考资料："><a href="#其他一些参考资料：" class="headerlink" title="其他一些参考资料："></a>其他一些参考资料：</h3><ul><li>James Coglan 的《<a href="https://shop.jcoglan.com/building-git/">building git</a>》一书（附注：看起来 <a href="https://mastodon.social/@jcoglan/111807463940323655">1 月剩余时间</a> 有 50% 的折扣）</li><li>mary rose cook 的《<a href="https://maryrosecook.com/blog/post/git-from-the-inside-out">git 从内而外</a>》</li><li>官方 <a href="https://git-scm.com/docs/gitrepository-layout#Documentation/gitrepository-layout.txt-index">git 存储库布局文档</a></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">本文为个人知识学习，非原创！非作者！如本博客有侵权行为，请与我联系。</span><br><span class="line">摘录以下文章，内容根据个人需求有所删减，尊重知识产出，尊重作者知识劳动成果。</span><br><span class="line"></span><br><span class="line">作者：Julia Evans.</span><br><span class="line">链接：https://jvns.ca/blog/2024/01/26/inside-git/</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      
      <category domain="https://log.660066.xyz/tags/%E5%BC%80%E5%8F%91%E7%BA%AA%E5%AE%9E/">开发纪实</category>
      
      
      <comments>https://log.660066.xyz/2024/09/01/inside-git/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>使用Ollama在Windows的CPU上运行大模型</title>
      <link>https://log.660066.xyz/2024/08/21/RunLLM-onCpuEnv-withOllama/</link>
      <guid>https://log.660066.xyz/2024/08/21/RunLLM-onCpuEnv-withOllama/</guid>
      <pubDate>Wed, 21 Aug 2024 02:41:55 GMT</pubDate>
      
      <description>使用Ollama在Windows的CPU上运行大模型</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="一、下载并按照Ollama"><a href="#一、下载并按照Ollama" class="headerlink" title="一、下载并按照Ollama"></a>一、下载并按照Ollama</h1><p><a href="https://ollama.com/">Ollama官网</a></p><p>本文以Windows平台为例，想必在Linux或者Mac上使用的同学不是很需要看这篇文章，基本都是有运维或编程基础的同学。</p><h2 id="1-1-下载"><a href="#1-1-下载" class="headerlink" title="1.1 下载"></a>1.1 下载</h2><p>Ollama的官网比较简洁，打开就能看到“Download”按钮，点击选择适合自己电脑的Ollama安装即可。</p><img src="/2024/08/21/RunLLM-onCpuEnv-withOllama/image-20240821141849416.png" alt="image-20240821141849416" style="zoom:50%;"><h2 id="1-2-安装"><a href="#1-2-安装" class="headerlink" title="1.2 安装"></a>1.2 安装</h2><ol><li><p>安装前，先配置一下Ollama的系统变量（在高级），变量名称为“OLLAMA_MODELS”，变量值自己找一个位置即可。</p><p><img src="/2024/08/21/RunLLM-onCpuEnv-withOllama/image-20240821142122499.png" alt="Ollama环境变量"></p><p>当然，如果你只有一个C盘，或者不需要考虑C盘剩余空间的话，就无需配置了。</p><p>这个路径，就是后面Ollama下载模型的路径，基本都是几百M起步，大的可能数十G。</p></li><li><p>安装Ollama，这一步没啥可讲的，无脑下一步即可。</p></li></ol><h2 id="1-3-检查是否安装成功"><a href="#1-3-检查是否安装成功" class="headerlink" title="1.3 检查是否安装成功"></a>1.3 检查是否安装成功</h2><p>首先运行命令窗口，输入ollama，如果命令无效，检查Ollama是否启动了，或者尝试重启系统，检查环境变量是否存在Ollama的安装路径等操作。</p><img src="/2024/08/21/RunLLM-onCpuEnv-withOllama/image-20240821142835564.png" alt="ollama" style="zoom: 67%;"><h1 id="二、下载模型-并-运行模型"><a href="#二、下载模型-并-运行模型" class="headerlink" title="二、下载模型 并 运行模型"></a>二、下载模型 并 运行模型</h1><h2 id="2-1-ollama官方模型库"><a href="#2-1-ollama官方模型库" class="headerlink" title="2.1 ollama官方模型库"></a>2.1 ollama官方模型库</h2><p><a href="https://ollama.com/library">https://ollama.com/library</a></p><p>需要啥模型，自己来找吧，根据自己电脑配置，尝试不同参数量的模型。</p><img src="/2024/08/21/RunLLM-onCpuEnv-withOllama/image-20240821143115786.png" alt="image-20240821143115786" style="zoom: 50%;"><h2 id="2-3-下载Qwen2-0-5b"><a href="#2-3-下载Qwen2-0-5b" class="headerlink" title="2.3 下载Qwen2:0.5b"></a>2.3 下载Qwen2:0.5b</h2><p>这里演示一下下载Qwen2的0.5b参数，这个模型小下的快，在一个我的ThinkPad太拉了，实在是不配跑更大的模型。</p><img src="/2024/08/21/RunLLM-onCpuEnv-withOllama/image-20240821143453681.png" alt="image-20240821143453681" style="zoom:50%;"><p>模型库找到Qwen2，选择0.5b，右侧会自动生成运行命令，直接在命令窗口运行即可。</p><img src="/2024/08/21/RunLLM-onCpuEnv-withOllama/image-20240821143612433.png" alt="image-20240821143612433" style="zoom: 67%;"><p>正在下载模型，下载完后会自动启动模型，这时候下载的数据，就会放到第一配好的环境变量路径上。</p><img src="/2024/08/21/RunLLM-onCpuEnv-withOllama/image-20240821143739085.png" alt="image-20240821143739085" style="zoom: 67%;"><p>这个回答属实是我没想到的，哈哈哈哈哈哈哈哈哈哈哈哈哈。但是我大约得体验了一下0.5b这个模型，感觉已经很不错了，毕竟才0.5b的参数量，剩下的就需要自己进行微调了。</p><h1 id="三、后文"><a href="#三、后文" class="headerlink" title="三、后文"></a>三、后文</h1><h2 id="3-1-ollama模型库不存在的模型"><a href="#3-1-ollama模型库不存在的模型" class="headerlink" title="3.1 ollama模型库不存在的模型"></a>3.1 ollama模型库不存在的模型</h2><p>其实本来我是想使用ollama来跑一下OpenBMB的miniCPM2.6，毕竟号称端侧比较厉害的大模型，没想到，下载以后，没有跑起来，因为现在Ollama官方还不支持miniCPM。</p><p>好消息是，Ollama官方近期应该会合并OpenBMB的分支，以支持miniCPM。如果你迫不及待的想尝试一下，可以自己去编译OpenBMB分支的Ollama。</p><p>这里附上地址:</p><ol><li><p>项目地址：<a href="https://github.com/OpenBMB/ollama/">https://github.com/OpenBMB/ollama/</a></p></li><li><p>部署教程：<a href="https://github.com/OpenBMB/ollama/blob/minicpm-v2.6/examples/minicpm-v2.6/README.md">https://github.com/OpenBMB/ollama/blob/minicpm-v2.6/examples/minicpm-v2.6/README.md</a></p></li></ol><h2 id="3-2-温馨提示"><a href="#3-2-温馨提示" class="headerlink" title="3.2 温馨提示"></a>3.2 温馨提示</h2><p>目前qwen2:0.5b模型在一些“特意”提示词的引导下，可能会生成不符合法律法规的内容，<strong>开发者在使用时，应特别注意！</strong></p><p>不分境外的大模型，可能会生成严重的政治错误内容，<strong>开发者在使用时，应特别注意！</strong></p><p>目前大陆境内，上线大模型公共服务，需要备案，也请<strong>开发者注意！</strong></p>]]></content:encoded>
      
      
      
      <category domain="https://log.660066.xyz/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/">大模型</category>
      
      <category domain="https://log.660066.xyz/tags/AI/">AI</category>
      
      
      <comments>https://log.660066.xyz/2024/08/21/RunLLM-onCpuEnv-withOllama/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>不解压zip修改zip压缩包内容</title>
      <link>https://log.660066.xyz/2024/08/06/noUnzipModifyContent/</link>
      <guid>https://log.660066.xyz/2024/08/06/noUnzipModifyContent/</guid>
      <pubDate>Tue, 06 Aug 2024 10:19:37 GMT</pubDate>
      
      <description>不解压zip修改zip压缩包内容</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="一、需求"><a href="#一、需求" class="headerlink" title="一、需求"></a>一、需求</h1><p>最近再开发过程中碰到一个问题，zip文件包中的一个文件内容存在不兼容的第三方依赖的数据，导致后续系统处理文件时，无法获取到准确的数据。</p><p>需求：在java代码中使用ZipInputStream，在不解压1.zip的情况下，将1.zip压缩包中的1.txt中的“我是谁”，替换为“我是大橙子”。</p><h1 id="二、实现步骤"><a href="#二、实现步骤" class="headerlink" title="二、实现步骤"></a>二、实现步骤</h1><ol><li>使用<code>ZipInputStream</code>读取ZIP文件。</li><li>遍历ZIP条目直到找到你想要修改的文件。</li><li>读取该文件的内容并进行替换。</li><li>使用<code>ZipOutputStream</code>创建一个新的ZIP文件。</li><li>将所有原始文件（除了被修改的那个）和修改后的文件写入新的ZIP文件。</li></ol><h1 id="三、实现代码"><a href="#三、实现代码" class="headerlink" title="三、实现代码"></a>三、实现代码</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.zip.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 原始ZIP文件路径</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">zipFilePath</span> <span class="operator">=</span> <span class="string">&quot;1.zip&quot;</span>;</span><br><span class="line">        <span class="comment">// 目标文件名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">targetFileName</span> <span class="operator">=</span> <span class="string">&quot;1.txt&quot;</span>;</span><br><span class="line">        <span class="comment">// 替换前和后的字符串</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">oldString</span> <span class="operator">=</span> <span class="string">&quot;我是谁&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">newString</span> <span class="operator">=</span> <span class="string">&quot;我是大橙子&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 新的ZIP文件路径</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">newZipFilePath</span> <span class="operator">=</span> <span class="string">&quot;2.zip&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> (<span class="type">ZipFile</span> <span class="variable">zipFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ZipFile</span>(zipFilePath);</span><br><span class="line">             <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(newZipFilePath);</span><br><span class="line">             <span class="type">ZipOutputStream</span> <span class="variable">zos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ZipOutputStream</span>(fos)) &#123;</span><br><span class="line"></span><br><span class="line">            Enumeration&lt;? <span class="keyword">extends</span> <span class="title class_">ZipEntry</span>&gt; entries = zipFile.entries();</span><br><span class="line">            <span class="keyword">while</span> (entries.hasMoreElements()) &#123;</span><br><span class="line">                <span class="type">ZipEntry</span> <span class="variable">entry</span> <span class="operator">=</span> entries.nextElement();</span><br><span class="line">                <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> zipFile.getInputStream(entry);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (entry.getName().equals(targetFileName)) &#123;</span><br><span class="line">                    <span class="comment">// 如果是目标文件，则读取内容并替换</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(readAllBytes(is), StandardCharsets.UTF_8);</span><br><span class="line">                    content = content.replace(oldString, newString);</span><br><span class="line">                    <span class="type">byte</span>[] updatedContent = content.getBytes(StandardCharsets.UTF_8);</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 创建新的ZipEntry</span></span><br><span class="line">                    <span class="type">ZipEntry</span> <span class="variable">newEntry</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ZipEntry</span>(entry.getName());</span><br><span class="line">                    zos.putNextEntry(newEntry);</span><br><span class="line">                    zos.write(updatedContent);</span><br><span class="line">                    zos.closeEntry();</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// 如果不是目标文件，则直接复制到新ZIP文件</span></span><br><span class="line">                    zos.putNextEntry(<span class="keyword">new</span> <span class="title class_">ZipEntry</span>(entry.getName()));</span><br><span class="line">                    <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">                    <span class="type">int</span> length;</span><br><span class="line">                    <span class="keyword">while</span> ((length = is.read(buffer)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                        zos.write(buffer, <span class="number">0</span>, length);</span><br><span class="line">                    &#125;</span><br><span class="line">                    zos.closeEntry();</span><br><span class="line">                &#125;</span><br><span class="line">                is.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">byte</span>[] readAllBytes(InputStream is) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">ByteArrayOutputStream</span> <span class="variable">baos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> length;</span><br><span class="line">        <span class="keyword">while</span> ((length = is.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            baos.write(buffer, <span class="number">0</span>, length);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> baos.toByteArray();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这段代码首先打开原始的ZIP文件，并创建一个新的ZIP文件。然后，它遍历ZIP文件中的每个条目，如果条目名称与要修改的文件名匹配，它会读取文件内容，执行字符串替换，并将更新后的内容写入新ZIP文件。对于其他文件，它们会被原封不动地复制到新ZIP文件中。</p><p>文件编码为UTF-8，如果文件使用了不同的编码，请相应地更改<code>StandardCharsets.UTF_8</code>。</p>]]></content:encoded>
      
      
      
      <category domain="https://log.660066.xyz/tags/%E5%BC%80%E5%8F%91%E7%BA%AA%E5%AE%9E/">开发纪实</category>
      
      
      <comments>https://log.660066.xyz/2024/08/06/noUnzipModifyContent/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>【Datawhale AI 夏令营】Task4-上分加油站</title>
      <link>https://log.660066.xyz/2024/08/02/datawhale-task4-appendix/</link>
      <guid>https://log.660066.xyz/2024/08/02/datawhale-task4-appendix/</guid>
      <pubDate>Fri, 02 Aug 2024 15:35:08 GMT</pubDate>
      
      <description>【Datawhale AI 夏令营】Task4-上分加油站</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="一、优化思路"><a href="#一、优化思路" class="headerlink" title="一、优化思路"></a>一、优化思路</h1><ol><li><p>训练＆微调模型提升解决逻辑推理问题的能力。</p></li><li><p>使用各种prompt工程、agent系统方案，达到模型解决逻辑推理问题的能力边界。</p></li></ol><h1 id="二、prompt（提示词工程）"><a href="#二、prompt（提示词工程）" class="headerlink" title="二、prompt（提示词工程）"></a>二、prompt（提示词工程）</h1><h2 id="2-1-什么是prompt"><a href="#2-1-什么是prompt" class="headerlink" title="2.1 什么是prompt"></a>2.1 什么是prompt</h2><p>在交互式任务中给定的初始文本或输入，用来引导模型生成特定类型的输出。</p><p>例如，在一个对话系统中，用户提出的问题就是prompt，模型根据这个prompt生成回答。prompt可以是一个句子、一个段落或任何文本序列，模型基于这个prompt继续生成后续的文本。优化prompt通常意味着调整或设计更有效的输入，以引导模型产生更准确、更相关或更高质量的输出。</p><h2 id="2-2-优化prompt"><a href="#2-2-优化prompt" class="headerlink" title="2.2 优化prompt"></a>2.2 优化prompt</h2><blockquote><p>[!NOTE]</p><ul><li><strong>增加上下文信息</strong>：提供更多的背景信息可以帮助模型理解prompt的意图。</li><li><strong>明确性</strong>：确保prompt清晰无歧义，减少模型理解错误的可能性。</li><li><strong>引导性</strong>：使用特定的关键词或短语来引导模型朝向预期的方向生成文本。</li></ul></blockquote><ol><li><p>明确和具体化</p><ul><li><p><strong>清晰表述</strong>：确保prompt清晰、直接，避免模糊不清的表述，这样可以减少模型误解的可能性。</p></li><li><p><strong>具体实例</strong>：提供具体的示例或上下文，帮助模型更好地理解任务要求。例如，在生成文章摘要时，可以先给出一两句话的摘要示例，然后让模型继续生成。</p></li></ul></li><li><p>提供指导性的指令</p><ul><li><p><strong>指令明确</strong>：在prompt中明确指出你希望模型执行的操作。例如，“请总结下面的文章”，而不是“做点什么”。</p></li><li><p><strong>格式指引</strong>：指定输出格式，比如“以项目符号列表的形式列出”或“使用正式的语言回答”。</p></li></ul></li><li><p>使用示例</p><ul><li><p><strong>包含样本</strong>：在prompt中加入一些样例输入和对应的期望输出，帮助模型理解模式或格式。</p></li><li><p><strong>逐步引导</strong>：通过一系列由简到繁的示例，逐步引导模型学习更复杂的任务。</p></li></ul></li><li><p>调整长度和复杂度</p><ul><li><p><strong>适当长度</strong>：根据任务需求调整prompt的长度，太长可能导致模型无法抓住重点，太短可能缺乏必要的信息。</p></li><li><p><strong>控制复杂度</strong>：避免过于复杂或冗余的信息，这可能会混淆模型。</p></li></ul></li><li><p>引导模型的思维方式</p><ul><li><p><strong>逻辑推理</strong>：如果需要模型进行逻辑推理，可以在prompt中引入假设情景或逻辑问题。</p></li><li><p><strong>情感色彩</strong>：对于需要特定情感色彩的文本生成，如写作或评论，可以在prompt中设定情感基调。</p></li></ul></li><li><p>测试和迭代</p><ul><li><p><strong>A&#x2F;B测试</strong>：对不同版本的prompt进行对比测试，看哪个版本的输出质量更高。</p></li><li><p><strong>持续优化</strong>：根据模型的反馈和输出，不断调整prompt，直到达到满意的输出为止。</p></li></ul></li><li><p>避免偏见和敏感话题</p><ul><li><p><strong>检查偏见</strong>：确保prompt没有隐含的偏见，避免引导模型生成有偏见的回答。</p></li><li><p><strong>敏感话题</strong>：避免提及可能引起争议或不适的话题，确保输出的安全性和适宜性。</p></li></ul></li></ol><h1 id="三、agent（智能体）"><a href="#三、agent（智能体）" class="headerlink" title="三、agent（智能体）"></a>三、agent（智能体）</h1><h2 id="3-1-什么是agent"><a href="#3-1-什么是agent" class="headerlink" title="3.1 什么是agent"></a>3.1 什么是agent</h2><p>能够感知环境并采取行动以影响该环境的实体。</p><p>在大模型技术中，一个agent可能是一个自动化的程序，如聊天机器人，它可以根据用户的输入（即prompt）生成响应。</p><p>在强化学习的背景下，agent的目标是找到一个最优策略，使得在长期的交互中，累积的奖励最大。这就像是你玩游戏时，想要通过不断练习和学习，找到最有效的打法，以便在游戏中获得尽可能高的总分。</p><h2 id="3-2-优化agent"><a href="#3-2-优化agent" class="headerlink" title="3.2 优化agent"></a>3.2 优化agent</h2><blockquote><p>[!NOTE]</p><ul><li><strong>模型架构的改进</strong>：使用更复杂的神经网络结构，比如Transformer，以提高模型的表达能力。</li><li><strong>数据增强</strong>：增加训练数据的多样性和数量，使模型更加鲁棒。</li><li><strong>算法优化</strong>：改进训练算法，如采用不同的损失函数、优化器或正则化技术，以提升模型的泛化能力。</li><li><strong>超参数调优</strong>：调整学习率、批次大小等超参数，找到最佳配置。</li></ul></blockquote><ol><li><p>模型架构调整</p><ul><li><p><strong>神经网络深度与宽度</strong>：增加或减少神经网络层数（深度）和每层神经元数量（宽度），寻找最佳的网络架构。</p></li><li><p><strong>正则化技术</strong>：使用如Dropout、L1&#x2F;L2正则化等技术防止过拟合。</p></li></ul></li><li><p>算法选择与参数调优</p><ul><li><p><strong>强化学习算法</strong>：选择合适的RL算法，如Q-Learning、Deep Q-Networks (DQN)、Policy Gradients、Proximal Policy Optimization (PPO)等，并调整其超参数。</p></li><li><p><strong>探索与利用平衡</strong>：调整探索率（exploration rate），如ε-greedy策略中的ε值，以找到探索未知状态与利用已知最优行为之间的平衡。</p></li></ul></li><li><p>经验回放与数据增强</p><ul><li><p><strong>经验回放（Experience Replay）</strong>：使用历史交互数据训练代理，打破数据的相关性，提高学习效率。</p></li><li><p><strong>数据增强</strong>：通过数据增强技术增加训练集的多样性，帮助代理泛化到未见过的情况。</p></li></ul></li><li><p>多任务学习与迁移学习</p><ul><li><p><strong>多任务学习</strong>：同时解决多个相关任务，共享学习到的知识，提高学习效率和泛化能力。</p></li><li><p><strong>迁移学习</strong>：从一个已经解决的任务中学习到的知识迁移到新的相关任务上，加速新任务的学习。</p></li></ul></li><li><p>分布式与并行计算</p><ul><li><p><strong>分布式训练</strong>：使用多个处理器或机器并行训练代理，加快训练速度。</p></li><li><p><strong>异步更新</strong>：在多个环境中并行收集经验，异步更新代理的参数，如A3C算法。</p></li></ul></li><li><p>模型解释与可解释性</p><ul><li><p><strong>解释性增强</strong>：开发技术使代理的决策过程更加透明，便于理解和调试。</p></li><li><p><strong>基于规则的约束</strong>：结合领域知识，为代理添加硬编码规则或限制，以避免不合理的行为。</p></li></ul></li><li><p>持续学习与在线学习</p><ul><li><p><strong>持续学习</strong>：使代理能够随着时间和新数据的出现持续学习和适应，避免灾难性遗忘。</p></li><li><p><strong>在线学习</strong>：代理在实际环境中实时学习，无需重新训练整个模型。</p></li></ul></li><li><p>评估与监控</p><ul><li><p><strong>性能指标</strong>：定义合适的性能指标来评估代理的表现，如累积奖励、成功完成任务的频率等。</p></li><li><p><strong>实时监控</strong>：实施监控机制，及时发现和纠正代理的异常行为。</p></li></ul></li><li><p>模拟与预训练</p><ul><li><p><strong>模拟环境</strong>：在高保真的模拟环境中预训练代理，降低现实世界中的试错成本。</p></li><li><p><strong>预训练与微调</strong>：使用预训练模型作为起点，针对特定任务进行微调，加速学习过程。</p></li></ul></li></ol><h1 id="四、相关资料"><a href="#四、相关资料" class="headerlink" title="四、相关资料"></a>四、相关资料</h1><p>lora相关微调的方案一览：</p><p><a href="https://blog.csdn.net/deephub/article/details/136735670">https://blog.csdn.net/deephub/article/details/136735670</a></p><p>pfet库，也介绍了很多微调的方法：</p><p><a href="https://huggingface.co/docs/peft/conceptual_guides/adapter">https://huggingface.co/docs/peft/conceptual_guides/adapter</a></p><p>agent学习链接：</p><p><a href="https://github.com/datawhalechina/hugging-multi-agent">https://github.com/datawhalechina/hugging-multi-agent</a></p><p>面向开发者的大模型手册：</p><p><a href="https://github.com/datawhalechina/llm-cookbook/tree/main">https://github.com/datawhalechina/llm-cookbook/tree/main</a></p>]]></content:encoded>
      
      
      
      <category domain="https://log.660066.xyz/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/">大模型</category>
      
      <category domain="https://log.660066.xyz/tags/AI/">AI</category>
      
      <category domain="https://log.660066.xyz/tags/Datawhale/">Datawhale</category>
      
      
      <comments>https://log.660066.xyz/2024/08/02/datawhale-task4-appendix/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>【Datawhale AI 夏令营】Task3-模型微调</title>
      <link>https://log.660066.xyz/2024/07/31/datawhale-task3-fine-tuning/</link>
      <guid>https://log.660066.xyz/2024/07/31/datawhale-task3-fine-tuning/</guid>
      <pubDate>Wed, 31 Jul 2024 06:03:28 GMT</pubDate>
      
      <description>【Datawhale AI 夏令营】Task3-模型微调</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="一、微调"><a href="#一、微调" class="headerlink" title="一、微调"></a>一、微调</h1><h2 id="1-1-什么是微调"><a href="#1-1-什么是微调" class="headerlink" title="1.1 什么是微调"></a>1.1 什么是微调</h2><p>在预训练模型的基础上，针对特定任务或数据集进行进一步的训练，以适应更具体的应用场景。</p><h2 id="1-2-微调的意义"><a href="#1-2-微调的意义" class="headerlink" title="1.2 微调的意义"></a>1.2 微调的意义</h2><ol><li><strong>上下文理解提升</strong>：使用的特定数据集可以帮助模型更好地理解特定任务的上下文，从而在推理时能够考虑到更多的相关信息和细节。</li><li><strong>性能优化</strong>：使其在处理该任务时达到更高的准确率和更低的错误率。这对于需要高可靠性和准确性的推理任务尤为重要。</li><li><strong>减少数据需求</strong>：对于一些数据稀缺的领域或任务，微调可以在相对较少的数据量下实现较好的性能提升，因为模型已经具备了大量的通用语言知识。</li><li><strong>适应性增强</strong>：微调使模型能够更好地适应特定用户或场景的需求，提供更加个性化和定制化的推理服务。</li></ol><h1 id="二、LoRa"><a href="#二、LoRa" class="headerlink" title="二、LoRa"></a>二、LoRa</h1><h2 id="2-1-什么是LoRa"><a href="#2-1-什么是LoRa" class="headerlink" title="2.1 什么是LoRa"></a>2.1 什么是LoRa</h2><p>LoRA（Low-Rank Adaptation）微调是一种高效的模型微调技术，特别适用于大型预训练语言模型的适应性调整。LoRA的核心思想是通过引入低秩矩阵来调整模型的权重，从而在不显著增加模型参数数量的情况下，实现对模型的微调。</p><p>通俗点说就是，在原有的权重矩阵之外，增加一组更小的矩阵，这些矩阵可以视为对原有权重的小幅调整。这些调整矩阵（低秩矩阵）可以以较小的成本学习到新任务的特定模式，而无需改变预训练模型的大部分权重。</p><h2 id="2-2-LoRa的优势"><a href="#2-2-LoRa的优势" class="headerlink" title="2.2 LoRa的优势"></a>2.2 LoRa的优势</h2><ul><li><p>可以针对不同的下游任务构建小型 LoRA 模块，从而在共享预训练模型参数基础上有效地切换下游任务。</p></li><li><p>LoRA 使用自适应优化器（Adaptive Optimizer），不需要计算梯度或维护大多数参数的优化器状态，训练更有效、硬件门槛更低。</p></li><li><p>LoRA 使用简单的线性设计，在部署时将可训练矩阵与冻结权重合并，不存在推理延迟。</p></li><li><p>LoRA 与其他方法正交，可以组合。</p></li></ul><h2 id="2-3-LoRa原理"><a href="#2-3-LoRa原理" class="headerlink" title="2.3 LoRa原理"></a>2.3 LoRa原理</h2><p><img src="/2024/07/31/datawhale-task3-fine-tuning/image-20240801230819863.png" alt="image-20240801230819863"></p><h2 id="2-4-通俗易懂"><a href="#2-4-通俗易懂" class="headerlink" title="2.4 通俗易懂"></a>2.4 通俗易懂</h2><p>想象一下，有一个非常复杂的拼图，拼图代表了一个预训练好的大型语言模型。拼图已经完成，而且做得非常好，它能够识别和理解各种语言模式和语义。但是，当你需要这个拼图适应一个新的场景或任务时，比如说要它理解一种特殊的行业术语或者特定的文化背景，你不想打乱整个拼图，因为那会破坏它原有的功能和性能。</p><p>LoRA就像是为这个拼图添加了几块额外的、可移动的小拼图。这些小拼图被设计成可以插在原拼图的某些部分上，改变那些部分的功能，但不会影响整个拼图的完整性和稳定性。这些小拼图是专门定制的，它们只需要学习如何适应新任务，而不是整个模型的所有部分。</p><h2 id="2-5-后话"><a href="#2-5-后话" class="headerlink" title="2.5 后话"></a>2.5 后话</h2><p>跟着相关的参考资料，目前我个人的理解是LoRa就是使用模型和部分数据，来生成一个小模型，然后将小模型整合进大模型中。使大模型对特定数据的更好的理解和处理。</p><p>感觉通过LoRa进行微调，是可以满足开源模型服务实际业务需求的。所以后面打算继续学习一下LoRa的使用，也会将相关的学习记录在本博客下。</p><h1 id="三、vllm加速"><a href="#三、vllm加速" class="headerlink" title="三、vllm加速"></a>三、vllm加速</h1><h2 id="3-1-vllm"><a href="#3-1-vllm" class="headerlink" title="3.1 vllm"></a>3.1 vllm</h2><p>[vLLM（Virtual Large Language Model）是一个由伯克利大学LMSYS组织开源的大规模语言模型高速推理框架。它的设计目标是在实时应用场景中大幅提升语言模型服务的吞吐量和内存使用效率。vLLM的特点包括易于使用、与Hugging Face等流行工具无缝集成以及高效的性能。</p><h2 id="3-2-vllm的用途"><a href="#3-2-vllm的用途" class="headerlink" title="3.2 vllm的用途"></a>3.2 vllm的用途</h2><p>主要用来加速大模型的文本生成过程。当涉及到长文本生成或需要处理大量输入时，大模型的计算成本较高（好像主要是电费，跟挖矿的了）。</p><p>vllm通过优化模型的推理流程，来解决大模型的实时部署和高性能生成。</p><h2 id="3-3-vllm使用步骤"><a href="#3-3-vllm使用步骤" class="headerlink" title="3.3 vllm使用步骤"></a>3.3 vllm使用步骤</h2><ol><li>安装vllm库。</li><li>加载预训练的模型和配置。</li><li>配置vllm参数，如批量大小、最大序列长度等。</li><li>调用vllm的API进行文本生成。</li></ol><h2 id="3-4-通俗易懂"><a href="#3-4-通俗易懂" class="headerlink" title="3.4 通俗易懂"></a>3.4 通俗易懂</h2><p>想象一下，你正在玩一个数独，比较复杂，每次你填下一个数后，可能会影响后续所有可能的选择。如果你每次都要重新思考所有可能的后续选项，非常耗时。vllm就像一个聪明的游戏助手，它会记住你已经填过的数，并且只给你接下来合理的几个选项，这样你就不用考虑那些明显不合适的数，从而大大加快了游戏的速度。</p><p>vllm根据已经生成的文本动态调整生成的词汇范围，从而加速了文本生成的过程。</p><h1 id="四、多路LLM投票"><a href="#四、多路LLM投票" class="headerlink" title="四、多路LLM投票"></a>四、多路LLM投票</h1><h2 id="4-1-什么是多路LLM投票"><a href="#4-1-什么是多路LLM投票" class="headerlink" title="4.1 什么是多路LLM投票"></a>4.1 什么是多路LLM投票</h2><p>即多模型融合或模型集成，是一种在多个大模型之间采用决策融合策略的方法，用于提高预测的准确性和稳定性。</p><p>这种方法在机器学习和深度学习领域中很常见，尤其在面对复杂或高风险的应用场景时，比如自动驾驶、医疗诊断或金融预测等。</p><h2 id="4-2-Baseline中的实现"><a href="#4-2-Baseline中的实现" class="headerlink" title="4.2 Baseline中的实现"></a>4.2 Baseline中的实现</h2><p>其实看到讲义中写的实现逻辑（通过三次结果推理，将选择答案最多的结果作为最终结果），我突然就想起了一个区块链的共识机制——拜占庭算法。与之类似，大概得意思就是，少数服从多数。</p><h1 id="五、后续"><a href="#五、后续" class="headerlink" title="五、后续"></a>五、后续</h1><p>到目前为止，感觉有开源模型及其开源生态的加持，大模型的开发和应用，对于一般企业来说不是什么太难的事，重点就是在微调和量化上。微调能解决模型服务于业务需求。而量化可以解决，在较低性能的机器上运行大模型。</p><p>个人感觉，大模型在AI领域近几年很流行，也比较趋于成熟化了。但是训练数据，运行环境要求还是不太完美。感觉后面肯定会有更好的解决方案，也会从大模型这一块衍生出更多新的AI技术。</p><p>本Task所需文件：</p><p><a href="https://www.modelscope.cn/datasets/Datawhale/DW2024_Complex_reasoning_ability_assessment_qwen2-7b-lora">https://www.modelscope.cn/datasets/Datawhale/DW2024_Complex_reasoning_ability_assessment_qwen2-7b-lora</a></p>]]></content:encoded>
      
      
      
      <category domain="https://log.660066.xyz/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/">大模型</category>
      
      <category domain="https://log.660066.xyz/tags/AI/">AI</category>
      
      <category domain="https://log.660066.xyz/tags/Datawhale/">Datawhale</category>
      
      
      <comments>https://log.660066.xyz/2024/07/31/datawhale-task3-fine-tuning/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>【Datawhale AI 夏令营】Task2-精读baseline</title>
      <link>https://log.660066.xyz/2024/07/30/datawhale-task2-read-baseline/</link>
      <guid>https://log.660066.xyz/2024/07/30/datawhale-task2-read-baseline/</guid>
      <pubDate>Tue, 30 Jul 2024 14:19:27 GMT</pubDate>
      
      <description>【Datawhale AI 夏令营】Task1-精读baseline</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="一、提示工程-Prompt-Engineering"><a href="#一、提示工程-Prompt-Engineering" class="headerlink" title="一、提示工程(Prompt Engineering)"></a>一、提示工程(Prompt Engineering)</h1><h2 id="1-1-关键概念"><a href="#1-1-关键概念" class="headerlink" title="1.1 关键概念"></a>1.1 关键概念</h2><ol><li>Prompt（提示）：给定的一段文本或指令，用于启动或引导AI模型响应。</li><li>Prompt Design（提示设计）：设计良好的提示，目的是帮助模型更好理解输入的内容。</li><li>Few-shot Learning（少样本学习）：提供给模型几个示例，让模型学习并应用于新的任务或数据点上。</li><li>Zero-shot Learning（零样本学习）：不提供任何示例，仅通过明确的指令或描述来引导模型完成任务。</li><li>In-context Learning（基于上下文的学习）：利用直接在提示中提供的上下文信息来进行学习和推理。</li><li>Chain-of-thought Prompting（思维链提示）：通过在提示中加入中间步骤或思考过程来引导模型产生更复杂的推理和回答。</li></ol><h2 id="1-2-示例"><a href="#1-2-示例" class="headerlink" title="1.2 示例"></a>1.2 示例</h2><h3 id="1-2-1-输入问题"><a href="#1-2-1-输入问题" class="headerlink" title="1.2.1 输入问题"></a>1.2.1 输入问题</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&#x27;problem&#x27;</span>: </span><br><span class="line">        <span class="string">&#x27;有一群人和一些食物类型。下列是关于这些个体和食物的已知信息：\n\n1. 鸡肉是一种食物。\n2. 苹果是一种食物。\n3. 如果X吃了Y，且X活着，则Y是一种食物。\n4. Bill存活。\n5. Bill吃了花生。\n6. John吃所有食物。\n7. Sue吃所有Bill吃的食物。\n8. John喜欢所有食物。\n\n根据以上信息，回答以下选择题：&#x27;</span>, </span><br><span class="line">   <span class="string">&#x27;questions&#x27;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="string">&#x27;question&#x27;</span>: <span class="string">&#x27;选择题 1：\n谁喜欢吃花生？&#x27;</span>, </span><br><span class="line">        <span class="string">&#x27;options&#x27;</span>: [<span class="string">&#x27;Bill&#x27;</span>, <span class="string">&#x27;Sue&#x27;</span>, <span class="string">&#x27;John&#x27;</span>, <span class="string">&#x27;None of the above&#x27;</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    ], <span class="string">&#x27;id&#x27;</span>: <span class="string">&#x27;round1_test_data_000&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-2-2-转化"><a href="#1-2-2-转化" class="headerlink" title="1.2.2 转化"></a>1.2.2 转化</h3><p>上面的问题字典转化为MD格式的prompt</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">你是一个逻辑推理专家，擅长解决逻辑推理问题。以下是一个逻辑推理的题目，形式为单项选择题。所有的问题都是（close-world assumption）闭世界假设，即未观测事实都为假。请逐步分析问题并在最后一行输出答案，最后一行的格式为&quot;答案是：A&quot;。题目如下：</span><br><span class="line"></span><br><span class="line"><span class="section">###题目:</span></span><br><span class="line">有一群人和一些食物类型。下列是关于这些个体和食物的已知信息：</span><br><span class="line"></span><br><span class="line">鸡肉是一种食物。</span><br><span class="line">苹果是一种食物。</span><br><span class="line">如果X吃了Y，且X活着，则Y是一种食物。</span><br><span class="line">Bill存活。</span><br><span class="line">Bill吃了花生。</span><br><span class="line">John吃所有食物。</span><br><span class="line">Sue吃所有Bill吃的食物。</span><br><span class="line">John喜欢所有食物。</span><br><span class="line"></span><br><span class="line">根据以上信息，回答以下选择题：</span><br><span class="line"></span><br><span class="line"><span class="section">###问题:</span></span><br><span class="line">选择题 1：</span><br><span class="line">谁喜欢吃花生？</span><br><span class="line">A. Bill</span><br><span class="line">B. Sue</span><br><span class="line">C. John</span><br><span class="line">D. None of the above</span><br></pre></td></tr></table></figure><ol><li><p>我们看到上述生成的prompt，首先告诉了模型，你要”作为“什么，然后”干“什么。(贫僧从东土大唐来，前往西天拜佛求经)</p><ul><li><p>作为什么：主要是让模型，把自己认为是那方面的专家。</p></li><li><p>干什么：尽可能详细的告诉模型，你干什么事（分析问题、最后一行输入答案），有什么限制（例如上述题目是单选题、所有题目都是闭世界假设、最后一行的格式）</p></li></ul></li><li><p>“预防针”打完了，就要步入正题了。告诉大模型题目是什么，问题是什么，选项有哪些。</p></li></ol><h3 id="1-2-3-大模型响应"><a href="#1-2-3-大模型响应" class="headerlink" title="1.2.3 大模型响应"></a>1.2.3 大模型响应</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;status_code&quot;</span><span class="punctuation">:</span> <span class="number">200</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;request_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;18d43478-2aec-92be-8840-cd3bb08009cf&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;output&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;finish_reason&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;choices&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;finish_reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;stop&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;assistant&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;我们可以通过分析给出的信息来解答这个问题。\n\n首先，我们知道Bill吃了花生（根据第5条信息），并且Bill还活着（根据第4条信息）。根据第3条规则，“如果X吃了Y，且X活着，则Y是一种食物”，我们可以推断出花生是一种食物。\n\n接下来，我们知道John吃所有食物（根据第6条信息），并且John喜欢所有食物（根据第8条信息）。既然花生是一种食物，那么John应该也吃花生，并且喜欢花生。\n\nSue吃所有Bill吃的食物（根据第7条信息），既然Bill吃了花生，那么Sue也应该吃花生。\n\n所以，喜欢吃花生的人有Bill、Sue和John。\n\n答案是：C. John\n\n但是，题目要求选择一个选项，而实际上Bill、Sue和John都喜欢吃花生。然而，在给出的选项中，只有John被明确列出作为喜欢吃花生的人（选项C）。因此，虽然Bill和Sue也喜欢吃花生，但根据题目要求，正确答案应当是包含在选项中的那个，即John。\n\n答案是：C. John&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;usage&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;input_tokens&quot;</span><span class="punctuation">:</span> <span class="number">210</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;output_tokens&quot;</span><span class="punctuation">:</span> <span class="number">223</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;total_tokens&quot;</span><span class="punctuation">:</span> <span class="number">433</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>我们可以看到，output.choices.message.content中的模型响应，首先分析了上述题目中的信息，在分析过程中，解答出了三个答案。</p><p>根据我们提示中说到的，“题目是单选题”，模型又继续推理出了更准确的一个答案。根据提示要求，将答案输出在了最后一行。</p><h1 id="二、代码阅读"><a href="#二、代码阅读" class="headerlink" title="二、代码阅读"></a>二、代码阅读</h1><h2 id="2-1-前言"><a href="#2-1-前言" class="headerlink" title="2.1 前言"></a>2.1 前言</h2><p>baseline共分为了两部分。</p><p>第一部分：借助Qwen的API，进行问题的推理。</p><p>第二部分：因各种原因，导致Qwen没有推理出来的答案进行纠正和容错。</p><img src="/2024/07/30/datawhale-task2-read-baseline/image-20240730225012884.png" alt="image-20240730225012884" style="zoom: 67%;"><p>偷个懒吧。直接从讲义中拷贝过来。</p><p>我目前是在职的Java开发，略懂点前端开发。python也能看懂，但仅停留在能看懂，上次接触python还是大二那年，过去也有个三四年了。</p><h2 id="2-2-问题推理"><a href="#2-2-问题推理" class="headerlink" title="2.2 问题推理"></a>2.2 问题推理</h2><h3 id="2-2-1-call-qwen-api"><a href="#2-2-1-call-qwen-api" class="headerlink" title="2.2.1 call_qwen_api"></a>2.2.1 call_qwen_api</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">call_qwen_api</span>(<span class="params">MODEL_NAME, query</span>):</span><br><span class="line">    <span class="comment"># 这里采用dashscope的api调用模型推理，通过http传输的json封装返回结果</span></span><br><span class="line">    messages = [</span><br><span class="line">        &#123;<span class="string">&#x27;role&#x27;</span>: <span class="string">&#x27;user&#x27;</span>, <span class="string">&#x27;content&#x27;</span>: query&#125;]</span><br><span class="line">    response = dashscope.Generation.call(</span><br><span class="line">        MODEL_NAME,</span><br><span class="line">        messages=messages,</span><br><span class="line">        result_format=<span class="string">&#x27;message&#x27;</span>,  <span class="comment"># 将结果设置为消息格式。</span></span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">if</span> response.status_code == HTTPStatus.OK:</span><br><span class="line">        <span class="built_in">print</span>(response)</span><br><span class="line">        <span class="keyword">return</span> response[<span class="string">&#x27;output&#x27;</span>][<span class="string">&#x27;choices&#x27;</span>][<span class="number">0</span>][<span class="string">&#x27;message&#x27;</span>][<span class="string">&#x27;content&#x27;</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Request id: %s, Status code: %s, error code: %s, error message: %s&#x27;</span> % (</span><br><span class="line">            response.request_id, response.status_code,</span><br><span class="line">            response.code, response.message</span><br><span class="line">        ))</span><br><span class="line">        <span class="keyword">raise</span> Exception()</span><br></pre></td></tr></table></figure><p>这段代码主要就是调用Qwen的api。</p><p>dashscope是阿里模型服务灵积的一个包吧。通过这个包，可以边界的调用，阿里云上的模型服务，进行推理等操作。其实说简单点，就是个SDK，阿里云将模型部署好，开发了个SDK，方便我们调用。具体的其他用法，可以参考官网的<a href="https://help.aliyun.com/zh/dashscope/">开发文档</a></p><p>我们继续往下看这段代码，如果调用返回状态为OK。那么将模型的对题目的响应返回出去。</p><p>如果状态不是OK，那么，就打印错误日志，抛出异常。</p><h3 id="2-2-2-api-retry"><a href="#2-2-2-api-retry" class="headerlink" title="2.2.2 api_retry"></a>2.2.2 <strong>api_retry</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">api_retry</span>(<span class="params">MODEL_NAME, query</span>):</span><br><span class="line">    <span class="comment"># 最大尝试次数</span></span><br><span class="line">    max_retries = <span class="number">5</span></span><br><span class="line">    <span class="comment"># 再次尝试等待时间</span></span><br><span class="line">    retry_delay = <span class="number">60</span>  <span class="comment"># in seconds</span></span><br><span class="line">    attempts = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> attempts &lt; max_retries:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">return</span> call_qwen_api(MODEL_NAME, query)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            attempts += <span class="number">1</span>   </span><br><span class="line">            <span class="keyword">if</span> attempts &lt; max_retries:</span><br><span class="line">                logger.warning(<span class="string">f&quot;Attempt <span class="subst">&#123;attempts&#125;</span> failed for text: <span class="subst">&#123;query&#125;</span>. Retrying in <span class="subst">&#123;retry_delay&#125;</span> seconds...&quot;</span>)</span><br><span class="line">                time.sleep(retry_delay)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                logger.error(<span class="string">f&quot;All <span class="subst">&#123;max_retries&#125;</span> attempts failed for text: <span class="subst">&#123;query&#125;</span>. Error: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="keyword">raise</span></span><br></pre></td></tr></table></figure><p>这段代码就是API的重试机制，简单的说，就是当API调用异常了，在5分钟内，每1分钟重新请求一次，共尝试5次。</p><p>再次过程中，捕获call_qwen_api方法中抛出的异常，存储到日志文件中。</p><h3 id="2-2-3-get-prompt"><a href="#2-2-3-get-prompt" class="headerlink" title="2.2.3 get_prompt"></a>2.2.3 <strong>get_prompt</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这里定义了prompt推理模版</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_prompt</span>(<span class="params">problem, question, options</span>):</span><br><span class="line"></span><br><span class="line">    options = <span class="string">&#x27;\n&#x27;</span>.join(<span class="string">f&quot;<span class="subst">&#123;<span class="string">&#x27;ABCDEFG&#x27;</span>[i]&#125;</span>. <span class="subst">&#123;o&#125;</span>&quot;</span> <span class="keyword">for</span> i, o <span class="keyword">in</span> <span class="built_in">enumerate</span>(options))</span><br><span class="line"></span><br><span class="line">    prompt = <span class="string">f&quot;&quot;&quot;你是一个逻辑推理专家，擅长解决逻辑推理问题。以下是一个逻辑推理的题目，形式为单项选择题。所有的问题都是（close-world assumption）闭世界假设，即未观测事实都为假。请逐步分析问题并在最后一行输出答案，最后一行的格式为&quot;答案是：A&quot;。题目如下：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### 题目:</span></span><br><span class="line"><span class="string"><span class="subst">&#123;problem&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### 问题:</span></span><br><span class="line"><span class="string"><span class="subst">&#123;question&#125;</span></span></span><br><span class="line"><span class="string"><span class="subst">&#123;options&#125;</span></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># print(prompt)</span></span><br><span class="line">    <span class="keyword">return</span> prompt</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这段代码，就是真家伙了。将需要推理的题目，转换成提示词模板。</p><p>个人感觉，如果想提分，这里是可以进行优化的，具体优化方法，我不知道。因为刚开始接触大模型应用，不管是数据清洗、提示词工程、还是推理都不是很了解。如果各位有幸访问到我的博客，可以在评论区交流，我也会多多吸取大家的经验，十份感谢。</p><h3 id="2-2-4-extract"><a href="#2-2-4-extract" class="headerlink" title="2.2.4 extract"></a>2.2.4 extract</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这里使用extract抽取模获得抽取的结果</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">extract</span>(<span class="params">input_text</span>):</span><br><span class="line">    ans_pattern = re.<span class="built_in">compile</span>(<span class="string">r&quot;答案是：(.)&quot;</span>, re.S)</span><br><span class="line"></span><br><span class="line">    problems = ans_pattern.findall(input_text)</span><br><span class="line">    <span class="comment"># print(problems)</span></span><br><span class="line">    <span class="keyword">if</span>(problems == <span class="string">&#x27;&#x27;</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;A&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> problems[<span class="number">0</span>]</span><br></pre></td></tr></table></figure><p>这段代码，主要就是从模型返回的响应中，获取答案。如果找不答案，那么就返回一个固定的A答案。算是容错的一种方式。</p><p>其实我觉得也可以随机返回一个答案，不过都是概率问题（猴子算法哈哈哈哈哈哈），对错就不好说了。</p><h3 id="2-2-5-process-datas"><a href="#2-2-5-process-datas" class="headerlink" title="2.2.5 process_datas"></a>2.2.5 process_datas</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">process_datas</span>(<span class="params">datas,MODEL_NAME</span>):</span><br><span class="line">    results = []</span><br><span class="line">    <span class="comment"># 定义线程池 选择16线程</span></span><br><span class="line">    <span class="keyword">with</span> ThreadPoolExecutor(max_workers=<span class="number">16</span>) <span class="keyword">as</span> executor:</span><br><span class="line">        <span class="comment"># 这里我们使用future_data 存储每个线程的数据</span></span><br><span class="line">        future_data = &#123;&#125;</span><br><span class="line">        <span class="comment"># 这里的lens记录了调用api的次数，也就是我们每个问题背景下的所有子问题之和。</span></span><br><span class="line">        lens = <span class="number">0</span></span><br><span class="line">        <span class="comment"># 送入多线程任务</span></span><br><span class="line">        <span class="comment"># 这里每个data下是一个问题背景，其中包含多个子问题。</span></span><br><span class="line">        <span class="keyword">for</span> data <span class="keyword">in</span> tqdm(datas, desc=<span class="string">&quot;Submitting tasks&quot;</span>, total=<span class="built_in">len</span>(datas)):</span><br><span class="line">            problem = data[<span class="string">&#x27;problem&#x27;</span>]</span><br><span class="line">            <span class="comment"># 这里面我们用enumerate方法每次循环得到问题的序号id和实际的问题。</span></span><br><span class="line">            <span class="keyword">for</span> <span class="built_in">id</span>,question <span class="keyword">in</span> <span class="built_in">enumerate</span>(data[<span class="string">&#x27;questions&#x27;</span>]):</span><br><span class="line">                prompt = get_prompt(problem, </span><br><span class="line">                                    question[<span class="string">&#x27;question&#x27;</span>], </span><br><span class="line">                                    question[<span class="string">&#x27;options&#x27;</span>],</span><br><span class="line">                                    )</span><br><span class="line">                <span class="comment"># 这里送入线程池等待处理，使用api_retry，向api_retry传入MODEL_NAME, prompt参数</span></span><br><span class="line">                future = executor.submit(api_retry, MODEL_NAME, prompt)</span><br><span class="line">                <span class="comment"># 每个线程我们存储对应的json问题数据以及问题序号id，这样我们就能定位出执行的是哪个子问题</span></span><br><span class="line">                future_data[future] = (data,<span class="built_in">id</span>)</span><br><span class="line">                time.sleep(<span class="number">0.6</span>)  <span class="comment"># 控制每0.6秒提交一个任务 防止接口超过并发数</span></span><br><span class="line">                lens += <span class="number">1</span></span><br><span class="line">        <span class="comment"># 处理多线程任务</span></span><br><span class="line">        <span class="keyword">for</span> future <span class="keyword">in</span> tqdm(as_completed(future_data), total=lens, desc=<span class="string">&quot;Processing tasks&quot;</span>):</span><br><span class="line">            <span class="comment"># print(&#x27;data&#x27;,data)</span></span><br><span class="line">            <span class="comment"># 取出每个线程中的字典数据及对应的问题id</span></span><br><span class="line">            data = future_data[future][<span class="number">0</span>]</span><br><span class="line">            problem_id = future_data[future][<span class="number">1</span>]</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="comment"># 获取api运行结果</span></span><br><span class="line">                res  = future.result()</span><br><span class="line">                <span class="comment"># 抽取大语言模型返回结果</span></span><br><span class="line">                extract_response = extract(res)</span><br><span class="line">                <span class="comment"># print(&#x27;res&#x27;,extract_response)</span></span><br><span class="line">                <span class="comment"># 装入answer字段</span></span><br><span class="line">                data[<span class="string">&#x27;questions&#x27;</span>][problem_id][<span class="string">&#x27;answer&#x27;</span>] = extract_response</span><br><span class="line">                <span class="comment"># 在结果列表中新增数据字典</span></span><br><span class="line">                results.append(data)</span><br><span class="line">                <span class="comment"># print(&#x27;data&#x27;,data)</span></span><br><span class="line">                </span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                logger.error(<span class="string">f&quot;Failed to process text: <span class="subst">&#123;data&#125;</span>. Error: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> results</span><br></pre></td></tr></table></figure><p>这段代码，注释写的很清晰。就是创建线程池，并发处理。</p><p>我们调用的是Qwen的API，并发处理应该问题不大，毕竟阿里云是在国内云服务厂商也是大牛级别的存在，但是在自己机器上并发处理，不太清楚会不会把服务打死。</p><p>主要是我也没法尝试，在自己机器上会不会打死，因为公司发的这个ThinkPad，实在是让人抓马。攒钱，2026年顺便薅公司更新机器的羊毛，上MacBook Pro。</p><p>不扯淡了，<strong>这里我突然想起了一个问题，如果我们不是并发执行任务，而是想使用ChatGPT一样，先上来使用提示词告诉模型要做什么。然后一个问题一个问题的问，基于上下文的这种情况，会不会提高模型响应答案的准确率？</strong></p><h3 id="2-2-6-main"><a href="#2-2-6-main" class="headerlink" title="2.2.6 main"></a>2.2.6 main</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">ifn, ofn</span>):</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(ofn):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    data = []</span><br><span class="line">    <span class="comment"># 按行读取数据</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(ifn) <span class="keyword">as</span> reader:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> reader:</span><br><span class="line">            sample = json.loads(line)</span><br><span class="line">            data.append(sample)</span><br><span class="line">    datas = data</span><br><span class="line">    <span class="comment"># print(data)</span></span><br><span class="line">    <span class="comment"># 均匀地分成多个数据集</span></span><br><span class="line">    return_list = process_datas(datas,MODEL_NAME)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">len</span>(return_list))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;All tasks finished!&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> return_list</span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"><span class="comment"># 这里给了一个抽取范例参考</span></span><br><span class="line">    a = extract(<span class="string">&quot;&quot;&quot;根据欧几里得算法，逐步解析计算两个数6和7的最大公约数（gcd）的步骤如下：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. 判断6和7是否相等：不相等。</span></span><br><span class="line"><span class="string">2. 判断6和7大小关系，7 &gt; 6，所以用更大的数7减去较小的数6得到结果1。</span></span><br><span class="line"><span class="string">3. 现在计算6和1的最大公约数。</span></span><br><span class="line"><span class="string">4. 6 &gt; 1，根据算法用更大的数6减去较小的数1得到结果5。</span></span><br><span class="line"><span class="string">5. 再计算5和1的最大公约数。</span></span><br><span class="line"><span class="string">6. 5 &gt; 1，用5减去1得到结果4。</span></span><br><span class="line"><span class="string">7. 再计算4和1的最大公约数。</span></span><br><span class="line"><span class="string">8. 4 &gt; 1，用4减去1得到结果3。</span></span><br><span class="line"><span class="string">9. 再计算3和1的最大公约数。</span></span><br><span class="line"><span class="string">10. 3 &gt; 1，用3减去1得到结果2。</span></span><br><span class="line"><span class="string">11. 再计算2和1的最大公约数。</span></span><br><span class="line"><span class="string">12. 2 &gt; 1，用2减去1得到结果1。</span></span><br><span class="line"><span class="string">13. 最后计算1和1的最大公约数，两数相等，gcd即为这两个数，也就是1。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">因此，6和7的最大公约数是1。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">答案是：C.&quot;&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(a)</span><br><span class="line">    <span class="comment"># 调用主函数</span></span><br><span class="line">    return_list = main(<span class="string">&#x27;round1_test_data.jsonl&#x27;</span>, <span class="string">&#x27;upload.jsonl&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>主函数，主要就是调用上述方法，让模型对题目进行推理。也没啥好讲的。</p><h2 id="2-3-纠正和容错"><a href="#2-3-纠正和容错" class="headerlink" title="2.3 纠正和容错"></a>2.3 纠正和容错</h2><h3 id="2-3-1-has-complete-answer"><a href="#2-3-1-has-complete-answer" class="headerlink" title="2.3.1 has_complete_answer"></a>2.3.1 has_complete_answer</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">has_complete_answer</span>(<span class="params">questions</span>):</span><br><span class="line">    <span class="comment"># 这里假设完整答案的判断逻辑是：每个question都有一个&#x27;answer&#x27;键</span></span><br><span class="line">    <span class="keyword">for</span> question <span class="keyword">in</span> questions:</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;answer&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> question:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure><p>检查答案是否完整，如果question有answer返回真，没有就返回假。</p><h3 id="2-3-2-filter-problems"><a href="#2-3-2-filter-problems" class="headerlink" title="2.3.2 filter_problems"></a>2.3.2 filter_problems</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">filter_problems</span>(<span class="params">data</span>):</span><br><span class="line">    result = []</span><br><span class="line">    problem_set = <span class="built_in">set</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> data:</span><br><span class="line">        <span class="comment"># print(&#x27;处理的item&#x27; ,item)</span></span><br><span class="line">        problem = item[<span class="string">&#x27;problem&#x27;</span>]</span><br><span class="line">        <span class="keyword">if</span> problem <span class="keyword">in</span> problem_set:</span><br><span class="line">            <span class="comment"># 找到已存在的字典</span></span><br><span class="line">            <span class="keyword">for</span> existing_item <span class="keyword">in</span> result:</span><br><span class="line">                <span class="keyword">if</span> existing_item[<span class="string">&#x27;problem&#x27;</span>] == problem:</span><br><span class="line">                    <span class="comment"># 如果当前字典有完整答案，替换已存在的字典</span></span><br><span class="line">                    <span class="keyword">if</span> has_complete_answer(item[<span class="string">&#x27;questions&#x27;</span>]):</span><br><span class="line">                        existing_item[<span class="string">&#x27;questions&#x27;</span>] = item[<span class="string">&#x27;questions&#x27;</span>]</span><br><span class="line">                        existing_item[<span class="string">&#x27;id&#x27;</span>] = item[<span class="string">&#x27;id&#x27;</span>]</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 如果当前字典有完整答案，添加到结果列表</span></span><br><span class="line">            <span class="keyword">if</span> has_complete_answer(item[<span class="string">&#x27;questions&#x27;</span>]):</span><br><span class="line">                result.append(item)</span><br><span class="line">                problem_set.add(problem)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">return_list = filter_problems(return_list)</span><br><span class="line"><span class="comment"># 排序工作 通过id字段后三位代表序号</span></span><br><span class="line">sorted_data = <span class="built_in">sorted</span>(return_list, key=<span class="keyword">lambda</span> x: <span class="built_in">int</span>(<span class="built_in">str</span>(x[<span class="string">&#x27;id&#x27;</span>])[-<span class="number">3</span>:]))</span><br><span class="line"><span class="built_in">print</span>(sorted_data)</span><br></pre></td></tr></table></figure><p>问题过滤器，将所有的问题，存入一个字典，根据id的后三位，进行排序</p><h3 id="2-3-3-find-missing-ids"><a href="#2-3-3-find-missing-ids" class="headerlink" title="2.3.3 find_missing_ids"></a>2.3.3 find_missing_ids</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">find_missing_ids</span>(<span class="params">dict_list</span>):</span><br><span class="line">    <span class="comment"># 提取所有序号</span></span><br><span class="line">    extracted_ids = &#123;<span class="built_in">int</span>(d[<span class="string">&#x27;id&#x27;</span>][-<span class="number">3</span>:]) <span class="keyword">for</span> d <span class="keyword">in</span> dict_list&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 创建0-500的序号集合</span></span><br><span class="line">    all_ids = <span class="built_in">set</span>(<span class="built_in">range</span>(<span class="number">500</span>))</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 找出缺失的序号</span></span><br><span class="line">    missing_ids = all_ids - extracted_ids</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sorted</span>(missing_ids)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例字典列表</span></span><br><span class="line">dict_list = sorted_data</span><br><span class="line"></span><br><span class="line"><span class="comment"># 找出缺失的序号</span></span><br><span class="line">missing_ids = find_missing_ids(dict_list)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;缺失的序号:&quot;</span>, missing_ids)</span><br><span class="line"></span><br><span class="line"><span class="built_in">len</span>(missing_ids)</span><br></pre></td></tr></table></figure><p>这段代码，就是将没有返回响应的题目找出来。返回了一个缺失题目的id集合。</p><h3 id="2-3-4-补错"><a href="#2-3-4-补错" class="headerlink" title="2.3.4  补错"></a>2.3.4  补错</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">data  = []</span><br><span class="line">with open(&#x27;round1_test_data.jsonl&#x27;) as reader:</span><br><span class="line">    for id,line in enumerate(reader):</span><br><span class="line">        if(id in missing_ids):</span><br><span class="line">            sample = json.loads(line)</span><br><span class="line">            for question in sample[&#x27;questions&#x27;]:</span><br><span class="line">                question[&#x27;answer&#x27;] = &#x27;A&#x27;</span><br><span class="line">            sorted_data.append(sample)</span><br><span class="line">sorted_data = sorted(sorted_data, key=lambda x: int(str(x[&#x27;id&#x27;])[-3:]))</span><br></pre></td></tr></table></figure><p>这段代码就是将2.3.3中缺失响应的题目的答案，固定填写为A。Datawhale的讲义中讲到，可以再推一遍，然后填写到这里。<strong>不过会加长运行时间</strong>。</p><h3 id="2-3-5-输出结果"><a href="#2-3-5-输出结果" class="headerlink" title="2.3.5 输出结果"></a>2.3.5 输出结果</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;upload.jsonl&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> writer:</span><br><span class="line">    <span class="keyword">for</span> sample <span class="keyword">in</span> sorted_data:</span><br><span class="line">        writer.write(json.dumps(sample, ensure_ascii=<span class="literal">False</span>))</span><br><span class="line">        writer.write(<span class="string">&#x27;\n&#x27;</span>)</span><br></pre></td></tr></table></figure><p>没啥可讲的，了解。</p><h1 id="三、理解"><a href="#三、理解" class="headerlink" title="三、理解"></a>三、理解</h1><p>通过代码的阅读，我们可以知道，Baseline到底带着我们干了什么。</p><p>主要就是生成提示词，调用模型，对问题进行推理，对模型返回的答案进行处理（记录、纠错、容错），输出结果。</p><p>周围好多人跟我说，你这不就是跟着Datawhale学了一下怎么调用API嘛。</p><p>非也！其实本Task，我起码了解的Prompt提示工程。在推理过程中，也产生了一些自己的想法和疑问。在专业助教老师没有讲解的情况下，作为一个成年人，一个“优秀”的新时代青年，一个“牛X” 的程序员。我们完全可以将想法和疑问，交给大模型，让大模型来对我们的想法和疑问进行分析和解答。</p><p>学会学习，不能读死书，掌握灵活的学习方法，先进的学习工具，才能让我们更快地进步。</p><p>声明如下：</p><p>本篇文章提示工程章节，参考了Datawhale助教老师讲义以及同义千问的解答。代码阅读部分，参考了Datawhale助教老师的讲义，根据自己的理解进行了梳理。</p>]]></content:encoded>
      
      
      
      <category domain="https://log.660066.xyz/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/">大模型</category>
      
      <category domain="https://log.660066.xyz/tags/AI/">AI</category>
      
      <category domain="https://log.660066.xyz/tags/Datawhale/">Datawhale</category>
      
      
      <comments>https://log.660066.xyz/2024/07/30/datawhale-task2-read-baseline/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>【Datawhale AI 夏令营】Task1-体验一站式baseline</title>
      <link>https://log.660066.xyz/2024/07/25/datawhale-task1-baseline/</link>
      <guid>https://log.660066.xyz/2024/07/25/datawhale-task1-baseline/</guid>
      <pubDate>Thu, 25 Jul 2024 05:06:29 GMT</pubDate>
      
      <description>【Datawhale AI 夏令营】Task1-体验一站式baseline</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="一、报名赛事"><a href="#一、报名赛事" class="headerlink" title="一、报名赛事"></a>一、报名赛事</h1><p>赛事链接：<a href="http://competition.sais.com.cn/competitionDetail/532231/format">http://competition.sais.com.cn/competitionDetail/532231/format</a></p><img src="/2024/07/25/datawhale-task1-baseline/QQ_1721884413556.png" alt="QQ_1721884413556" style="zoom:50%;"><p>然后创建团队</p><img src="/2024/07/25/datawhale-task1-baseline/QQ_1721884514263.png" alt="QQ_1721884514263" style="zoom:50%;"><h1 id="二、申请阿里的大模型SK"><a href="#二、申请阿里的大模型SK" class="headerlink" title="二、申请阿里的大模型SK"></a>二、申请阿里的大模型SK</h1><p>链接：<a href="https://dashscope.console.aliyun.com/apiKey">https://dashscope.console.aliyun.com/apiKey</a></p><img src="/2024/07/25/datawhale-task1-baseline/QQ_1721884656865.png" alt="QQ_1721884656865" style="zoom:50%;"><p><strong>不能发给别人！不能发给别人！不能发给别人！</strong></p><h1 id="三、启动魔搭社区的NoteBook"><a href="#三、启动魔搭社区的NoteBook" class="headerlink" title="三、启动魔搭社区的NoteBook"></a>三、启动魔搭社区的NoteBook</h1><p>链接：<a href="https://www.modelscope.cn/my/mynotebook/preset">https://www.modelscope.cn/my/mynotebook/preset</a></p><img src="/2024/07/25/datawhale-task1-baseline/QQ_1721884791160.png" alt="QQ_1721884791160" style="zoom:50%;"><h1 id="四、体验一站式Baseline"><a href="#四、体验一站式Baseline" class="headerlink" title="四、体验一站式Baseline"></a>四、体验一站式Baseline</h1><h2 id="4-1-下载代码和测试集"><a href="#4-1-下载代码和测试集" class="headerlink" title="4.1 下载代码和测试集"></a>4.1 下载代码和测试集</h2><p>代码:<a href="https://datawhaler.feishu.cn/wiki/LSaUwltKAiZxuXk12gBcABCmnfd#ZVeUdvzcToplOnxhJlXcyvLtnDb">https://datawhaler.feishu.cn/wiki/LSaUwltKAiZxuXk12gBcABCmnfd#ZVeUdvzcToplOnxhJlXcyvLtnDb</a></p><p>测试集：<a href="https://datawhaler.feishu.cn/wiki/LSaUwltKAiZxuXk12gBcABCmnfd#STZMd1z65o78itxbFXec0n5hnxe">https://datawhaler.feishu.cn/wiki/LSaUwltKAiZxuXk12gBcABCmnfd#STZMd1z65o78itxbFXec0n5hnxe</a></p><h2 id="4-2-在NoteBook中上传代码和测试集文件"><a href="#4-2-在NoteBook中上传代码和测试集文件" class="headerlink" title="4.2 在NoteBook中上传代码和测试集文件"></a>4.2 在NoteBook中上传代码和测试集文件</h2><p><img src="/2024/07/25/datawhale-task1-baseline/QQ_1721885001973.png" alt="QQ_1721885001973"></p><h2 id="4-3-填写API的SK"><a href="#4-3-填写API的SK" class="headerlink" title="4.3 填写API的SK"></a>4.3 填写API的SK</h2><p>在baseline01.ipynb文件，图中位置填写阿里的大模型API的SK</p><img src="/2024/07/25/datawhale-task1-baseline/QQ_1721885265660.png" alt="QQ_1721885265660" style="zoom:50%;"><h2 id="4-4-运行baselien"><a href="#4-4-运行baselien" class="headerlink" title="4.4 运行baselien"></a>4.4 运行baselien</h2><p><img src="/2024/07/25/datawhale-task1-baseline/QQ_1721885342327.png" alt="QQ_1721885342327"></p><h2 id="4-5-运行完成标记"><a href="#4-5-运行完成标记" class="headerlink" title="4.5 运行完成标记"></a>4.5 运行完成标记</h2><p>当All tasks finished!出现，baseline运行完成。</p><p><img src="/2024/07/25/datawhale-task1-baseline/QQ_1721885405588.png" alt="QQ_1721885405588"></p><h1 id="五、提交结果，吃果子"><a href="#五、提交结果，吃果子" class="headerlink" title="五、提交结果，吃果子"></a>五、提交结果，吃果子</h1><p>右键文件列表，刷新一下文件列表，右键upload.jsonl文件，下载到本地。</p><p><img src="/2024/07/25/datawhale-task1-baseline/QQ_1721885467949.png" alt="QQ_1721885467949"></p><p>返回赛事页面</p><p>赛事链接：<a href="http://competition.sais.com.cn/competitionDetail/532231/format">http://competition.sais.com.cn/competitionDetail/532231/format</a></p><p><img src="/2024/07/25/datawhale-task1-baseline/QQ_1721885547064.png" alt="QQ_1721885547064"></p><p>提交结果，等待系统分析完成，查看我的成绩。</p><p><img src="/2024/07/25/datawhale-task1-baseline/QQ_1721885695879.png" alt="QQ_1721885695879"></p><h1 id="六、打卡"><a href="#六、打卡" class="headerlink" title="六、打卡"></a>六、打卡</h1><p>快去！快去！</p>]]></content:encoded>
      
      
      
      <category domain="https://log.660066.xyz/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/">大模型</category>
      
      <category domain="https://log.660066.xyz/tags/AI/">AI</category>
      
      <category domain="https://log.660066.xyz/tags/Datawhale/">Datawhale</category>
      
      
      <comments>https://log.660066.xyz/2024/07/25/datawhale-task1-baseline/#disqus_thread</comments>
      
    </item>
    
  </channel>
</rss>
